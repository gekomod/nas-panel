import{_ as z,u as P,r as y,c as _,o as T,W as U,b as V,A as W,B as A,h as $,e as i,w as k,f as e,d,i as G,t as l,k as n,G as E,g as v,I as m,n as C,F as M,l as I,v as R}from"./index-naspanel.js";const j={class:"widget-header"},H={class:"header-main"},K={class:"header-icon"},Y={class:"update-time"},J={class:"header-sub"},Q={class:"system"},X={class:"widget-content"},Z={class:"main-usage"},ee={class:"usage-header"},ae={class:"usage-title"},se={class:"usage-value"},te={class:"value-number"},le={class:"usage-progress"},oe={class:"progress-track"},re={key:0,class:"temperature-row"},ne={class:"info-row"},ie={class:"label"},ce={class:"load-container"},de={class:"info-row"},ue={class:"label"},ve={class:"value"},me={class:"load-badges"},he={class:"load-label"},_e={class:"load-value"},pe={class:"load-bars"},ge={class:"load-progress"},fe={class:"metrics-grid"},we={class:"label"},be={class:"value"},ye={name:"CpuWidget",displayName:"CPU"},Ce=Object.assign(ye,{setup(Me){const{t:c}=P(),s=y({usage:0,temperature:null,cores:0,frequency:null,load1:0,load5:0,load15:0}),p=y(c("common.loading")),g=y(!0);let f=null;const o=(t,a=0)=>{const h=Number(t);return isNaN(h)?a:h},u=t=>o(t).toFixed(2),w=t=>{const a=o(t);return Math.min(a*20,100)},B=t=>{const a=o(t);return a>90?"var(--el-color-danger)":a>70?"var(--el-color-warning)":"var(--el-color-success)"},F=t=>{const a=o(t);return a>80?"critical":a>65?"warning":"normal"},q=t=>t>90?"critical":t>70?"warning":"normal",D=_(()=>s.value.usage>80?"critical":s.value.usage>50?"warning":"normal"),O=_(()=>s.value.usage>80?"WYSOKIE OBCIĄŻENIE":s.value.usage>50?"ŚREDNIE OBCIĄŻENIE":"NORMALNE"),L=_(()=>[{label:"Częstotliwość",value:s.value.frequency?`${s.value.frequency} GHz`:"—",icon:"mdi:speedometer"},{label:"Obciążenie (5m)",value:u(s.value.load5),icon:"mdi:timer-outline"},{label:"Obciążenie (15m)",value:u(s.value.load15),icon:"mdi:chart-histogram"}]),N=_(()=>[{label:"1m",value:u(s.value.load1),percentage:w(s.value.load1)},{label:"5m",value:u(s.value.load5),percentage:w(s.value.load5)},{label:"15m",value:u(s.value.load15),percentage:w(s.value.load15)}]),x=async()=>{try{g.value=!0;const a=(await R.get("/api/cpu")).data;s.value={usage:Math.min(100,Math.max(0,o(a.usage,0))),temperature:a.temperature?o(a.temperature):null,cores:o(a.cores,navigator.hardwareConcurrency||4),frequency:a.frequency?o(a.frequency):null,load1:o(a.load1,0),load5:o(a.load5,0),load15:o(a.load15,0)},p.value=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch(t){console.error(c("common.errorFetching"),t),s.value={usage:Math.min(100,Math.round(Math.random()*40+10)),temperature:45+Math.round(Math.random()*20),cores:navigator.hardwareConcurrency||4,frequency:(2.4+Math.random()*1.6).toFixed(1),load1:(Math.random()*2).toFixed(2),load5:(Math.random()*2).toFixed(2),load15:(Math.random()*2).toFixed(2)},p.value=c("common.error")}finally{g.value=!1}};return T(()=>{x(),f=setInterval(x,3e4)}),U(()=>{f&&clearInterval(f)}),(t,a)=>{const h=V("el-card"),S=W("loading");return A((i(),$(h,{class:"widget-card",shadow:"hover"},{header:k(()=>[e("div",j,[e("div",H,[e("div",K,[v(n(m),{icon:"mdi:cpu-64-bit",width:"16"})]),a[0]||(a[0]=e("span",{class:"header-title"},"CPU",-1)),e("div",Y,[v(n(m),{icon:"mdi:update",width:"12"}),e("span",null,l(n(c)("common.update"))+": "+l(p.value),1)])]),e("div",J,[e("span",{class:C(["hostname",D.value])},l(O.value),3),e("span",Q,l(s.value.cores)+" rdzeni",1)])])]),default:k(()=>[e("div",X,[e("div",Z,[e("div",ee,[e("span",ae,l(n(c)("cpu.usage")),1),e("div",se,[e("span",te,l(s.value.usage),1),a[1]||(a[1]=e("span",{class:"value-unit"},"%",-1))])]),e("div",le,[e("div",oe,[e("div",{class:"progress-fill",style:E({width:`${s.value.usage}%`,"--progress-color":B(s.value.usage)})},a[2]||(a[2]=[e("div",{class:"progress-glow"},null,-1)]),4)]),a[3]||(a[3]=e("div",{class:"progress-thresholds"},[e("div",{class:"threshold",style:{left:"30%"}}),e("div",{class:"threshold",style:{left:"70%"}}),e("div",{class:"threshold critical",style:{left:"90%"}})],-1))])]),s.value.temperature?(i(),d("div",re,[e("div",ne,[e("div",ie,[v(n(m),{icon:"mdi:thermometer",width:"14"}),e("span",null,l(n(c)("cpu.temperature")),1)]),e("div",{class:C(["value temp-value",F(s.value.temperature)])},l(s.value.temperature)+"°C ",3)])])):G("",!0),e("div",ce,[e("div",de,[e("div",ue,[v(n(m),{icon:"mdi:chart-line",width:"14"}),e("span",null,l(n(c)("cpu.load")),1)]),e("div",ve,[e("div",me,[(i(!0),d(M,null,I(N.value,(r,b)=>(i(),d("span",{class:"load-badge",key:b},[e("span",he,l(r.label),1),e("span",_e,l(r.value),1)]))),128))])])]),e("div",pe,[(i(!0),d(M,null,I(N.value,(r,b)=>(i(),d("div",{class:"load-bar",key:b},[e("div",ge,[e("div",{class:C(["load-progress-fill",q(r.percentage)]),style:E({width:`${r.percentage}%`})},null,6)])]))),128))])]),e("div",fe,[(i(!0),d(M,null,I(L.value,r=>(i(),d("div",{class:"info-row metric-item",key:r.label},[e("div",we,[v(n(m),{icon:r.icon,width:"14"},null,8,["icon"]),e("span",null,l(r.label),1)]),e("div",be,l(r.value),1)]))),128))])])]),_:1})),[[S,g.value]])}}}),Ne=z(Ce,[["__scopeId","data-v-ce458fa1"]]);export{Ne as default};
