import{_ as ml,r as i,ae as pl,c as Se,D as vl,o as fl,v as V,b as g,A as gl,d as U,e as m,f as o,i as h,g as l,m as u,h as w,w as a,k as v,I as f,t as _,B as _l,n as Ae,p as q,a3 as Ie,F as Q,l as X,x as p,C as ie}from"./index-naspanel.js";const yl={class:"docker-images"},bl={class:"clean-header"},Cl={class:"header-left"},kl={class:"header-right"},wl={class:"header-actions"},Il={key:0,class:"stats-cards"},Vl={class:"stat-content"},hl={class:"stat-details"},Rl={class:"stat-value"},Ul={class:"stat-content"},$l={class:"stat-details"},xl={class:"stat-value"},Dl={class:"stat-content"},Tl={class:"stat-details"},zl={class:"stat-value"},Sl={class:"stat-content"},Al={class:"stat-details"},Bl={class:"stat-value"},Ml={class:"table-wrapper"},Fl={key:0,class:"empty-state"},El={key:1,class:"table-container"},Pl={class:"image-cell"},Ll={class:"image-name"},Nl={class:"image-id"},ql={class:"created-cell"},Kl={class:"created-text"},Ol={class:"size-cell"},Gl={class:"size-text"},Hl={class:"actions-container"},Wl={class:"action-buttons-group"},jl={key:2,class:"table-footer"},Jl={class:"footer-info"},Yl={class:"footer-text"},Zl={class:"footer-actions"},Ql={class:"dialog-footer"},Xl={class:"auto-update-content"},et={class:"cleanup-content"},lt={class:"cleanup-options"},tt={key:0,class:"cleanup-preview mt-4"},at={class:"preview-output"},st={class:"inspect-container"},ot={class:"inspect-data"},nt={class:"history-list"},ut={class:"history-header"},it={class:"history-cmd"},rt={class:"history-size"},dt={class:"history-date"},ct={class:"layers-list"},mt={class:"layer-header"},pt={class:"layer-id"},vt={class:"layer-size"},ft={class:"tags-container"},gt={class:"tags-container"},_t={__name:"DockerImages",setup(yt){const A=i([]),K=i(!1),ee=i(""),E=i(!1),O=i(!1),G=i(!1),H=i(!1),W=i(!1),le=i(!1),re=i(""),de=i(""),ce=i("inspect"),te=i([]),Ve=i([]),Be=i({}),Me=pl("reloadKey"),me=i(!1),P=i(null),pe=i(null),ve=i(!1),L=i(!1),fe=i(!1),ge=i(!1),_e=i(!1),j=i(""),C=i({image:"",registry:"",platform:""}),y=i({registry:"https://index.docker.io/v2/",customUrl:"",username:"",password:"",remember:!0}),r=i({enabled:!1,schedule:"0 2 * * *",customCron:"",restartContainers:!0,selectedImages:[]}),k=i({name:"",ports:[],environment:[],restart:"unless-stopped"}),J=i(""),Y=i(""),x=i({totalImages:0,totalSize:0,totalTags:0,autoUpdateCount:0}),B=i([]),Z=i(""),ye=i([]),M=Se(()=>{if(!ee.value)return A.value;const t=ee.value.toLowerCase();return A.value.filter(e=>e.Repository?.toLowerCase().includes(t)||e.Tag?.toLowerCase().includes(t)||e.ImageID?.toLowerCase().includes(t))}),Fe=Se(()=>A.value.filter(t=>t.Repository&&t.Repository!=="<none>").map(t=>({key:`${t.Repository}:${t.Tag}`,label:`${t.Repository}:${t.Tag} (${Re(t.Size)})`}))),he=t=>{const e=`${t.Repository}:${t.Tag}`;return r.value.selectedImages.includes(e)},ae=t=>{`${t.Repository}${t.Tag}`;const e=he(t);return{type:e?"success":"info",class:e?"status-auto-update":"status-manual",icon:e?"mdi:update":"mdi:update-off",text:e?"Auto-update":"Manual"}},Re=t=>{if(!t)return"0B";if(typeof t=="string"&&t.match(/[a-zA-Z]/))return t;const e=parseInt(t);if(isNaN(e))return t;const n=["B","KB","MB","GB","TB"];if(e===0)return"0 B";const d=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,d)).toFixed(1)+" "+n[d]},Ee=t=>{if(!t)return"-";const e=t.match(/(\d+)\s+(\w+)\s+ago/);if(e){const[,n,d]=e;return`${n} ${d} ago`}return t},Pe=t=>!t||t==="<none>"?"local":t.includes("docker.io")?"docker.io":t.includes("ghcr.io")?"ghcr.io":t.includes("gcr.io")?"gcr.io":t.includes("/")?t.split("/")[0]:"docker.io",se=t=>{if(!t)return"0 B";const e=["B","KB","MB","GB","TB"];if(t===0)return"0 B";const n=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,n)).toFixed(2)+" "+e[n]},Le=({row:t})=>t.Repository==="<none>"?"dangling-row":"",D=async()=>{try{K.value=!0;const t=await V.get("/services/docker/images");t.data.success&&Array.isArray(t.data.images)&&(A.value=t.data.images.map(e=>({Repository:e.Repository||e.REPOSITORY||"<none>",Tag:e.Tag||e.TAG||"<none>",ImageID:e.ImageID||e.ID||e.IMAGEID,CreatedSince:e.CreatedSince||e.CREATEDSINCE,Size:e.Size||e.SIZE,VirtualSize:e.VirtualSize,Containers:e.Containers})),Ne(),await Xe(),await De())}catch(t){p.error("Failed to fetch Docker images"),console.error(t)}finally{K.value=!1}},Ne=()=>{let t=0,e=0;const n=new Set;A.value.forEach(d=>{if(d.Size){const c=d.Size.toString().match(/(\d+(?:\.\d+)?)\s*(\w+)?/);if(c){const[,R,S]=c;let T=parseFloat(R);if(S){const oe=["B","KB","MB","GB","TB"].indexOf(S.toUpperCase());oe>0&&(T*=Math.pow(1024,oe))}t+=T}}d.Repository&&d.Repository!=="<none>"&&(n.add(d.Repository),e++)}),x.value={totalImages:A.value.length,totalSize:t,totalTags:e,autoUpdateCount:r.value.selectedImages.length}},Ue=async()=>{try{if(!C.value.image){p.warning("Please enter an image name");return}me.value=!0,E.value=!1;let t=C.value.image;C.value.registry&&(t=`${C.value.registry}/${t}`);const e={};C.value.platform&&(e.platform=C.value.platform);const n=await V.post("/services/docker/images/pull",{image:t,...e});p.success(n.data.message||"Image pulled successfully"),await D()}catch(t){p.error(`Failed to pull image: ${t.response?.data?.error||t.message}`)}finally{me.value=!1,C.value={image:"",registry:"",platform:""}}},qe=async t=>{try{await ie.confirm(`Delete image ${t.Repository}:${t.Tag}?`,"Confirm Delete",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning",dangerouslyUseHTMLString:!0}),P.value=t.ImageID;const e=await V.delete("/services/docker/images/remove",{params:{image:`${t.Repository}:${t.Tag}`,force:!1}});p.success(e.data.message||"Image deleted successfully"),await D()}catch(e){e!=="cancel"&&(e.response?.data?.suggestion?p.error(`${e.response.data.error} ${e.response.data.suggestion}`):p.error("Failed to delete image"))}finally{P.value=null}},Ke=async t=>{try{await ie.confirm(`<strong>Force Delete Image</strong><br><br>
      This will forcefully remove image ${t.Repository}:${t.Tag}<br>
      <span style="color: #f56c6c">Warning: This may break running containers!</span>`,"Confirm Force Delete",{confirmButtonText:"Force Delete",cancelButtonText:"Cancel",type:"error",dangerouslyUseHTMLString:!0}),P.value=t.ImageID;const e=await V.delete("/services/docker/images/remove",{params:{image:`${t.Repository}:${t.Tag}`,force:!0}});p.success(e.data.message||"Image force deleted successfully"),await D()}catch(e){e!=="cancel"&&p.error("Failed to force delete image")}finally{P.value=null}},Oe=async t=>{try{pe.value=t.ImageID;const e=await V.post("/services/docker/images/pull",{image:`${t.Repository}:${t.Tag}`});p.success(e.data.message||"Image updated successfully"),await D()}catch(e){p.error("Failed to update image"),console.error(e)}finally{pe.value=null}},Ge=t=>{j.value=`${t.Repository}:${t.Tag}`,k.value.name=`${t.Repository.replace(/[:/]/g,"-")}-${Date.now()}`,W.value=!0},$e=()=>{J.value&&(k.value.ports.push(J.value),J.value="")},He=t=>{k.value.ports.splice(t,1)},xe=()=>{Y.value&&(k.value.environment.push(Y.value),Y.value="")},We=t=>{k.value.environment.splice(t,1)},je=async()=>{try{_e.value=!0;const t=await V.post("/services/docker/container/create",{name:k.value.name,image:j.value,ports:k.value.ports,env:k.value.environment.reduce((e,n)=>{const[d,...$]=n.split("=");return e[d]=$.join("="),e},{})});p.success(t.data.message||"Container created successfully"),W.value=!1,k.value={name:"",ports:[],environment:[],restart:"unless-stopped"},j.value=""}catch(t){p.error("Failed to create container"),console.error(t)}finally{_e.value=!1}},Je=async t=>{try{const e=await V.get(`/services/docker/images/inspect/${t}`);re.value=JSON.stringify(e.data.data||e.data,null,2);try{const d=await V.get(`/services/docker/images/history/${t}`);te.value=Array.isArray(d.data)?d.data:[]}catch{te.value=[]}const n=e.data.data||e.data;if(Array.isArray(n)){const d=n[0];de.value=d.RepoTags?.[0]||d.Id?.substring(0,12)}else de.value=n.RepoTags?.[0]||t.substring(0,12);le.value=!0,ce.value="inspect"}catch(e){p.error("Failed to inspect image"),console.error(e)}},Ye=()=>{navigator.clipboard.writeText(re.value).then(()=>p.success("Copied to clipboard")).catch(()=>p.error("Failed to copy"))},Ze=async()=>{try{if(!y.value.username||!y.value.password){p.warning("Username and password are required");return}ve.value=!0;let t=y.value.registry;t==="custom"&&y.value.customUrl&&(t=y.value.customUrl),await V.post("/services/docker/registry/login",{server:t,username:y.value.username,password:y.value.password}),p.success("Logged in successfully"),O.value=!1,y.value={registry:"https://index.docker.io/v2/",customUrl:"",username:"",password:"",remember:!0},await De()}catch(t){p.error("Login failed: "+t.message),console.error(t)}finally{ve.value=!1}},Qe=t=>{t==="ghcr.io"&&(y.value.username="",y.value.password="")},De=async()=>{try{const t=await V.get("/services/docker/registry/list");ye.value=t.data.registries||[]}catch(t){console.error("Failed to fetch registry info:",t)}},Xe=async()=>{try{const t=await V.get("/services/docker/auto-update");t.data&&(r.value={enabled:t.data.enabled||!1,schedule:t.data.schedule||"0 2 * * *",customCron:t.data.customCron||"",restartContainers:t.data.restartContainers!==!1,selectedImages:t.data.images||[]}),x.value.autoUpdateCount=r.value.selectedImages.length}catch(t){console.error("Failed to fetch auto-update settings:",t)}},el=t=>{const e=`${t.Repository}:${t.Tag}`,n=r.value.selectedImages.indexOf(e);n>-1?(r.value.selectedImages.splice(n,1),p.info(`Removed ${e} from auto-update`)):(r.value.selectedImages.push(e),p.success(`Added ${e} to auto-update`)),x.value.autoUpdateCount=r.value.selectedImages.length},ll=async()=>{try{ge.value=!0;const t=r.value.schedule==="custom"?r.value.customCron:r.value.schedule;await V.post("/services/docker/auto-update",{enabled:r.value.enabled,schedule:t,images:r.value.selectedImages,restartContainers:r.value.restartContainers}),p.success("Auto update settings saved"),G.value=!1}catch(t){p.error("Failed to save settings: "+t.message),console.error(t)}finally{ge.value=!1}},tl=async()=>{try{fe.value=!0,Z.value="";const t=[];B.value.includes("dangling")&&t.push('docker images --filter "dangling=true" -q'),B.value.includes("unused")&&t.push('docker images --filter "dangling=false" --format "{{.Repository}}:{{.Tag}}"');let e=`Preview of images to be removed:

`;for(const n of t)try{const{stdout:d}=await execAsync(n);d.trim()&&(e+=`Command: ${n}
${d}

`)}catch(d){e+=`Command: ${n}
Error: ${d.message}

`}Z.value=e}catch(t){p.error("Failed to preview cleanup"),console.error(t)}finally{fe.value=!1}},al=async()=>{try{L.value=!0,await ie.confirm("This will remove all unused Docker images. Continue?","Confirm Cleanup",{confirmButtonText:"Clean",cancelButtonText:"Cancel",type:"warning"}),await V.post("/services/docker/images/cleanup"),p.success("Cleanup completed successfully"),await D()}catch(t){t!=="cancel"&&p.error("Cleanup failed: "+t.message)}finally{L.value=!1}},sl=async()=>{try{L.value=!0,await ie.confirm("This will execute the selected cleanup operations. This action cannot be undone. Continue?","Execute Cleanup",{confirmButtonText:"Execute",cancelButtonText:"Cancel",type:"error"});const t=await V.post("/services/docker/cleanup",{options:B.value});p.success(t.data.message||"Cleanup executed successfully"),H.value=!1,B.value=[],Z.value="",await D()}catch(t){t!=="cancel"&&p.error("Cleanup failed: "+t.message)}finally{L.value=!1}},ol=t=>{console.log("Row clicked:",t)};return vl(Me,()=>{D()}),fl(()=>{D(),setInterval(async()=>{if(r.value.enabled)try{const t=await V.get("/services/docker/auto-update/check");t.data.updates?.length>0&&console.log(`${t.data.updates.length} images have updates available`)}catch(t){console.error("Update check failed:",t)}},36e5)}),(t,e)=>{const n=g("el-icon"),d=g("el-tag"),$=g("el-input"),c=g("el-button"),R=g("el-tooltip"),S=g("el-card"),T=g("el-table-column"),be=g("el-button-group"),oe=g("el-table"),b=g("el-form-item"),z=g("el-option"),Ce=g("el-select"),F=g("el-radio"),Te=g("el-radio-group"),ne=g("el-form"),N=g("el-dialog"),ke=g("el-switch"),ze=g("el-alert"),nl=g("el-divider"),ul=g("el-transfer"),ue=g("el-checkbox"),il=g("el-checkbox-group"),we=g("el-tab-pane"),rl=g("el-tabs"),dl=gl("loading");return m(),U("div",yl,[o("div",bl,[o("div",Cl,[o("h2",null,[l(n,null,{default:a(()=>[l(v(f),{icon:"mdi:image-multiple"})]),_:1}),e[37]||(e[37]=u(" Docker Images ")),M.value.length>0?(m(),w(d,{key:0,type:"info",size:"small",class:"ml-2"},{default:a(()=>[u(_(M.value.length)+" images ",1)]),_:1})):h("",!0),x.value.totalSize?(m(),w(d,{key:1,type:"warning",size:"small",class:"ml-2"},{default:a(()=>[u(_(se(x.value.totalSize)),1)]),_:1})):h("",!0)])]),o("div",kl,[l($,{modelValue:ee.value,"onUpdate:modelValue":e[0]||(e[0]=s=>ee.value=s),placeholder:"Search images...",clearable:"",size:"small",style:{width:"300px"},onClear:D},{prefix:a(()=>[l(n,null,{default:a(()=>[l(v(f),{icon:"mdi:magnify"})]),_:1})]),_:1},8,["modelValue"]),o("div",wl,[l(R,{content:"Refresh",placement:"top"},{default:a(()=>[l(c,{type:"info",onClick:D,size:"small",loading:K.value,class:"action-btn"},{default:a(()=>[l(n,null,{default:a(()=>[l(v(f),{icon:"mdi:refresh"})]),_:1})]),_:1},8,["loading"])]),_:1}),l(R,{content:"Pull Image",placement:"top"},{default:a(()=>[l(c,{type:"primary",onClick:e[1]||(e[1]=s=>E.value=!0),size:"small",class:"action-btn"},{default:a(()=>[l(n,null,{default:a(()=>[l(v(f),{icon:"mdi:download"})]),_:1})]),_:1})]),_:1}),l(R,{content:"Registry Login",placement:"top"},{default:a(()=>[l(c,{type:"success",onClick:e[2]||(e[2]=s=>O.value=!0),size:"small",class:"action-btn"},{default:a(()=>[l(n,null,{default:a(()=>[l(v(f),{icon:"mdi:login"})]),_:1})]),_:1})]),_:1}),l(R,{content:"Clean Up",placement:"top"},{default:a(()=>[l(c,{type:"warning",onClick:e[3]||(e[3]=s=>H.value=!0),size:"small",class:"action-btn"},{default:a(()=>[l(n,null,{default:a(()=>[l(v(f),{icon:"mdi:broom"})]),_:1})]),_:1})]),_:1})])])]),x.value.totalImages>0?(m(),U("div",Il,[l(S,{shadow:"never",class:"stat-card"},{default:a(()=>[o("div",Vl,[l(n,{class:"stat-icon"},{default:a(()=>[l(v(f),{icon:"mdi:image-multiple"})]),_:1}),o("div",hl,[o("div",Rl,_(x.value.totalImages),1),e[38]||(e[38]=o("div",{class:"stat-label"},"Total Images",-1))])])]),_:1}),l(S,{shadow:"never",class:"stat-card"},{default:a(()=>[o("div",Ul,[l(n,{class:"stat-icon"},{default:a(()=>[l(v(f),{icon:"mdi:harddisk"})]),_:1}),o("div",$l,[o("div",xl,_(se(x.value.totalSize)),1),e[39]||(e[39]=o("div",{class:"stat-label"},"Total Size",-1))])])]),_:1}),l(S,{shadow:"never",class:"stat-card"},{default:a(()=>[o("div",Dl,[l(n,{class:"stat-icon"},{default:a(()=>[l(v(f),{icon:"mdi:tag-multiple"})]),_:1}),o("div",Tl,[o("div",zl,_(x.value.totalTags),1),e[40]||(e[40]=o("div",{class:"stat-label"},"Tags",-1))])])]),_:1}),l(S,{shadow:"never",class:"stat-card"},{default:a(()=>[o("div",Sl,[l(n,{class:"stat-icon"},{default:a(()=>[l(v(f),{icon:"mdi:update"})]),_:1}),o("div",Al,[o("div",Bl,_(x.value.autoUpdateCount),1),e[41]||(e[41]=o("div",{class:"stat-label"},"Auto-update",-1))])])]),_:1})])):h("",!0),o("div",Ml,[l(S,{shadow:"never",class:Ae(["clean-table-card",{empty:M.value.length===0}])},{default:a(()=>[M.value.length===0&&!K.value?(m(),U("div",Fl,[l(n,{size:"64",class:"empty-icon"},{default:a(()=>[l(v(f),{icon:"mdi:image-off"})]),_:1}),e[43]||(e[43]=o("h3",null,"No Docker images found",-1)),e[44]||(e[44]=o("p",null,"Pull your first Docker image to get started",-1)),l(c,{type:"primary",onClick:e[4]||(e[4]=s=>E.value=!0),size:"small",class:"create-btn"},{default:a(()=>[l(n,null,{default:a(()=>[l(v(f),{icon:"mdi:download"})]),_:1}),e[42]||(e[42]=u(" Pull your first image "))]),_:1,__:[42]})])):(m(),U("div",El,[_l((m(),w(oe,{data:M.value,class:"clean-table",stripe:"",onRowClick:ol,"row-class-name":Le},{default:a(()=>[l(T,{prop:"Repository",label:"Repository","min-width":"200"},{default:a(({row:s})=>[o("div",Pl,[l(n,{class:"image-icon"},{default:a(()=>[l(v(f),{icon:"mdi:image"})]),_:1}),o("span",Ll,_(s.Repository||"<none>"),1),s.Repository.includes("/")?(m(),w(d,{key:0,size:"mini",effect:"plain",class:"registry-tag"},{default:a(()=>[u(_(Pe(s.Repository)),1)]),_:2},1024)):h("",!0)])]),_:1}),l(T,{prop:"Tag",label:"Tag",width:"120"},{default:a(({row:s})=>[l(d,{type:s.Tag==="latest"?"primary":"info",size:"small",class:"tag-badge"},{default:a(()=>[u(_(s.Tag||"<none>"),1)]),_:2},1032,["type"])]),_:1}),l(T,{prop:"ImageID",label:"Image ID",width:"200"},{default:a(({row:s})=>[l(R,{content:s.ImageID,placement:"top"},{default:a(()=>[o("code",Nl,_(s.ImageID.substring(0,12)),1)]),_:2},1032,["content"])]),_:1}),l(T,{prop:"CreatedSince",label:"Created",width:"150"},{default:a(({row:s})=>[o("div",ql,[l(n,{size:"12",class:"created-icon"},{default:a(()=>[l(v(f),{icon:"mdi:clock-outline"})]),_:1}),o("span",Kl,_(Ee(s.CreatedSince)),1)])]),_:1}),l(T,{prop:"Size",label:"Size",width:"120"},{default:a(({row:s})=>[o("div",Ol,[l(n,{size:"12",class:"size-icon"},{default:a(()=>[l(v(f),{icon:"mdi:harddisk"})]),_:1}),o("span",Gl,_(Re(s.Size)),1)])]),_:1}),l(T,{label:"Status",width:"150"},{default:a(({row:s})=>[l(d,{type:ae(s).type,size:"small",class:Ae([ae(s).class,"status-tag"])},{default:a(()=>[l(n,{size:10,class:"status-icon"},{default:a(()=>[l(v(f),{icon:ae(s).icon},null,8,["icon"])]),_:2},1024),u(" "+_(ae(s).text),1)]),_:2},1032,["type","class"])]),_:1}),l(T,{label:"Actions",width:"320",fixed:"right","class-name":"actions-column"},{default:a(({row:s})=>[o("div",Hl,[o("div",Wl,[l(be,{class:"primary-actions"},{default:a(()=>[l(R,{content:"Pull Latest",placement:"top"},{default:a(()=>[l(c,{type:"primary",size:"small",circle:"",onClick:q(I=>Oe(s),["stop"]),loading:pe.value===s.ImageID,disabled:!s.Repository||s.Repository==="<none>"},{default:a(()=>[l(n,null,{default:a(()=>[l(v(f),{icon:"mdi:download"})]),_:1})]),_:2},1032,["onClick","loading","disabled"])]),_:2},1024),l(R,{content:"Run Container",placement:"top"},{default:a(()=>[l(c,{type:"success",size:"small",circle:"",onClick:q(I=>Ge(s),["stop"]),disabled:!s.Repository||s.Repository==="<none>"},{default:a(()=>[l(n,null,{default:a(()=>[l(v(f),{icon:"mdi:play"})]),_:1})]),_:2},1032,["onClick","disabled"])]),_:2},1024),l(R,{content:"Inspect",placement:"top"},{default:a(()=>[l(c,{type:"info",size:"small",circle:"",onClick:q(I=>Je(s.ImageID),["stop"])},{default:a(()=>[l(n,null,{default:a(()=>[l(v(f),{icon:"mdi:information"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),l(be,{class:"secondary-actions"},{default:a(()=>[l(R,{content:"Add to Auto Update",placement:"top"},{default:a(()=>[l(c,{type:"warning",size:"small",circle:"",onClick:q(I=>el(s),["stop"]),disabled:!s.Repository||s.Repository==="<none>"},{default:a(()=>[l(n,null,{default:a(()=>[l(v(f),{icon:he(s)?"mdi:update":"mdi:update-off"},null,8,["icon"])]),_:2},1024)]),_:2},1032,["onClick","disabled"])]),_:2},1024),l(R,{content:"Force Remove",placement:"top"},{default:a(()=>[l(c,{type:"danger",size:"small",circle:"",onClick:q(I=>Ke(s),["stop"]),loading:P.value===s.ImageID},{default:a(()=>[l(n,null,{default:a(()=>[l(v(f),{icon:"mdi:delete-forever"})]),_:1})]),_:2},1032,["onClick","loading"])]),_:2},1024),l(R,{content:"Remove",placement:"top"},{default:a(()=>[l(c,{type:"danger",size:"small",circle:"",onClick:q(I=>qe(s),["stop"]),loading:P.value===s.ImageID},{default:a(()=>[l(n,null,{default:a(()=>[l(v(f),{icon:"mdi:delete"})]),_:1})]),_:2},1032,["onClick","loading"])]),_:2},1024)]),_:2},1024)])])]),_:1})]),_:1},8,["data"])),[[dl,K.value]])])),M.value.length>0?(m(),U("div",jl,[o("div",Jl,[o("span",Yl," Showing "+_(M.value.length)+" of "+_(A.value.length)+" images ",1)]),o("div",Zl,[l(c,{size:"small",onClick:al,loading:L.value,class:"footer-btn"},{default:a(()=>[l(n,null,{default:a(()=>[l(v(f),{icon:"mdi:broom"})]),_:1}),e[45]||(e[45]=u(" Clean Unused "))]),_:1,__:[45]},8,["loading"]),l(c,{size:"small",onClick:e[5]||(e[5]=s=>G.value=!0),class:"footer-btn"},{default:a(()=>[l(n,null,{default:a(()=>[l(v(f),{icon:"mdi:robot"})]),_:1}),e[46]||(e[46]=u(" Auto Update Settings "))]),_:1,__:[46]})])])):h("",!0)]),_:1},8,["class"])]),l(N,{modelValue:E.value,"onUpdate:modelValue":e[10]||(e[10]=s=>E.value=s),title:"Pull Docker Image",width:"500px",class:"clean-dialog"},{footer:a(()=>[o("div",Ql,[l(c,{onClick:e[9]||(e[9]=s=>E.value=!1),size:"small"},{default:a(()=>e[50]||(e[50]=[u("Cancel")])),_:1,__:[50]}),l(c,{type:"primary",onClick:Ue,disabled:!C.value.image,loading:me.value,size:"small"},{default:a(()=>[l(n,null,{default:a(()=>[l(v(f),{icon:"mdi:download"})]),_:1}),e[51]||(e[51]=u(" Pull Image "))]),_:1,__:[51]},8,["disabled","loading"])])]),default:a(()=>[l(ne,{model:C.value,"label-width":"120px","label-position":"top"},{default:a(()=>[l(b,{label:"Image Name",required:""},{default:a(()=>[l($,{modelValue:C.value.image,"onUpdate:modelValue":e[6]||(e[6]=s=>C.value.image=s),placeholder:"e.g. nginx:latest, ubuntu:22.04",onKeyup:Ie(Ue,["enter"])},null,8,["modelValue"])]),_:1}),ye.value.length>0?(m(),w(b,{key:0,label:"Registry"},{default:a(()=>[l(Ce,{modelValue:C.value.registry,"onUpdate:modelValue":e[7]||(e[7]=s=>C.value.registry=s),placeholder:"Select registry",style:{width:"100%"}},{default:a(()=>[l(z,{label:"Docker Hub",value:""}),(m(!0),U(Q,null,X(ye.value,s=>(m(),w(z,{key:s.server,label:s.server,value:s.server},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):h("",!0),C.value.image?(m(),w(b,{key:1,label:"Platform"},{default:a(()=>[l(Te,{modelValue:C.value.platform,"onUpdate:modelValue":e[8]||(e[8]=s=>C.value.platform=s)},{default:a(()=>[l(F,{label:"linux/amd64"},{default:a(()=>e[47]||(e[47]=[u("AMD64")])),_:1,__:[47]}),l(F,{label:"linux/arm64"},{default:a(()=>e[48]||(e[48]=[u("ARM64")])),_:1,__:[48]}),l(F,{label:""},{default:a(()=>e[49]||(e[49]=[u("Any")])),_:1,__:[49]})]),_:1},8,["modelValue"])]),_:1})):h("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(N,{modelValue:O.value,"onUpdate:modelValue":e[17]||(e[17]=s=>O.value=s),title:"Docker Registry Login",width:"500px",class:"clean-dialog"},{footer:a(()=>[l(c,{onClick:e[16]||(e[16]=s=>O.value=!1)},{default:a(()=>e[52]||(e[52]=[u("Cancel")])),_:1,__:[52]}),l(c,{type:"primary",onClick:Ze,loading:ve.value},{default:a(()=>e[53]||(e[53]=[u(" Login ")])),_:1,__:[53]},8,["loading"])]),default:a(()=>[l(ne,{model:y.value,"label-width":"120px","label-position":"top"},{default:a(()=>[l(b,{label:"Registry",required:""},{default:a(()=>[l(Ce,{modelValue:y.value.registry,"onUpdate:modelValue":e[11]||(e[11]=s=>y.value.registry=s),onChange:Qe,style:{width:"100%"}},{default:a(()=>[l(z,{label:"Docker Hub",value:"https://index.docker.io/v2/"}),l(z,{label:"GitHub Container Registry",value:"ghcr.io"}),l(z,{label:"Google Container Registry",value:"gcr.io"}),l(z,{label:"Custom Registry",value:"custom"})]),_:1},8,["modelValue"])]),_:1}),y.value.registry==="custom"?(m(),w(b,{key:0,label:"Custom Registry URL",required:""},{default:a(()=>[l($,{modelValue:y.value.customUrl,"onUpdate:modelValue":e[12]||(e[12]=s=>y.value.customUrl=s),placeholder:"https://registry.example.com"},null,8,["modelValue"])]),_:1})):h("",!0),l(b,{label:"Username",required:""},{default:a(()=>[l($,{modelValue:y.value.username,"onUpdate:modelValue":e[13]||(e[13]=s=>y.value.username=s)},null,8,["modelValue"])]),_:1}),l(b,{label:"Password",required:""},{default:a(()=>[l($,{modelValue:y.value.password,"onUpdate:modelValue":e[14]||(e[14]=s=>y.value.password=s),type:"password"},null,8,["modelValue"])]),_:1}),l(b,{label:"Remember Me"},{default:a(()=>[l(ke,{modelValue:y.value.remember,"onUpdate:modelValue":e[15]||(e[15]=s=>y.value.remember=s)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(N,{modelValue:G.value,"onUpdate:modelValue":e[24]||(e[24]=s=>G.value=s),title:"Auto Update Settings",width:"600px",class:"clean-dialog"},{footer:a(()=>[l(c,{onClick:e[23]||(e[23]=s=>G.value=!1)},{default:a(()=>e[56]||(e[56]=[u("Cancel")])),_:1,__:[56]}),l(c,{type:"primary",onClick:ll,loading:ge.value},{default:a(()=>e[57]||(e[57]=[u(" Save Settings ")])),_:1,__:[57]},8,["loading"])]),default:a(()=>[o("div",Xl,[l(ze,{title:"Auto Update Information",type:"info",closable:!1,class:"mb-4"},{default:a(()=>e[54]||(e[54]=[o("p",null,"Automatically update selected Docker images on a schedule",-1)])),_:1,__:[54]}),l(ne,{model:r.value,"label-width":"200px"},{default:a(()=>[l(b,{label:"Enable Auto Update"},{default:a(()=>[l(ke,{modelValue:r.value.enabled,"onUpdate:modelValue":e[18]||(e[18]=s=>r.value.enabled=s)},null,8,["modelValue"])]),_:1}),r.value.enabled?(m(),w(b,{key:0,label:"Update Schedule"},{default:a(()=>[l(Ce,{modelValue:r.value.schedule,"onUpdate:modelValue":e[19]||(e[19]=s=>r.value.schedule=s),style:{width:"100%"}},{default:a(()=>[l(z,{label:"Daily at 2:00 AM",value:"0 2 * * *"}),l(z,{label:"Weekly (Sunday at 2:00 AM)",value:"0 2 * * 0"}),l(z,{label:"Monthly (1st at 2:00 AM)",value:"0 2 1 * *"}),l(z,{label:"Custom Cron Expression",value:"custom"})]),_:1},8,["modelValue"])]),_:1})):h("",!0),r.value.schedule==="custom"&&r.value.enabled?(m(),w(b,{key:1,label:"Custom Cron"},{default:a(()=>[l($,{modelValue:r.value.customCron,"onUpdate:modelValue":e[20]||(e[20]=s=>r.value.customCron=s),placeholder:"0 2 * * *"},null,8,["modelValue"])]),_:1})):h("",!0),r.value.enabled?(m(),w(b,{key:2,label:"Auto Restart Containers"},{default:a(()=>[l(ke,{modelValue:r.value.restartContainers,"onUpdate:modelValue":e[21]||(e[21]=s=>r.value.restartContainers=s)},null,8,["modelValue"]),e[55]||(e[55]=o("span",{class:"text-muted ml-2"},"Restart containers after update",-1))]),_:1,__:[55]})):h("",!0),l(nl),r.value.enabled?(m(),w(b,{key:3,label:"Images to Update"},{default:a(()=>[l(ul,{modelValue:r.value.selectedImages,"onUpdate:modelValue":e[22]||(e[22]=s=>r.value.selectedImages=s),data:Fe.value,titles:["Available","Selected"],filterable:"",style:{width:"100%"}},null,8,["modelValue","data"])]),_:1})):h("",!0)]),_:1},8,["model"])])]),_:1},8,["modelValue"]),l(N,{modelValue:H.value,"onUpdate:modelValue":e[27]||(e[27]=s=>H.value=s),title:"Docker Cleanup",width:"500px",class:"clean-dialog"},{footer:a(()=>[l(c,{onClick:e[26]||(e[26]=s=>H.value=!1)},{default:a(()=>e[64]||(e[64]=[u("Cancel")])),_:1,__:[64]}),l(c,{onClick:tl,loading:fe.value},{default:a(()=>e[65]||(e[65]=[u("Preview")])),_:1,__:[65]},8,["loading"]),l(c,{type:"danger",onClick:sl,loading:L.value,disabled:!B.value.length},{default:a(()=>e[66]||(e[66]=[u(" Execute Cleanup ")])),_:1,__:[66]},8,["loading","disabled"])]),default:a(()=>[o("div",et,[l(ze,{title:"Warning",type:"warning",closable:!1,class:"mb-4"},{default:a(()=>e[58]||(e[58]=[o("p",null,"These actions will remove unused Docker resources. Make sure you know what you're doing.",-1)])),_:1,__:[58]}),o("div",lt,[l(il,{modelValue:B.value,"onUpdate:modelValue":e[25]||(e[25]=s=>B.value=s)},{default:a(()=>[l(ue,{label:"dangling"},{default:a(()=>e[59]||(e[59]=[u("Remove dangling images (<none>:<none>)")])),_:1,__:[59]}),l(ue,{label:"unused"},{default:a(()=>e[60]||(e[60]=[u("Remove unused images (not used by containers)")])),_:1,__:[60]}),l(ue,{label:"buildCache"},{default:a(()=>e[61]||(e[61]=[u("Remove build cache")])),_:1,__:[61]}),l(ue,{label:"volumes"},{default:a(()=>e[62]||(e[62]=[u("Remove unused volumes (careful!)")])),_:1,__:[62]})]),_:1},8,["modelValue"])]),Z.value?(m(),U("div",tt,[e[63]||(e[63]=o("h4",null,"Preview:",-1)),o("pre",at,_(Z.value),1)])):h("",!0)])]),_:1},8,["modelValue"]),l(N,{modelValue:le.value,"onUpdate:modelValue":e[30]||(e[30]=s=>le.value=s),title:`Image Details: ${de.value}`,width:"70%",top:"5vh",class:"inspect-dialog"},{footer:a(()=>[l(c,{onClick:e[29]||(e[29]=s=>le.value=!1)},{default:a(()=>e[67]||(e[67]=[u("Close")])),_:1,__:[67]}),l(c,{onClick:Ye,type:"primary"},{default:a(()=>e[68]||(e[68]=[u(" Copy JSON ")])),_:1,__:[68]})]),default:a(()=>[o("div",st,[l(rl,{modelValue:ce.value,"onUpdate:modelValue":e[28]||(e[28]=s=>ce.value=s),class:"inspect-tabs"},{default:a(()=>[l(we,{label:"Inspect Data",name:"inspect"},{default:a(()=>[o("pre",ot,_(re.value),1)]),_:1}),te.value.length>0?(m(),w(we,{key:0,label:"History",name:"history"},{default:a(()=>[o("div",nt,[(m(!0),U(Q,null,X(te.value,(s,I)=>(m(),U("div",{key:I,class:"history-item"},[o("div",ut,[o("span",it,_(s.CreatedBy),1),o("span",rt,_(se(s.Size)),1)]),o("div",dt,_(new Date(s.Created*1e3).toLocaleString()),1)]))),128))])]),_:1})):h("",!0),Ve.value.length>0?(m(),w(we,{key:1,label:"Layers",name:"layers"},{default:a(()=>[o("div",ct,[(m(!0),U(Q,null,X(Ve.value,(s,I)=>(m(),U("div",{key:I,class:"layer-item"},[o("div",mt,[o("span",pt,_(s.slice(0,12)),1),o("span",vt,_(se(Be.value[s]||0)),1)])]))),128))])]),_:1})):h("",!0)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","title"]),l(N,{modelValue:W.value,"onUpdate:modelValue":e[36]||(e[36]=s=>W.value=s),title:`Run Container: ${j.value}`,width:"600px",class:"clean-dialog"},{footer:a(()=>[l(c,{onClick:e[35]||(e[35]=s=>W.value=!1)},{default:a(()=>e[73]||(e[73]=[u("Cancel")])),_:1,__:[73]}),l(c,{type:"primary",onClick:je,loading:_e.value},{default:a(()=>e[74]||(e[74]=[u(" Run Container ")])),_:1,__:[74]},8,["loading"])]),default:a(()=>[l(ne,{model:k.value,"label-width":"120px","label-position":"top"},{default:a(()=>[l(b,{label:"Container Name",required:""},{default:a(()=>[l($,{modelValue:k.value.name,"onUpdate:modelValue":e[31]||(e[31]=s=>k.value.name=s),placeholder:`${j.value?.replace(/[:/]/g,"-")}-container`},null,8,["modelValue","placeholder"])]),_:1}),l(b,{label:"Port Mapping"},{default:a(()=>[o("div",ft,[(m(!0),U(Q,null,X(k.value.ports,(s,I)=>(m(),w(d,{key:I,closable:"",onClose:cl=>He(I),size:"small"},{default:a(()=>[u(_(s),1)]),_:2},1032,["onClose"]))),128))]),l($,{modelValue:J.value,"onUpdate:modelValue":e[32]||(e[32]=s=>J.value=s),placeholder:"8080:80",onKeyup:Ie($e,["enter"])},{append:a(()=>[l(c,{onClick:$e},{default:a(()=>[l(v(f),{icon:"mdi:plus"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(b,{label:"Environment Variables"},{default:a(()=>[o("div",gt,[(m(!0),U(Q,null,X(k.value.environment,(s,I)=>(m(),w(d,{key:I,closable:"",onClose:cl=>We(I),size:"small"},{default:a(()=>[u(_(s),1)]),_:2},1032,["onClose"]))),128))]),l($,{modelValue:Y.value,"onUpdate:modelValue":e[33]||(e[33]=s=>Y.value=s),placeholder:"KEY=value",onKeyup:Ie(xe,["enter"])},{append:a(()=>[l(c,{onClick:xe},{default:a(()=>[l(v(f),{icon:"mdi:plus"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(b,{label:"Auto Restart"},{default:a(()=>[l(Te,{modelValue:k.value.restart,"onUpdate:modelValue":e[34]||(e[34]=s=>k.value.restart=s)},{default:a(()=>[l(F,{label:"no"},{default:a(()=>e[69]||(e[69]=[u("No")])),_:1,__:[69]}),l(F,{label:"always"},{default:a(()=>e[70]||(e[70]=[u("Always")])),_:1,__:[70]}),l(F,{label:"unless-stopped"},{default:a(()=>e[71]||(e[71]=[u("Unless Stopped")])),_:1,__:[71]}),l(F,{label:"on-failure"},{default:a(()=>e[72]||(e[72]=[u("On Failure")])),_:1,__:[72]})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Ct=ml(_t,[["__scopeId","data-v-e67da47a"]]);export{Ct as default};
