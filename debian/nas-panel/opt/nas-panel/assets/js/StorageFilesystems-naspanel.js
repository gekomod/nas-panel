import{_ as bt,u as ht,r as p,v as B,c as P,D as cl,o as wt,H as zt,b as x,d as g,e as d,g as s,w as o,f as a,k as v,I as m,t as i,m as n,n as He,h as b,i as U,F as E,l as N,p as Re,C as ee,E as C,x as Vt}from"./index-naspanel.js";import{u as kt}from"./useTheme-naspanel.js";const Dt={class:"filesystems-dashboard"},Ct={class:"header-content"},xt={class:"header-left"},St={class:"header-icon small"},Ut={class:"header-text"},Lt={class:"subtitle"},Tt={class:"header-stats"},Mt={class:"stat-item small"},Pt={class:"stat-icon"},Ft={class:"stat-info"},At={class:"stat-value"},Rt={class:"stat-item small"},It={class:"stat-icon"},$t={class:"stat-info"},Et={class:"stat-value"},Nt={class:"stat-item small"},Bt={class:"stat-icon"},Gt={class:"stat-info"},qt={class:"stat-value"},Ot={class:"stat-item small"},Zt={class:"stat-icon"},Wt={class:"stat-info"},jt={class:"stat-value"},Ht={class:"stat-item small"},Kt={class:"stat-icon"},Yt={class:"stat-info"},Jt={class:"header-actions compact"},Qt={class:"combined-content"},Xt={class:"quick-actions"},es={class:"right-actions"},ls={class:"list-header modern"},ts={class:"search-section"},ss={class:"sort-section"},as={key:1,class:"loading-state modern"},os={key:2,class:"empty-state modern"},is={class:"empty-illustration"},ns={class:"empty-content"},ds={key:3,class:"filesystems-grid"},us=["onClick"],rs={class:"card-header"},cs={class:"device-info"},vs={class:"device-icon"},ms={class:"device-details"},ps={class:"device-name"},fs={class:"device-path"},ys={class:"card-actions"},_s={class:"card-tags"},gs={key:0,class:"mount-info"},bs={class:"mount-path"},hs={class:"usage-section"},ws={class:"usage-header"},zs={class:"usage-percent"},Vs={class:"usage-details"},ks={class:"used"},Ds={class:"total"},Cs={class:"free"},xs={class:"filesystem-type"},Ss={class:"fs-size"},Us={key:4,class:"pagination modern"},Ls={class:"device-select-option"},Ts={class:"device-name"},Ms={class:"device-meta"},Ps={class:"device-select-option"},Fs={class:"device-name"},As={class:"device-meta"},Rs={class:"device-select-option"},Is={class:"device-name"},$s={class:"device-meta"},Es={class:"device-select-option"},Ns={class:"device-name"},Bs={class:"device-meta"},Gs={key:0,class:"device-info-card"},qs={class:"info-grid"},Os={class:"info-row"},Zs={class:"info-row"},Ws={class:"info-value"},js={class:"info-row"},Hs={class:"info-value"},Ks={key:0,class:"info-row"},Ys={key:1,class:"info-row"},Js={key:2,class:"info-row"},Qs={class:"dialog-footer"},Xs={class:"device-select-option"},ea={class:"device-name"},la={class:"device-meta"},ta={class:"device-select-option"},sa={class:"device-name"},aa={class:"device-meta"},oa={class:"fs-option"},ia={key:0,class:"warning-section"},na={class:"warning-section"},da={class:"dialog-footer"},ua={class:"device-select-option"},ra={class:"device-name"},ca={class:"device-meta"},va={class:"disk-usage-container"},ma={class:"disk-info"},pa={class:"disk-stat"},fa={class:"disk-stat-value"},ya={class:"disk-stat"},_a={class:"disk-stat-value"},ga={class:"disk-stat"},ba={class:"disk-stat-value"},ha={class:"disk-percentage"},wa={class:"partitions-section"},za={class:"partition-list"},Va={class:"partition-header"},ka={class:"partition-number"},Da={class:"partition-controls"},Ca={class:"size-control"},xa={class:"type-control"},Sa={class:"size-info"},Ua={class:"warning-section"},La={class:"dialog-footer"},Ta={class:"device-select-option"},Ma={class:"device-name"},Pa={class:"device-meta"},Fa={class:"selection-info"},Aa={class:"raid-info-section"},Ra={class:"info-card"},Ia={class:"info-card-header"},$a={class:"info-card-content"},Ea={class:"raid-stats"},Na={class:"raid-stat"},Ba={class:"raid-stat-value"},Ga={class:"raid-stat"},qa={class:"raid-stat-value"},Oa={class:"raid-stat"},Za={class:"raid-stat-value"},Wa={class:"warning-section"},ja={class:"dialog-footer"},Ha={class:"device-select-option"},Ka={class:"device-name"},Ya={class:"device-meta"},Ja={class:"device-select-option"},Qa={class:"device-name"},Xa={class:"device-meta"},eo={class:"selection-info"},lo={class:"size-control"},to={class:"size-info"},so={key:0},ao={class:"lvm-info-section"},oo={class:"info-card"},io={class:"info-card-header"},no={class:"info-card-content"},uo={class:"lvm-stats"},ro={class:"lvm-stat"},co={class:"lvm-stat-value"},vo={class:"lvm-stat"},mo={class:"lvm-stat-value"},po={class:"warning-section"},fo={class:"dialog-footer"},yo={class:"fstab-editor-container"},_o={class:"editor-toolbar"},go={class:"editor-info"},bo={class:"line-count"},ho={class:"editor-actions"},wo={class:"tab-content"},zo={class:"tab-header"},Vo={class:"device-path-cell"},ko={key:1},Do={class:"tab-content"},Co={class:"tab-header"},xo={class:"device-path-cell"},So={style:{display:"flex","flex-wrap":"wrap",gap:"4px"}},Uo={class:"tab-content"},Lo={class:"tab-header"},To={class:"device-path-cell"},Mo={key:1},Po={class:"debug-footer"},Fo={class:"debug-actions"},Ao={class:"debug-info"},Ro={class:"debug-timestamp"},Io={key:0,class:"device-details"},$o={class:"details-grid"},Eo={class:"detail-item"},No={class:"detail-value"},Bo={class:"detail-item"},Go={class:"detail-value"},qo={class:"detail-item"},Oo={class:"detail-value"},Zo={class:"detail-item"},Wo={class:"detail-value"},jo={class:"detail-item"},Ho={class:"detail-value"},Ko={class:"detail-item"},Yo={class:"detail-value"},Jo={class:"detail-item"},Qo={class:"detail-value"},Xo={class:"detail-item"},ei={class:"detail-value"},li={class:"detail-item"},ti={class:"detail-value"},si={key:0,class:"fstab-info"},ai={class:"dialog-footer"},oi={name:"StorageFilesystemsWidget",displayName:"Filesystems"},ii=Object.assign(oi,{setup(ni){const{t:di}=ht(),{isDarkMode:Ie,toggleTheme:Ke}=kt(),de=p(new AbortController),ae=B.create({baseURL:`${window.location.protocol}//${window.location.hostname}:1112`,signal:de.value.signal}),Z=p([]),G=p([]),le=p([]),oe=p([]),V=p(!1),R=p(null),De=p("device"),ue=p("asc"),re=p(!1),$e=p(!1),ce=p(!1),Ee=p(!1),ve=p(!1),Ne=p(!1),me=p(!1),Be=p(!1),pe=p(!1),Ge=p(!1),fe=p(!1),W=p(!1),Ce=p(!1),xe=p(!1),Y=p(""),Ye=p([]),w=p({device:"",mountPoint:"",fsType:"auto",options:"defaults,nofail",zfsPoolName:"",lvmVolumeGroup:"",raidStart:!0}),z=p({device:"",fsType:"ext4",label:"",zfsPoolName:"mypool",force:!1}),F=p({device:"",scheme:"gpt",partitions:[{size:100,unit:"%",type:"8300"}]}),_=p({level:"1",devices:[],name:"md0",chunkSize:"128",fsType:"ext4",autoStart:!0}),y=p({physicalVolumes:[],volumeGroup:"vg_data",logicalVolume:"lv_storage",size:100,unit:"%",fsType:"ext4",mountPath:"/mnt/lvm_storage"}),ye=p(1),_e=p(9),q=p("all"),ge=p(""),be=p(""),he=p(""),T=p(null),k=p(null),$=p(0),we=p(0),ze=p(0),j=p({allDevices:[],raidDevices:[],lvmVolumes:[],filteredDevices:[],overlayDevices:[]}),Je=p(["bcachefs","btrfs","ext4","f2fs","jfs","xfs","zfs","ntfs","vfat","exfat"]),vl=P(()=>Ie.value?"mdi:weather-night":"mdi:weather-sunny"),Qe=P({get:()=>Ie.value,set:l=>{l!==Ie.value&&Ke()}}),ml=P(()=>window.innerWidth<768),pl=P(()=>{if(Z.value.length===0)return 0;const l=Z.value.reduce((e,u)=>e+(u.usedPercent||0),0);return Math.round(l/Z.value.length)}),fl=P(()=>Z.value.reduce((l,e)=>l+(e.size||0),0)),yl=P(()=>Z.value.filter(l=>l.inFstab).length),_l=P(()=>Y.value.split(`
`).length),Xe=P(()=>Ze(G.value.filter(l=>l.type==="disk"&&!l.path.includes("loop")&&!ie(l)))),qe=P(()=>G.value.flatMap(l=>(l.children||[]).map(e=>({...e,model:l.model||"Unknown",size:e.size?parseInt(e.size):0}))).filter(l=>!l.path.includes("loop")&&!ie(l)&&!Oe(l))),gl=P(()=>{const l=Z.value.map(f=>f.device),e=G.value.filter(f=>!l.includes(f.path)&&f.type==="disk"&&!ie(f)),u=G.value.flatMap(f=>(f.children||[]).filter(L=>!l.includes(L.path)).map(L=>({...L,model:f.model||"Unknown"}))),r=le.value.filter(f=>!l.includes(f.device)).map(f=>({path:f.device,model:"RAID Array",size:f.size,fstype:f.fstype||"",label:f.name,isRaid:!0})),S=oe.value.filter(f=>!l.includes(f.path)).map(f=>({path:f.path,model:"LVM Volume",size:f.size,fstype:f.fstype||"",label:f.logicalVolume,isLvm:!0}));return Ze([...e,...u,...r,...S])}),bl=P(()=>G.value.filter(l=>(l.type==="disk"||l.path.includes("/dev/md"))&&!l.path.includes("loop")&&!te(l.path)&&!ie(l))),hl=P(()=>G.value.filter(l=>l.type==="disk"&&!l.path.includes("loop")&&!te(l.path)&&!l.path.includes("md")&&!l.model?.includes("RAID")&&!Oe(l))),wl=P(()=>G.value.filter(l=>l.type==="disk"&&!l.path.includes("loop")&&!te(l.path)&&!l.path.includes("md")&&!ie(l))),zl=P(()=>G.value.flatMap(l=>(l.children||[]).filter(e=>e.type==="part"&&!ie(e)&&!Oe(e)).map(e=>({...e,model:l.model||"Unknown"})))),Vl=P(()=>{if(_.value.devices.length===0)return 0;const l=G.value.find(u=>u.path===_.value.devices[0]);if(!l)return 0;const e=l.size*_.value.devices.length;switch(_.value.level){case"0":return e;case"1":return l.size;case"5":return e-l.size;case"6":return e-2*l.size;case"10":return e/2;default:return 0}}),Se=P(()=>y.value.physicalVolumes.reduce((l,e)=>{const u=[...G.value,...qe.value].find(r=>r.path===e);return l+(u?.size||0)},0)),kl=P(()=>y.value.unit==="%"?100:Math.floor(Se.value/(1024*1024*1024))),Ue=P(()=>{switch(_.value.level){case"0":return 2;case"1":return 2;case"5":return 3;case"6":return 4;case"10":return 4;default:return 2}}),Le=P(()=>{const l={0:{title:"RAID 0 - Striping",description:"Data is split across all drives for maximum performance. No redundancy - failure of any drive results in total data loss.",icon:"mdi:speedometer",redundancy:"None"},1:{title:"RAID 1 - Mirroring",description:"Data is duplicated on all drives. Provides redundancy but reduces available capacity.",icon:"mdi:mirror",redundancy:"Full"},5:{title:"RAID 5 - Parity",description:"Data and parity information are distributed across drives. Requires at least 3 drives.",icon:"mdi:shield-check",redundancy:"Single drive"},6:{title:"RAID 6 - Double Parity",description:"Similar to RAID 5 with double parity. Can survive two drive failures. Requires at least 4 drives.",icon:"mdi:shield-check-outline",redundancy:"Two drives"},10:{title:"RAID 10 - Mirror + Stripe",description:"Combines mirroring and striping. Requires an even number of drives (minimum 4).",icon:"mdi:layers",redundancy:"Multiple drives"}};return l[_.value.level]||l[1]}),Te=P(()=>{let l=[...Z.value];if(q.value==="raid"?l=l.filter(e=>Ve(e.device)):q.value==="lvm"?l=l.filter(e=>Pe(e.device)):q.value==="critical"&&(l=l.filter(e=>e.usedPercent>90)),be.value&&(l=l.filter(e=>e.type===be.value)),he.value&&(l=l.filter(e=>e.status===he.value)),ge.value){const e=ge.value.toLowerCase();l=l.filter(u=>u.device.toLowerCase().includes(e)||u.mounted&&u.mounted.toLowerCase().includes(e)||u.type.toLowerCase().includes(e))}return l.sort((e,u)=>{const r=e[De.value],S=u[De.value];return typeof r=="string"?ue.value==="asc"?r.localeCompare(S):S.localeCompare(r):ue.value==="asc"?r-S:S-r}),l}),Dl=P(()=>{const l=(ye.value-1)*_e.value,e=l+_e.value;return Te.value.slice(l,e)}),Cl=P(()=>q.value!=="all"||ge.value||be.value||he.value?"No filesystems match the current filters":"No mounted filesystems detected. Mount a device to get started."),h=(l,e=2)=>{if(!l||l===0)return"0 Bytes";const u=1024,r=["Bytes","KB","MB","GB","TB","PB"],S=Math.floor(Math.log(l)/Math.log(u));return parseFloat((l/Math.pow(u,S)).toFixed(e))+" "+r[S]},xl=(l,e)=>!l||l.length<=e?l:"..."+l.slice(-e+3),Sl=l=>l.split("/").pop(),Me=l=>{let e=`${l.path}`;return l.model&&l.model!=="Unknown"&&(e+=` (${l.model})`),l.fstype&&(e+=` [${l.fstype.toUpperCase()}]`),e},Ul=l=>l.includes("nvme")?"primary":l.includes("md")||Ve(l)?"warning":l.includes("mapper")||Pe(l)?"success":l.includes("zfs")?"info":"",Ve=l=>l.includes("/dev/md")||l.includes("raid")||le.value.some(e=>e.device===l),Pe=l=>l.includes("/dev/mapper")||l.includes("/dev/dm-")||oe.value.some(e=>e.path===l),ie=l=>le.value.some(e=>e.devices?.includes(l.path)),Oe=l=>l.fstype==="LVM2_member"||l.fstype==="LVM",el=l=>({ext4:"success",xfs:"primary",zfs:"warning",btrfs:"info",ntfs:"",vfat:"",exfat:"",lvm2_member:"success",lvm:"success"})[l?.toLowerCase()]||"",ne=l=>l?.includes("nvme")?"mdi:memory":l?.includes("sd")?"mdi:harddisk":l?.includes("md")||Ve(l)?"mdi:raid":l?.includes("mapper")||Pe(l)?"mdi:layers":l?.includes("zfs")?"mdi:database":"mdi:harddisk",ll=l=>({ext4:"mdi:linux",xfs:"mdi:file-tree",ntfs:"mdi:microsoft-windows",fat:"mdi:usb-flash-drive",vfat:"mdi:usb-flash-drive",exfat:"mdi:usb-flash-drive",zfs:"mdi:database",btrfs:"mdi:database",bcachefs:"mdi:database",f2fs:"mdi:flash",jfs:"mdi:file-tree",lvm2_member:"mdi:layers",lvm:"mdi:layers"})[l?.toLowerCase()]||"mdi:file-question",Ll=l=>({ext4:"#67c23a",xfs:"#409eff",zfs:"#e6a23c",btrfs:"#f56c6c",ntfs:"#909399",vfat:"#909399"})[l?.toLowerCase()]||"#909399",Tl=l=>({active:"mdi:check-circle",inactive:"mdi:close-circle",readonly:"mdi:lock",error:"mdi:alert-circle",unknown:"mdi:help-circle"})[l?.toLowerCase()]||"mdi:help-circle",Ml=l=>({active:"success",inactive:"info",readonly:"warning",error:"danger",unknown:""})[l?.toLowerCase()]||"",tl=l=>l>90?"#f56c6c":l>70?"#e6a23c":"#67c23a",te=l=>["/dev/sda","/dev/nvme0n1","/dev/mmcblk0"].some(u=>l.startsWith(u)),Fe=l=>{const e=l.path.toLowerCase(),u=(l.model||"").toLowerCase(),r=(l.mountpoint||"").toLowerCase(),S=(l.fstype||"").toLowerCase();return["overlay","docker","containerd","podman"].some(L=>e.includes(L)||u.includes(L)||r.includes(L)||S.includes(L))},Ze=l=>{const e=["overlay","docker","containerd","podman"];return l.filter(u=>{const r=u.path.toLowerCase(),S=(u.model||"").toLowerCase(),f=(u.mountpoint||"").toLowerCase(),L=(u.fstype||"").toLowerCase();return!e.some(M=>r.includes(M)||S.includes(M)||f.includes(M)||L.includes(M))})},sl=()=>{const l=k.value;if(!l)return"/mnt/new_disk";let e=l.path.split("/").pop();return l.label&&(e=l.label.toLowerCase().replace(/[^a-z0-9]/g,"_")),`/mnt/${e}`},Pl=l=>{const e=l.match(/\/dev\/mapper\/(.+)-(.+)/);return e?e[1]:"unknown"},Fl=l=>`${l.device} ${l.mounted} ${l.type} defaults,nofail 0 0`,Al=()=>{F.value.partitions.push({size:10,unit:"G",type:"8300"})},Rl=l=>{F.value.partitions.splice(l,1)},Il=l=>{if(l.unit==="%"){const e=l.size/100*$.value;return h(e)}else return l.unit==="G"?`${l.size} GB`:`${l.size} MB`},$l=l=>l.unit==="%"?100:l.unit==="G"?Math.floor($.value/(1024*1024*1024)):Math.floor($.value/(1024*1024)),El=(l,e)=>{const u=l.unit;if(l.unit=e,u==="%"&&e!=="%"){const S=l.size/100*$.value;e==="G"?l.size=Math.floor(S/(1024*1024*1024)):l.size=Math.floor(S/(1024*1024))}else if(u!=="%"&&e==="%"){const S=u==="G"?l.size*1024*1024*1024:l.size*1024*1024;l.size=Math.floor(S/$.value*100)}const r=Nl(e);l.size>r&&(l.size=r)},Nl=l=>!$.value||l==="%"?100:Math.floor(l==="G"?$.value/(1024*1024*1024):$.value/(1024*1024)),Bl=l=>{te(l)&&Vt.warning("This appears to be a system disk. Partitioning system disks is not recommended.")},Gl=()=>{},ql=l=>{T.value&&T.value.device===l.device?T.value=null:T.value=l},K=async()=>{try{const l=await B.get("/api/storage/devices");G.value=l.data.data||[];try{const e=await B.get("/api/storage/raid");le.value=e.data.data||[]}catch(e){console.warn("Error fetching RAID devices:",e)}try{const e=await B.get("/api/storage/lvm");oe.value=e.data.data||[]}catch(e){console.warn("Error fetching LVM volumes:",e)}}catch(l){throw console.error("Error fetching devices:",l),l}},H=async()=>{de.value.abort(),de.value=new AbortController,ae.defaults.signal=de.value.signal;try{V.value=!0,R.value=null;const[l,e]=await Promise.all([ae.get("/api/storage/filesystems"),ae.get("/api/storage/fstab-check")]);Array.isArray(l.data?.data)&&(Z.value=l.data.data.map(u=>({...u,inFstab:Ol(u.device,u.mounted),fstabLoading:!1,usedPercent:u.usedPercent||Math.round(u.used/u.size*100)}))),Ye.value=e.data.entries||[]}catch(l){B.isCancel(l)||(l.value="Error loading filesystems",console.error("Error fetching filesystems:",l))}finally{V.value=!1}},Ol=(l,e)=>Ye.value.some(u=>u.device===l||u.mountPoint===e),al=async()=>{try{V.value=!0,await K(),re.value=!0,w.value={device:"",mountPoint:"",fsType:"auto",options:"defaults,nofail",zfsPoolName:"",lvmVolumeGroup:"",raidStart:!0},k.value=null}catch(l){R.value="Error loading devices",console.error("Error loading devices:",l)}finally{V.value=!1}},Zl=async l=>{const e=gl.value.find(u=>u.path===l);e&&(k.value={path:e.path,fsType:e.fstype,size:e.size,label:e.label,isRaid:e.isRaid||e.path.includes("/dev/md"),isLvm:e.isLvm||e.path.includes("/dev/mapper"),isZfs:e.fstype==="zfs"||e.path.includes("zfs")},!k.value.isZfs&&!k.value.isLvm&&(w.value.mountPoint=sl()),k.value.fsType?w.value.fsType=k.value.fsType:k.value.isZfs?w.value.fsType="zfs":k.value.isLvm&&(w.value.fsType="auto"))},Wl=async()=>{try{if($e.value=!0,R.value=null,!w.value.device)throw new Error("Please select a device");if(Ve(w.value.device)&&w.value.raidStart)try{await B.post("/api/storage/raid/start",{device:w.value.device})}catch(u){console.warn("Could not start RAID array:",u)}const l={device:w.value.device,mountPoint:w.value.mountPoint,fsType:w.value.fsType,options:w.value.options,zfsPoolName:w.value.zfsPoolName};(await B.post("/api/storage/mount",l)).data.success&&(C({title:"Success",message:"Device mounted successfully",type:"success"}),re.value=!1,await H())}catch(l){R.value=l.response?.data?.details||l.message,R.value.includes("RAID")||R.value.includes("mdadm")?R.value+=". Try starting the RAID array first using the RAID management tools.":(R.value.includes("LVM")||R.value.includes("mapper"))&&(R.value+=". Try activating the LVM volume first using the LVM management tools."),C({title:"Mount Error",message:R.value,type:"error",duration:5e3})}finally{$e.value=!1}},jl=async()=>{try{V.value=!0,await K(),ce.value=!0,z.value={device:"",fsType:"ext4",label:"",zfsPoolName:"mypool",force:!1}}catch(l){R.value="Error loading devices",console.error("Error loading devices:",l)}finally{V.value=!1}},Hl=async()=>{try{if(Ee.value=!0,!z.value.device)throw new Error("Please select a device");z.value.fsType==="zfs"?await ee.confirm(`ZFS requires using the entire disk. All data on ${z.value.device} will be permanently deleted. Continue?`,"Confirm ZFS Creation",{confirmButtonText:"Create ZFS",cancelButtonText:"Cancel",type:"error",dangerouslyUseHTMLString:!0}):await ee.confirm(`All data on ${z.value.device} will be permanently deleted. Continue?`,"Confirm Format",{confirmButtonText:"Format",cancelButtonText:"Cancel",type:"warning"});const l=await B.post("/api/storage/format",{device:z.value.device,fsType:z.value.fsType,label:z.value.zfsPoolName||z.value.label,force:z.value.force});C.success({title:"Success",message:`Created ${z.value.fsType.toUpperCase()} on ${l.data.deviceUsed||z.value.device}`,duration:5e3}),ce.value=!1,await H()}catch(l){if(l==="cancel")return;const e=l.response?.data?.details||l.message;C.error({title:"Format Error",message:e,duration:0})}finally{Ee.value=!1}},Kl=async()=>{try{V.value=!0,await K(),ve.value=!0,F.value={device:"",scheme:"gpt",partitions:[{size:100,unit:"%",type:"8300"}]}}catch(l){R.value="Error loading devices",console.error("Error loading devices:",l)}finally{V.value=!1}},Yl=async()=>{try{if(Ne.value=!0,te(F.value.device))throw new Error("Cannot partition system disk");await ee.confirm(`You are about to partition ${F.value.device}. All existing data will be lost. Continue?`,"Confirm Partition",{confirmButtonText:"Continue",cancelButtonText:"Cancel",type:"warning"});const l=F.value.partitions.map(u=>({size:u.unit==="%"?`${u.size}%`:`${u.size}${u.unit}`,type:u.type}));(await B.post("/api/storage/partition",{device:F.value.device,scheme:F.value.scheme,partitions:l})).data.success&&(C.success({title:"Success",message:"Partitions created successfully"}),ve.value=!1,await K(),await H())}catch(l){if(l==="cancel")return;const e=l.response?.data?.details||l.message;C.error({title:"Error",message:e})}finally{Ne.value=!1}},Jl=async()=>{try{V.value=!0,await K(),me.value=!0,_.value={level:"1",devices:[],name:"md0",chunkSize:"128",fsType:"ext4",autoStart:!0}}catch(l){R.value="Error loading devices",console.error("Error loading devices:",l)}finally{V.value=!1}},Ql=async()=>{try{if(Be.value=!0,_.value.devices.length<Ue.value)throw new Error(`RAID ${_.value.level} requires at least ${Ue.value} devices`);await ee.confirm(`Creating RAID ${_.value.level} with ${_.value.devices.length} devices. All data will be lost. Continue?`,"Confirm RAID Creation",{confirmButtonText:"Create RAID",cancelButtonText:"Cancel",type:"error",dangerouslyUseHTMLString:!0}),(await B.post("/api/storage/raid/create",{level:_.value.level,devices:_.value.devices,name:_.value.name,chunkSize:_.value.chunkSize,fsType:_.value.fsType,autoStart:_.value.autoStart})).data.success&&(C.success({title:"Success",message:`RAID ${_.value.level} created successfully`,duration:5e3}),me.value=!1,await K(),await H())}catch(l){if(l==="cancel")return;const e=l.response?.data?.details||l.message;C.error({title:"RAID Error",message:e,duration:0})}finally{Be.value=!1}},Xl=async()=>{try{V.value=!0,await K(),pe.value=!0,y.value={physicalVolumes:[],volumeGroup:"vg_data",logicalVolume:"lv_storage",size:100,unit:"%",fsType:"ext4",mountPath:"/mnt/lvm_storage"}}catch(l){R.value="Error loading devices",console.error("Error loading devices:",l)}finally{V.value=!1}},et=async()=>{try{if(Ge.value=!0,y.value.physicalVolumes.length===0)throw new Error("Please select at least one physical volume");await ee.confirm(`Creating LVM volume with ${y.value.physicalVolumes.length} devices. All data will be lost. Continue?`,"Confirm LVM Creation",{confirmButtonText:"Create LVM",cancelButtonText:"Cancel",type:"error",dangerouslyUseHTMLString:!0});const l=y.value.unit==="%"?`${y.value.size}%`:`${y.value.size}G`;(await B.post("/api/storage/lvm/create",{physicalVolumes:y.value.physicalVolumes,volumeGroup:y.value.volumeGroup,logicalVolume:y.value.logicalVolume,size:l,fsType:y.value.fsType,mountPath:y.value.mountPath})).data.success&&(C.success({title:"Success",message:"LVM volume created successfully",duration:5e3}),pe.value=!1,await K(),await H())}catch(l){if(l==="cancel")return;const e=l.response?.data?.details||l.message;C.error({title:"LVM Error",message:e,duration:0})}finally{Ge.value=!1}},lt=l=>{T.value=l,Ce.value=!0},tt=async l=>{try{await ee.confirm(`Repair filesystem on ${l.device}? This may take some time.`,"Confirm Repair",{confirmButtonText:"Repair",cancelButtonText:"Cancel",type:"warning"}),V.value=!0;const e=await B.post("/api/storage/repair-filesystem",{device:l.device,fsType:l.type});e.data.success&&(C.success({title:"Repair Complete",message:e.data.message||"Filesystem repaired successfully"}),await H())}catch(e){e!=="cancel"&&C.error({title:"Repair Error",message:e.response?.data?.details||e.message})}finally{V.value=!1}},st=l=>{C.info(`Editing fstab entry for ${l.device}`),il()},at=async l=>{try{await ee.confirm(`Unmount filesystem at ${l}?`,"Confirm Unmount",{confirmButtonText:"Unmount",cancelButtonText:"Cancel",type:"warning"}),V.value=!0;const e=await B.post("/api/storage/unmount",{mountPoint:l});C.success({title:"Success",message:e.data.isZfs?"ZFS pool unmounted successfully":"Filesystem unmounted successfully"}),await H()}catch(e){if(e==="cancel")return;R.value=e.response?.data?.details||e.message,C.error({title:"Unmount Error",message:R.value})}finally{V.value=!1}},ol=async()=>{try{W.value=!0;const l=await ae.get("/api/storage/fstab-content");Y.value=l.data.content}catch(l){C.error({title:"Error",message:l.response?.data?.details||l.message})}finally{W.value=!1}},ot=async()=>{try{W.value=!0,await ae.post("/api/storage/save-fstab",{content:Y.value}),C.success({title:"Success",message:"Fstab saved successfully"}),fe.value=!1,await H()}catch(l){C.error({title:"Error",message:l.response?.data?.details||l.message})}finally{W.value=!1}},il=async()=>{try{await ee.confirm("You are about to edit the system fstab file. Make sure you know what you are doing.","Warning",{confirmButtonText:"Continue",cancelButtonText:"Cancel",type:"warning"}),fe.value=!0,await ol()}catch(l){l!=="cancel"&&C.error({title:"Error",message:l.message})}},it=()=>{const l=`# /etc/fstab: static file system information.
#
# Use 'blkid' to print the universally unique identifier for a
# device; this may be used with UUID= as a more robust way to name devices
# that works even if disks are added and removed. See fstab(5).
#
# <file system> <mount point>   <type>  <options>       <dump>  <pass>
# /dev/sda1     /               ext4    defaults,noatime 0       1
# UUID=xxxx-xxxx /boot           vfat    defaults        0       2
# /dev/md0      /mnt/raid       ext4    defaults        0       2
# /dev/mapper/vg_data-lv_storage /mnt/lvm ext4 defaults 0       2
`;Y.value+=(Y.value?`

`:"")+l},nt=async()=>{try{W.value=!0;const l=await ae.post("/api/storage/validate-fstab",{content:Y.value});l.data.valid?C.success({title:"Valid",message:"Fstab syntax is valid"}):C.warning({title:"Validation Warning",message:l.data.message||"Fstab may contain errors"})}catch(l){C.error({title:"Error",message:l.response?.data?.details||l.message})}finally{W.value=!1}},dt=async()=>{try{xe.value=!0;const u=((await B.get("/api/storage/debug-devices")).data.data||[]).map(f=>({path:f.path,model:f.model||"Unknown",mountpoint:f.mountpoint||"",fstype:f.fstype||"",size:f.size?parseInt(f.size):0,type:f.type||"disk"})),r=u.filter(f=>Fe(f)),S=Ze(u);j.value={allDevices:u,filteredDevices:S,overlayDevices:r,raidDevices:le.value,lvmVolumes:oe.value}}catch(l){C.error({title:"Debug Error",message:"Failed to fetch debug data"}),console.error("Debug error:",l)}},ut=async()=>{try{const l=JSON.stringify(j.value,null,2);await navigator.clipboard.writeText(l),C.success({title:"Success",message:"Debug data copied to clipboard"})}catch{C.error({title:"Error",message:"Failed to copy data"})}},rt=()=>{try{const l=JSON.stringify(j.value,null,2),e=`data:application/json;charset=utf-8,${encodeURIComponent(l)}`,u=`storage-debug-${new Date().toISOString().slice(0,10)}.json`,r=document.createElement("a");r.setAttribute("href",e),r.setAttribute("download",u),r.click(),C.success({title:"Success",message:"Debug data exported"})}catch{C.error({title:"Error",message:"Failed to export data"})}},ct=l=>{ye.value=l},vt=l=>{_e.value=l,ye.value=1};cl(()=>F.value.device,l=>{if(l){const e=G.value.find(u=>u.path===l);e&&($.value=e.size||0,nl())}else $.value=0,we.value=0,ze.value=0}),cl(()=>F.value.partitions,()=>{nl()},{deep:!0});const nl=()=>{let l=0;F.value.partitions.forEach(e=>{e.unit==="%"?l+=e.size/100*$.value:e.unit==="G"?l+=e.size*1024*1024*1024:l+=e.size*1024*1024}),we.value=Math.min(l,$.value),ze.value=Math.round(we.value/$.value*100)};return wt(()=>{H(),K()}),zt(()=>{de.value.abort()}),(l,e)=>{const u=x("el-switch"),r=x("el-button"),S=x("el-button-group"),f=x("el-card"),L=x("el-input"),c=x("el-option"),M=x("el-select"),se=x("el-alert"),mt=x("el-icon"),Ae=x("el-dropdown-item"),pt=x("el-dropdown-menu"),ft=x("el-dropdown"),A=x("el-tag"),dl=x("el-progress"),yt=x("el-pagination"),J=x("el-option-group"),D=x("el-form-item"),ke=x("el-form"),Q=x("el-dialog"),ul=x("el-radio-button"),_t=x("el-radio-group"),rl=x("el-input-number"),I=x("el-table-column"),We=x("el-table"),je=x("el-tab-pane"),gt=x("el-tabs");return d(),g("div",Dt,[s(f,{class:"dashboard-header compact",shadow:"hover"},{default:o(()=>[a("div",Ct,[a("div",xt,[a("div",St,[s(v(m),{icon:"mdi:file-tree"})]),a("div",Ut,[a("h2",null,i(l.$t("storageFilesystems.title")),1),a("p",Lt,i(l.$t("storageFilesystems.subtitle")||"Manage filesystems and storage devices"),1)])]),a("div",Tt,[a("div",Mt,[a("div",Pt,[s(v(m),{icon:"mdi:harddisk",width:"14"})]),a("div",Ft,[a("div",At,i(Z.value.length),1),e[56]||(e[56]=a("div",{class:"stat-label"},"Filesystems",-1))])]),a("div",Rt,[a("div",It,[s(v(m),{icon:"mdi:chart-pie",width:"14"})]),a("div",$t,[a("div",Et,i(pl.value)+"%",1),e[57]||(e[57]=a("div",{class:"stat-label"},"Used",-1))])]),a("div",Nt,[a("div",Bt,[s(v(m),{icon:"mdi:database",width:"14"})]),a("div",Gt,[a("div",qt,i(h(fl.value)),1),e[58]||(e[58]=a("div",{class:"stat-label"},"Capacity",-1))])]),a("div",Ot,[a("div",Zt,[s(v(m),{icon:"mdi:auto-fix",width:"14"})]),a("div",Wt,[a("div",jt,i(yl.value),1),e[59]||(e[59]=a("div",{class:"stat-label"},"Auto-mount",-1))])]),a("div",Ht,[a("div",Kt,[s(v(m),{icon:vl.value,width:"14"},null,8,["icon"])]),a("div",Yt,[s(u,{modelValue:Qe.value,"onUpdate:modelValue":e[0]||(e[0]=t=>Qe.value=t),onChange:v(Ke),size:"small",style:{"margin-top":"4px"}},null,8,["modelValue","onChange"]),e[60]||(e[60]=a("div",{class:"stat-label"},"Theme",-1))])])]),a("div",Jt,[s(S,null,{default:o(()=>[s(r,{type:q.value==="all"?"primary":"default",onClick:e[1]||(e[1]=t=>q.value="all"),size:"small"},{default:o(()=>e[61]||(e[61]=[n(" All ")])),_:1,__:[61]},8,["type"]),s(r,{type:q.value==="raid"?"primary":"default",onClick:e[2]||(e[2]=t=>q.value="raid"),size:"small"},{default:o(()=>e[62]||(e[62]=[n(" RAID ")])),_:1,__:[62]},8,["type"]),s(r,{type:q.value==="lvm"?"primary":"default",onClick:e[3]||(e[3]=t=>q.value="lvm"),size:"small"},{default:o(()=>e[63]||(e[63]=[n(" LVM ")])),_:1,__:[63]},8,["type"]),s(r,{type:q.value==="critical"?"primary":"default",onClick:e[4]||(e[4]=t=>q.value="critical"),size:"small"},{default:o(()=>e[64]||(e[64]=[n(" Critical ")])),_:1,__:[64]},8,["type"])]),_:1})])])]),_:1}),s(f,{class:"combined-card",shadow:"hover"},{default:o(()=>[a("div",Qt,[a("div",Xt,[s(S,null,{default:o(()=>[s(r,{onClick:al,disabled:V.value,size:"small"},{default:o(()=>[s(v(m),{icon:"streamline-cyber-color:harddisk-4",width:"14"}),e[65]||(e[65]=n(" Mount "))]),_:1,__:[65]},8,["disabled"]),s(r,{onClick:Kl,disabled:V.value,size:"small"},{default:o(()=>[s(v(m),{icon:"mdi:harddisk-plus",width:"14"}),e[66]||(e[66]=n(" Partition "))]),_:1,__:[66]},8,["disabled"]),s(r,{onClick:jl,disabled:V.value,size:"small"},{default:o(()=>[s(v(m),{icon:"icon-park:clear-format",width:"14"}),e[67]||(e[67]=n(" Format "))]),_:1,__:[67]},8,["disabled"]),s(r,{onClick:Jl,disabled:V.value,size:"small"},{default:o(()=>[s(v(m),{icon:"icon-park:solid-state-disk",width:"14"}),e[68]||(e[68]=n(" RAID "))]),_:1,__:[68]},8,["disabled"]),s(r,{onClick:Xl,disabled:V.value,size:"small"},{default:o(()=>[s(v(m),{icon:"mdi:layers",width:"14"}),e[69]||(e[69]=n(" LVM "))]),_:1,__:[69]},8,["disabled"])]),_:1}),a("div",es,[s(r,{onClick:il,disabled:V.value,size:"small",plain:""},{default:o(()=>[s(v(m),{icon:"mdi:file-edit",width:"14"}),e[70]||(e[70]=n(" Edit fstab "))]),_:1,__:[70]},8,["disabled"]),s(r,{onClick:dt,disabled:V.value,size:"small",plain:"",type:"warning"},{default:o(()=>[s(v(m),{icon:"mdi:bug",width:"14"}),e[71]||(e[71]=n(" Debug "))]),_:1,__:[71]},8,["disabled"]),s(r,{onClick:H,loading:V.value,size:"small",plain:""},{default:o(()=>[s(v(m),{icon:"mdi:refresh",width:"14",class:He({spin:V.value})},null,8,["class"]),e[72]||(e[72]=n(" Refresh "))]),_:1,__:[72]},8,["loading"])])])])]),_:1}),s(f,{class:"filesystems-list-card modern-table",shadow:"hover"},{default:o(()=>[a("div",ls,[a("div",ts,[s(L,{modelValue:ge.value,"onUpdate:modelValue":e[5]||(e[5]=t=>ge.value=t),placeholder:"Search filesystems...",clearable:"",size:"small",class:"search-input modern"},{prefix:o(()=>[s(v(m),{icon:"mdi:magnify",width:"14"})]),_:1},8,["modelValue"]),s(M,{modelValue:be.value,"onUpdate:modelValue":e[6]||(e[6]=t=>be.value=t),placeholder:"Filesystem Type",clearable:"",size:"small",class:"filter-select modern"},{default:o(()=>[s(c,{label:"ext4",value:"ext4"}),s(c,{label:"xfs",value:"xfs"}),s(c,{label:"btrfs",value:"btrfs"}),s(c,{label:"zfs",value:"zfs"}),s(c,{label:"ntfs",value:"ntfs"}),s(c,{label:"vfat",value:"vfat"})]),_:1},8,["modelValue"]),s(M,{modelValue:he.value,"onUpdate:modelValue":e[7]||(e[7]=t=>he.value=t),placeholder:"Status",clearable:"",size:"small",class:"filter-select modern"},{default:o(()=>[s(c,{label:"Active",value:"active"}),s(c,{label:"Inactive",value:"inactive"}),s(c,{label:"Read Only",value:"readonly"}),s(c,{label:"Error",value:"error"})]),_:1},8,["modelValue"])]),a("div",ss,[s(M,{modelValue:De.value,"onUpdate:modelValue":e[8]||(e[8]=t=>De.value=t),placeholder:"Sort by",size:"small",class:"sort-select"},{default:o(()=>[s(c,{label:"Name",value:"device"}),s(c,{label:"Usage",value:"usedPercent"}),s(c,{label:"Size",value:"size"}),s(c,{label:"Status",value:"status"})]),_:1},8,["modelValue"]),s(r,{onClick:e[9]||(e[9]=t=>ue.value=ue.value==="asc"?"desc":"asc"),size:"small",text:"",class:"sort-btn"},{default:o(()=>[s(v(m),{icon:ue.value==="asc"?"mdi:sort-ascending":"mdi:sort-descending",width:"16"},null,8,["icon"])]),_:1})])]),R.value?(d(),b(se,{key:0,title:R.value,type:"error","show-icon":"",closable:"",onClose:e[10]||(e[10]=t=>R.value=null),size:"small",class:"modern-alert"},null,8,["title"])):U("",!0),V.value&&Z.value.length===0?(d(),g("div",as,e[73]||(e[73]=[a("div",{class:"spinner-container"},[a("div",{class:"spinner"})],-1),a("span",{class:"loading-text"},"Loading filesystems...",-1)]))):Te.value.length===0&&!V.value?(d(),g("div",os,[a("div",is,[s(v(m),{icon:"mdi:database-outline",width:"64"})]),a("div",ns,[e[75]||(e[75]=a("h4",null,"No Filesystems Found",-1)),a("p",null,i(Cl.value),1),s(r,{type:"primary",size:"small",onClick:al,class:"empty-action-btn"},{default:o(()=>[s(v(m),{icon:"streamline-cyber-color:harddisk-4",width:"14"}),e[74]||(e[74]=n(" Mount First Device "))]),_:1,__:[74]})])])):(d(),g("div",ds,[(d(!0),g(E,null,N(Dl.value,t=>(d(),g("div",{key:t.device,class:He(["filesystem-card",{critical:t.usedPercent>90,warning:t.usedPercent>70&&t.usedPercent<=90,selected:T.value&&T.value.device===t.device}]),onClick:O=>ql(t)},[a("div",rs,[a("div",cs,[a("div",vs,[s(mt,{size:24,color:Ll(t.type)},{default:o(()=>[s(v(m),{icon:ll(t.type)},null,8,["icon"])]),_:2},1032,["color"]),a("div",{class:He(["device-status-indicator",t.status])},null,2)]),a("div",ms,[a("h4",ps,i(Sl(t.device)),1),a("div",fs,i(t.device),1)])]),a("div",ys,[s(ft,{trigger:"click",placement:"bottom-end"},{dropdown:o(()=>[s(pt,null,{default:o(()=>[s(Ae,{onClick:Re(O=>lt(t),["stop"])},{default:o(()=>[s(v(m),{icon:"mdi:information-outline",width:"16"}),e[76]||(e[76]=n(" Details "))]),_:2,__:[76]},1032,["onClick"]),s(Ae,{onClick:Re(O=>at(t.mounted),["stop"]),disabled:t.status!=="active"},{default:o(()=>[s(v(m),{icon:"mdi:eject",width:"16"}),e[77]||(e[77]=n(" Unmount "))]),_:2,__:[77]},1032,["onClick","disabled"]),s(Ae,{onClick:Re(O=>st(t),["stop"])},{default:o(()=>[s(v(m),{icon:"mdi:pencil",width:"16"}),e[78]||(e[78]=n(" Edit fstab "))]),_:2,__:[78]},1032,["onClick"]),s(Ae,{onClick:Re(O=>tt(t),["stop"]),disabled:t.status!=="active"},{default:o(()=>[s(v(m),{icon:"mdi:wrench",width:"16"}),e[79]||(e[79]=n(" Repair "))]),_:2,__:[79]},1032,["onClick","disabled"])]),_:2},1024)]),default:o(()=>[s(r,{size:"small",text:"",circle:"",class:"action-btn"},{default:o(()=>[s(v(m),{icon:"mdi:dots-vertical",width:"16"})]),_:1})]),_:2},1024)])]),a("div",_s,[Ve(t.device)?(d(),b(A,{key:0,size:"mini",type:"warning",effect:"dark"},{default:o(()=>e[80]||(e[80]=[n(" RAID ")])),_:1,__:[80]})):Pe(t.device)?(d(),b(A,{key:1,size:"mini",type:"success",effect:"dark"},{default:o(()=>e[81]||(e[81]=[n(" LVM ")])),_:1,__:[81]})):t.type==="zfs"?(d(),b(A,{key:2,size:"mini",type:"info",effect:"dark"},{default:o(()=>e[82]||(e[82]=[n(" ZFS ")])),_:1,__:[82]})):U("",!0),t.inFstab?(d(),b(A,{key:3,size:"mini",type:"success",effect:"plain"},{default:o(()=>[s(v(m),{icon:"mdi:auto-fix",width:"10"}),e[83]||(e[83]=n(" Auto "))]),_:1,__:[83]})):U("",!0),t.readOnly?(d(),b(A,{key:4,size:"mini",type:"warning",effect:"plain"},{default:o(()=>[s(v(m),{icon:"mdi:lock",width:"10"}),e[84]||(e[84]=n(" RO "))]),_:1,__:[84]})):U("",!0),s(A,{type:Ml(t.status),size:"mini",effect:t.status==="active"?"dark":"plain"},{default:o(()=>[s(v(m),{icon:Tl(t.status),width:"10"},null,8,["icon"]),n(" "+i(t.status),1)]),_:2},1032,["type","effect"])]),t.mounted?(d(),g("div",gs,[s(v(m),{icon:"mdi:folder",width:"12"}),a("span",bs,i(xl(t.mounted,40)),1)])):U("",!0),a("div",hs,[a("div",ws,[e[85]||(e[85]=a("span",{class:"usage-label"},"Storage Usage",-1)),a("span",zs,i(t.usedPercent)+"%",1)]),s(dl,{percentage:t.usedPercent,color:tl(t.usedPercent),"show-text":!1,"stroke-width":8,class:"usage-bar modern"},null,8,["percentage","color"]),a("div",Vs,[a("span",ks,i(h(t.used)),1),e[86]||(e[86]=a("span",{class:"separator"},"/",-1)),a("span",Ds,i(h(t.size)),1),a("span",Cs,"("+i(h(t.size-t.used))+" free)",1)])]),a("div",xs,[s(A,{size:"mini",effect:"plain",class:"fs-type-tag"},{default:o(()=>[n(i(t.type.toUpperCase()),1)]),_:2},1024),a("span",Ss,i(h(t.size)),1)])],10,us))),128))])),!V.value&&Te.value.length>0?(d(),g("div",Us,[s(yt,{"current-page":ye.value,"onUpdate:currentPage":e[11]||(e[11]=t=>ye.value=t),"page-size":_e.value,"onUpdate:pageSize":e[12]||(e[12]=t=>_e.value=t),total:Te.value.length,"page-sizes":[9,18,36,72],layout:"total, sizes, prev, pager, next",size:"small",background:"",onCurrentChange:ct,onSizeChange:vt},null,8,["current-page","page-size","total"])])):U("",!0)]),_:1}),s(Q,{modelValue:re.value,"onUpdate:modelValue":e[20]||(e[20]=t=>re.value=t),title:"Mount Device",width:"600px",class:"storage-dialog"},{footer:o(()=>[a("span",Qs,[s(r,{onClick:e[19]||(e[19]=t=>re.value=!1),size:"small"},{default:o(()=>e[97]||(e[97]=[n(" Cancel ")])),_:1,__:[97]}),s(r,{type:"primary",onClick:Wl,loading:$e.value,disabled:!w.value.device||k.value?.isZfs&&!w.value.zfsPoolName,size:"small"},{default:o(()=>e[98]||(e[98]=[n(" Mount ")])),_:1,__:[98]},8,["loading","disabled"])])]),default:o(()=>[s(ke,{model:w.value,"label-position":"top",size:"small"},{default:o(()=>[s(D,{label:"Device",required:""},{default:o(()=>[s(M,{modelValue:w.value.device,"onUpdate:modelValue":e[13]||(e[13]=t=>w.value.device=t),placeholder:"Select device to mount",onChange:Zl,filterable:"",class:"full-width"},{default:o(()=>[s(J,{label:"Disks"},{default:o(()=>[(d(!0),g(E,null,N(Xe.value,t=>(d(),b(c,{key:t.path,label:Me(t),value:t.path},{default:o(()=>[a("div",Ls,[s(v(m),{icon:ne(t.path),width:"16"},null,8,["icon"]),a("span",Ts,i(t.path),1),a("span",Ms,i(t.model||"Unknown")+" • "+i(h(t.size)),1)])]),_:2},1032,["label","value"]))),128))]),_:1}),s(J,{label:"Partitions"},{default:o(()=>[(d(!0),g(E,null,N(qe.value,t=>(d(),b(c,{key:t.path,label:Me(t),value:t.path},{default:o(()=>[a("div",Ps,[s(v(m),{icon:"mdi:harddisk-partition",width:"16"}),a("span",Fs,i(t.path),1),a("span",As,i(t.fstype||"Unknown")+" • "+i(h(t.size)),1)])]),_:2},1032,["label","value"]))),128))]),_:1}),le.value.length>0?(d(),b(J,{key:0,label:"RAID Arrays"},{default:o(()=>[(d(!0),g(E,null,N(le.value,t=>(d(),b(c,{key:t.path,label:Me(t),value:t.path},{default:o(()=>[a("div",Rs,[s(v(m),{icon:"mdi:raid",width:"16"}),a("span",Is,i(t.path),1),a("span",$s,"RAID • "+i(h(t.size)),1)])]),_:2},1032,["label","value"]))),128))]),_:1})):U("",!0),oe.value.length>0?(d(),b(J,{key:1,label:"LVM Volumes"},{default:o(()=>[(d(!0),g(E,null,N(oe.value,t=>(d(),b(c,{key:t.path,label:Me(t),value:t.path},{default:o(()=>[a("div",Es,[s(v(m),{icon:"mdi:layers",width:"16"}),a("span",Ns,i(t.path),1),a("span",Bs,"LVM • "+i(h(t.size)),1)])]),_:2},1032,["label","value"]))),128))]),_:1})):U("",!0)]),_:1},8,["modelValue"])]),_:1}),k.value?(d(),g("div",Gs,[e[96]||(e[96]=a("h4",null,"Device Information",-1)),a("div",qs,[a("div",Os,[e[87]||(e[87]=a("span",{class:"info-label"},"Filesystem:",-1)),s(A,{size:"small"},{default:o(()=>[n(i(k.value.fsType||"Unknown"),1)]),_:1})]),a("div",Zs,[e[88]||(e[88]=a("span",{class:"info-label"},"Size:",-1)),a("span",Ws,i(h(k.value.size)),1)]),a("div",js,[e[89]||(e[89]=a("span",{class:"info-label"},"Label:",-1)),a("span",Hs,i(k.value.label||"None"),1)]),k.value.isRaid?(d(),g("div",Ks,[e[91]||(e[91]=a("span",{class:"info-label"},"Type:",-1)),s(A,{type:"warning",size:"small"},{default:o(()=>e[90]||(e[90]=[n("RAID Device")])),_:1,__:[90]})])):U("",!0),k.value.isLvm?(d(),g("div",Ys,[e[93]||(e[93]=a("span",{class:"info-label"},"Type:",-1)),s(A,{type:"success",size:"small"},{default:o(()=>e[92]||(e[92]=[n("LVM Volume")])),_:1,__:[92]})])):U("",!0),k.value.isZfs?(d(),g("div",Js,[e[95]||(e[95]=a("span",{class:"info-label"},"Type:",-1)),s(A,{type:"primary",size:"small"},{default:o(()=>e[94]||(e[94]=[n("ZFS Pool")])),_:1,__:[94]})])):U("",!0)])])):U("",!0),!k.value?.isZfs&&!k.value?.isLvm?(d(),b(D,{key:1,label:"Mount Point",required:""},{default:o(()=>[s(L,{modelValue:w.value.mountPoint,"onUpdate:modelValue":e[14]||(e[14]=t=>w.value.mountPoint=t),placeholder:sl()},null,8,["modelValue","placeholder"])]),_:1})):U("",!0),!k.value?.fsType&&!k.value?.isZfs&&!k.value?.isLvm?(d(),b(D,{key:2,label:"Filesystem Type"},{default:o(()=>[s(M,{modelValue:w.value.fsType,"onUpdate:modelValue":e[15]||(e[15]=t=>w.value.fsType=t),class:"full-width"},{default:o(()=>[s(c,{label:"Auto Detect",value:"auto"}),(d(!0),g(E,null,N(Je.value,t=>(d(),b(c,{key:t,label:t.toUpperCase(),value:t.toLowerCase()},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):U("",!0),k.value?.isZfs?(d(),b(D,{key:3,label:"ZFS Pool Name",required:""},{default:o(()=>[s(L,{modelValue:w.value.zfsPoolName,"onUpdate:modelValue":e[16]||(e[16]=t=>w.value.zfsPoolName=t),placeholder:"zpool"},null,8,["modelValue"])]),_:1})):U("",!0),k.value?.isLvm?(d(),b(D,{key:4,label:"LVM Volume Group"},{default:o(()=>[s(L,{modelValue:w.value.lvmVolumeGroup,"onUpdate:modelValue":e[17]||(e[17]=t=>w.value.lvmVolumeGroup=t),placeholder:Pl(k.value.path),disabled:""},null,8,["modelValue","placeholder"])]),_:1})):U("",!0),!k.value?.isZfs&&!k.value?.isLvm?(d(),b(D,{key:5,label:"Options"},{default:o(()=>[s(L,{modelValue:w.value.options,"onUpdate:modelValue":e[18]||(e[18]=t=>w.value.options=t),placeholder:"defaults,nofail"},null,8,["modelValue"])]),_:1})):U("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"]),s(Q,{modelValue:ce.value,"onUpdate:modelValue":e[27]||(e[27]=t=>ce.value=t),title:"Format Device",width:"550px",class:"storage-dialog warning-dialog"},{footer:o(()=>[a("span",da,[s(r,{onClick:e[26]||(e[26]=t=>ce.value=!1),size:"small"},{default:o(()=>e[105]||(e[105]=[n(" Cancel ")])),_:1,__:[105]}),s(r,{type:"danger",onClick:Hl,loading:Ee.value,disabled:!z.value.device||!z.value.fsType,size:"small"},{default:o(()=>e[106]||(e[106]=[n(" Format ")])),_:1,__:[106]},8,["loading","disabled"])])]),default:o(()=>[s(ke,{model:z.value,"label-position":"top",size:"small"},{default:o(()=>[s(D,{label:"Device",required:""},{default:o(()=>[s(M,{modelValue:z.value.device,"onUpdate:modelValue":e[21]||(e[21]=t=>z.value.device=t),placeholder:"Select device to format",filterable:"",class:"full-width"},{default:o(()=>[s(J,{label:"Partitions"},{default:o(()=>[(d(!0),g(E,null,N(qe.value,t=>(d(),b(c,{key:t.path,label:`${t.path} (${t.model||"Unknown"})`,value:t.path},{default:o(()=>[a("div",Xs,[s(v(m),{icon:"mdi:harddisk-partition",width:"16"}),a("span",ea,i(t.path),1),a("span",la,i(t.fstype||"Raw")+" • "+i(h(t.size)),1)])]),_:2},1032,["label","value"]))),128))]),_:1}),s(J,{label:"Disks"},{default:o(()=>[(d(!0),g(E,null,N(Xe.value,t=>(d(),b(c,{key:t.path,label:`${t.path} (${t.model||"Unknown"})`,value:t.path},{default:o(()=>[a("div",ta,[s(v(m),{icon:ne(t.path),width:"16"},null,8,["icon"]),a("span",sa,i(t.path),1),a("span",aa,"Disk • "+i(h(t.size)),1)])]),_:2},1032,["label","value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(D,{label:"Filesystem Type",required:""},{default:o(()=>[s(M,{modelValue:z.value.fsType,"onUpdate:modelValue":e[22]||(e[22]=t=>z.value.fsType=t),class:"full-width"},{default:o(()=>[(d(!0),g(E,null,N(Je.value,t=>(d(),b(c,{key:t,label:t.toUpperCase(),value:t.toLowerCase()},{default:o(()=>[a("div",oa,[s(v(m),{icon:ll(t),width:"16"},null,8,["icon"]),a("span",null,i(t.toUpperCase()),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),z.value.fsType==="zfs"?(d(),g("div",ia,[s(se,{type:"warning",closable:!1,size:"small"},{title:o(()=>e[99]||(e[99]=[a("strong",null,"ZFS requires entire disk!",-1)])),default:o(()=>[e[100]||(e[100]=n(" ZFS will use the entire disk (e.g., /dev/sda instead of /dev/sda1) "))]),_:1,__:[100]})])):U("",!0),z.value.fsType==="zfs"?(d(),b(D,{key:1,label:"ZFS Pool Name",required:""},{default:o(()=>[s(L,{modelValue:z.value.zfsPoolName,"onUpdate:modelValue":e[23]||(e[23]=t=>z.value.zfsPoolName=t),placeholder:"mypool"},null,8,["modelValue"])]),_:1})):(d(),b(D,{key:2,label:"Label"},{default:o(()=>[s(L,{modelValue:z.value.label,"onUpdate:modelValue":e[24]||(e[24]=t=>z.value.label=t),placeholder:`${z.value.fsType.toUpperCase()}_VOLUME`},null,8,["modelValue","placeholder"])]),_:1})),s(D,{label:"Force Format"},{default:o(()=>[s(u,{modelValue:z.value.force,"onUpdate:modelValue":e[25]||(e[25]=t=>z.value.force=t)},null,8,["modelValue"]),e[101]||(e[101]=a("span",{class:"switch-label"},"Force format even if device contains data",-1))]),_:1,__:[101]}),a("div",na,[s(se,{type:"error",closable:!1,size:"small"},{title:o(()=>e[102]||(e[102]=[a("strong",null,"WARNING: DATA LOSS",-1)])),default:o(()=>[e[103]||(e[103]=n(" All data on ")),a("strong",null,i(z.value.device),1),e[104]||(e[104]=n(" will be permanently deleted! "))]),_:1,__:[103,104]})])]),_:1},8,["model"])]),_:1},8,["modelValue"]),s(Q,{modelValue:ve.value,"onUpdate:modelValue":e[31]||(e[31]=t=>ve.value=t),title:"Partition Disk",width:"700px",class:"storage-dialog"},{footer:o(()=>[a("span",La,[s(r,{onClick:e[30]||(e[30]=t=>ve.value=!1),size:"small"},{default:o(()=>e[116]||(e[116]=[n(" Cancel ")])),_:1,__:[116]}),s(r,{type:"primary",onClick:Yl,loading:Ne.value,disabled:F.value.partitions.length===0,size:"small"},{default:o(()=>e[117]||(e[117]=[n(" Create Partitions ")])),_:1,__:[117]},8,["loading","disabled"])])]),default:o(()=>[s(ke,{model:F.value,"label-position":"top",size:"small"},{default:o(()=>[s(D,{label:"Device",required:""},{default:o(()=>[s(M,{modelValue:F.value.device,"onUpdate:modelValue":e[28]||(e[28]=t=>F.value.device=t),class:"full-width",onChange:Bl,filterable:""},{default:o(()=>[(d(!0),g(E,null,N(bl.value,t=>(d(),b(c,{key:t.path,label:`${t.path} (${t.model||"Unknown"})`,value:t.path,disabled:te(t.path)},{default:o(()=>[a("div",ua,[s(v(m),{icon:ne(t.path),width:"16"},null,8,["icon"]),a("span",ra,i(t.path),1),a("span",ca,i(t.model||"Unknown")+" • "+i(h(t.size)),1)])]),_:2},1032,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1}),F.value.device?(d(),b(D,{key:0,label:"Disk Usage"},{default:o(()=>[a("div",va,[a("div",ma,[a("div",pa,[e[107]||(e[107]=a("span",{class:"disk-stat-label"},"Total:",-1)),a("span",fa,i(h($.value)),1)]),a("div",ya,[e[108]||(e[108]=a("span",{class:"disk-stat-label"},"Allocated:",-1)),a("span",_a,i(h(we.value)),1)]),a("div",ga,[e[109]||(e[109]=a("span",{class:"disk-stat-label"},"Free:",-1)),a("span",ba,i(h($.value-we.value)),1)])]),s(dl,{percentage:ze.value,color:tl(ze.value),"show-text":!1,"stroke-width":12,class:"disk-progress"},null,8,["percentage","color"]),a("div",ha,[a("span",null,i(ze.value)+"% allocated",1)])])]),_:1})):U("",!0),s(D,{label:"Partition Scheme"},{default:o(()=>[s(_t,{modelValue:F.value.scheme,"onUpdate:modelValue":e[29]||(e[29]=t=>F.value.scheme=t)},{default:o(()=>[s(ul,{value:"gpt"},{default:o(()=>e[110]||(e[110]=[n("GPT (Modern)")])),_:1,__:[110]}),s(ul,{value:"mbr"},{default:o(()=>e[111]||(e[111]=[n("MBR (Legacy)")])),_:1,__:[111]})]),_:1},8,["modelValue"])]),_:1}),s(D,{label:"Partitions"},{default:o(()=>[a("div",wa,[a("div",za,[(d(!0),g(E,null,N(F.value.partitions,(t,O)=>(d(),g("div",{key:O,class:"partition-item"},[a("div",Va,[a("span",ka,"Partition "+i(O+1),1),F.value.partitions.length>1?(d(),b(r,{key:0,onClick:X=>Rl(O),type:"danger",size:"small",text:"",circle:""},{default:o(()=>[s(v(m),{icon:"mdi:close"})]),_:2},1032,["onClick"])):U("",!0)]),a("div",Da,[a("div",Ca,[s(rl,{modelValue:t.size,"onUpdate:modelValue":X=>t.size=X,min:1,max:$l(t),step:t.unit==="%"?1:t.unit==="G"?10:100,precision:0,size:"small"},null,8,["modelValue","onUpdate:modelValue","max","step"]),s(M,{modelValue:t.unit,"onUpdate:modelValue":X=>t.unit=X,size:"small",onChange:X=>El(t,X),class:"unit-select"},{default:o(()=>[s(c,{label:"MB",value:"M"}),s(c,{label:"GB",value:"G"}),s(c,{label:"%",value:"%"})]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),a("div",xa,[s(M,{modelValue:t.type,"onUpdate:modelValue":X=>t.type=X,size:"small",placeholder:"Select type"},{default:o(()=>[s(c,{label:"Linux Filesystem",value:"8300"}),s(c,{label:"Linux Swap",value:"8200"}),s(c,{label:"EFI System",value:"EF00"}),s(c,{label:"Windows Data",value:"0700"}),s(c,{label:"Linux LVM",value:"8E00"}),s(c,{label:"Linux RAID",value:"FD00"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),a("div",Sa,[a("span",null,i(Il(t)),1)])])]))),128))]),s(r,{onClick:Al,type:"primary",text:"",class:"add-partition-btn",size:"small"},{default:o(()=>[s(v(m),{icon:"mdi:plus"}),e[112]||(e[112]=n(" Add Partition "))]),_:1,__:[112]})])]),_:1}),a("div",Ua,[s(se,{type:"error",closable:!1,size:"small"},{title:o(()=>e[113]||(e[113]=[a("strong",null,"WARNING: DATA LOSS",-1)])),default:o(()=>[e[114]||(e[114]=n(" All data on ")),a("strong",null,i(F.value.device),1),e[115]||(e[115]=n(" will be permanently deleted! "))]),_:1,__:[114,115]})])]),_:1},8,["model"])]),_:1},8,["modelValue"]),s(Q,{modelValue:me.value,"onUpdate:modelValue":e[39]||(e[39]=t=>me.value=t),title:"Create RAID Array",width:"600px",class:"storage-dialog"},{footer:o(()=>[a("span",ja,[s(r,{onClick:e[38]||(e[38]=t=>me.value=!1),size:"small"},{default:o(()=>e[124]||(e[124]=[n(" Cancel ")])),_:1,__:[124]}),s(r,{type:"primary",onClick:Ql,loading:Be.value,disabled:_.value.devices.length<Ue.value,size:"small"},{default:o(()=>e[125]||(e[125]=[n(" Create RAID ")])),_:1,__:[125]},8,["loading","disabled"])])]),default:o(()=>[s(ke,{model:_.value,"label-position":"top",size:"small"},{default:o(()=>[s(D,{label:"RAID Level",required:""},{default:o(()=>[s(M,{modelValue:_.value.level,"onUpdate:modelValue":e[32]||(e[32]=t=>_.value.level=t),class:"full-width",onChange:Gl},{default:o(()=>[s(c,{label:"RAID 0 - Striping (Performance)",value:"0"}),s(c,{label:"RAID 1 - Mirroring (Redundancy)",value:"1"}),s(c,{label:"RAID 5 - Parity (Balance)",value:"5"}),s(c,{label:"RAID 6 - Double Parity (High Redundancy)",value:"6"}),s(c,{label:"RAID 10 - Mirror + Stripe (Best of Both)",value:"10"})]),_:1},8,["modelValue"])]),_:1}),s(D,{label:"Devices",required:""},{default:o(()=>[s(M,{modelValue:_.value.devices,"onUpdate:modelValue":e[33]||(e[33]=t=>_.value.devices=t),multiple:"",class:"full-width",filterable:"","collapse-tags":"","collapse-tags-tooltip":""},{default:o(()=>[(d(!0),g(E,null,N(hl.value,t=>(d(),b(c,{key:t.path,label:`${t.path} (${t.model||"Unknown"})`,value:t.path,disabled:te(t.path)},{default:o(()=>[a("div",Ta,[s(v(m),{icon:ne(t.path),width:"16"},null,8,["icon"]),a("span",Ma,i(t.path),1),a("span",Pa,i(t.model||"Unknown")+" • "+i(h(t.size)),1)])]),_:2},1032,["label","value","disabled"]))),128))]),_:1},8,["modelValue"]),a("div",Fa," Selected: "+i(_.value.devices.length)+" devices (min: "+i(Ue.value)+") ",1)]),_:1}),s(D,{label:"RAID Name",required:""},{default:o(()=>[s(L,{modelValue:_.value.name,"onUpdate:modelValue":e[34]||(e[34]=t=>_.value.name=t),placeholder:"md0"},{prepend:o(()=>e[118]||(e[118]=[n("/dev/md")])),_:1},8,["modelValue"])]),_:1}),["0","5","6","10"].includes(_.value.level)?(d(),b(D,{key:0,label:"Chunk Size"},{default:o(()=>[s(M,{modelValue:_.value.chunkSize,"onUpdate:modelValue":e[35]||(e[35]=t=>_.value.chunkSize=t),class:"full-width"},{default:o(()=>[s(c,{label:"64 KB",value:"64"}),s(c,{label:"128 KB",value:"128"}),s(c,{label:"256 KB",value:"256"}),s(c,{label:"512 KB",value:"512"})]),_:1},8,["modelValue"])]),_:1})):U("",!0),s(D,{label:"Filesystem Type"},{default:o(()=>[s(M,{modelValue:_.value.fsType,"onUpdate:modelValue":e[36]||(e[36]=t=>_.value.fsType=t),class:"full-width"},{default:o(()=>[s(c,{label:"ext4",value:"ext4"}),s(c,{label:"xfs",value:"xfs"}),s(c,{label:"btrfs",value:"btrfs"})]),_:1},8,["modelValue"])]),_:1}),s(D,{label:"Start RAID after creation"},{default:o(()=>[s(u,{modelValue:_.value.autoStart,"onUpdate:modelValue":e[37]||(e[37]=t=>_.value.autoStart=t)},null,8,["modelValue"])]),_:1}),a("div",Aa,[a("div",Ra,[a("div",Ia,[s(v(m),{icon:Le.value.icon,width:"18"},null,8,["icon"]),a("span",null,i(Le.value.title),1)]),a("div",$a,[a("p",null,i(Le.value.description),1),a("div",Ea,[a("div",Na,[e[119]||(e[119]=a("span",{class:"raid-stat-label"},"Capacity:",-1)),a("span",Ba,i(h(Vl.value)),1)]),a("div",Ga,[e[120]||(e[120]=a("span",{class:"raid-stat-label"},"Devices:",-1)),a("span",qa,i(_.value.devices.length),1)]),a("div",Oa,[e[121]||(e[121]=a("span",{class:"raid-stat-label"},"Redundancy:",-1)),a("span",Za,i(Le.value.redundancy),1)])])])])]),a("div",Wa,[s(se,{type:"error",closable:!1,size:"small"},{title:o(()=>e[122]||(e[122]=[a("strong",null,"WARNING: DATA LOSS",-1)])),default:o(()=>[e[123]||(e[123]=n(" All data on selected devices will be permanently deleted! "))]),_:1,__:[123]})])]),_:1},8,["model"])]),_:1},8,["modelValue"]),s(Q,{modelValue:pe.value,"onUpdate:modelValue":e[48]||(e[48]=t=>pe.value=t),title:"Create LVM Volume",width:"600px",class:"storage-dialog"},{footer:o(()=>[a("span",fo,[s(r,{onClick:e[47]||(e[47]=t=>pe.value=!1),size:"small"},{default:o(()=>e[132]||(e[132]=[n(" Cancel ")])),_:1,__:[132]}),s(r,{type:"primary",onClick:et,loading:Ge.value,disabled:y.value.physicalVolumes.length===0||!y.value.volumeGroup||!y.value.logicalVolume,size:"small"},{default:o(()=>e[133]||(e[133]=[n(" Create LVM ")])),_:1,__:[133]},8,["loading","disabled"])])]),default:o(()=>[s(ke,{model:y.value,"label-position":"top",size:"small"},{default:o(()=>[s(D,{label:"Physical Volumes",required:""},{default:o(()=>[s(M,{modelValue:y.value.physicalVolumes,"onUpdate:modelValue":e[40]||(e[40]=t=>y.value.physicalVolumes=t),multiple:"",class:"full-width",filterable:"","collapse-tags":"","collapse-tags-tooltip":""},{default:o(()=>[s(J,{label:"Disks"},{default:o(()=>[(d(!0),g(E,null,N(wl.value,t=>(d(),b(c,{key:t.path,label:`${t.path} (${t.model||"Unknown"})`,value:t.path},{default:o(()=>[a("div",Ha,[s(v(m),{icon:ne(t.path),width:"16"},null,8,["icon"]),a("span",Ka,i(t.path),1),a("span",Ya,i(t.model||"Unknown")+" • "+i(h(t.size)),1)])]),_:2},1032,["label","value"]))),128))]),_:1}),s(J,{label:"Partitions"},{default:o(()=>[(d(!0),g(E,null,N(zl.value,t=>(d(),b(c,{key:t.path,label:`${t.path} (${t.model||"Unknown"})`,value:t.path},{default:o(()=>[a("div",Ja,[s(v(m),{icon:"mdi:harddisk-partition",width:"16"}),a("span",Qa,i(t.path),1),a("span",Xa,i(t.model||"Unknown")+" • "+i(h(t.size)),1)])]),_:2},1032,["label","value"]))),128))]),_:1})]),_:1},8,["modelValue"]),a("div",eo," Selected: "+i(y.value.physicalVolumes.length)+" devices ",1)]),_:1}),s(D,{label:"Volume Group Name",required:""},{default:o(()=>[s(L,{modelValue:y.value.volumeGroup,"onUpdate:modelValue":e[41]||(e[41]=t=>y.value.volumeGroup=t),placeholder:"vg_data"},null,8,["modelValue"])]),_:1}),s(D,{label:"Logical Volume Name",required:""},{default:o(()=>[s(L,{modelValue:y.value.logicalVolume,"onUpdate:modelValue":e[42]||(e[42]=t=>y.value.logicalVolume=t),placeholder:"lv_storage"},null,8,["modelValue"])]),_:1}),s(D,{label:"Logical Volume Size"},{default:o(()=>[a("div",lo,[s(rl,{modelValue:y.value.size,"onUpdate:modelValue":e[43]||(e[43]=t=>y.value.size=t),min:1,max:kl.value,step:y.value.unit==="G"?10:100,precision:0,size:"small",style:{width:"120px"}},null,8,["modelValue","max","step"]),s(M,{modelValue:y.value.unit,"onUpdate:modelValue":e[44]||(e[44]=t=>y.value.unit=t),size:"small",class:"unit-select"},{default:o(()=>[s(c,{label:"GB",value:"G"}),s(c,{label:"%",value:"%"})]),_:1},8,["modelValue"])]),a("div",to,[a("span",null,"Available: "+i(h(Se.value)),1),y.value.unit==="%"?(d(),g("span",so,"("+i(y.value.size)+"% = "+i(h(Se.value*y.value.size/100))+")",1)):U("",!0)])]),_:1}),s(D,{label:"Filesystem Type"},{default:o(()=>[s(M,{modelValue:y.value.fsType,"onUpdate:modelValue":e[45]||(e[45]=t=>y.value.fsType=t),class:"full-width"},{default:o(()=>[s(c,{label:"ext4",value:"ext4"}),s(c,{label:"xfs",value:"xfs"}),s(c,{label:"btrfs",value:"btrfs"})]),_:1},8,["modelValue"])]),_:1}),s(D,{label:"Mount Path (optional)"},{default:o(()=>[s(L,{modelValue:y.value.mountPath,"onUpdate:modelValue":e[46]||(e[46]=t=>y.value.mountPath=t),placeholder:"/mnt/lvm_storage"},null,8,["modelValue"])]),_:1}),a("div",ao,[a("div",oo,[a("div",io,[s(v(m),{icon:"mdi:layers",width:"18"}),e[126]||(e[126]=a("span",null,"LVM Information",-1))]),a("div",no,[e[129]||(e[129]=a("p",null,"LVM (Logical Volume Manager) allows you to combine multiple physical storage devices into a single logical volume.",-1)),a("div",uo,[a("div",ro,[e[127]||(e[127]=a("span",{class:"lvm-stat-label"},"Total Capacity:",-1)),a("span",co,i(h(Se.value)),1)]),a("div",vo,[e[128]||(e[128]=a("span",{class:"lvm-stat-label"},"Selected Devices:",-1)),a("span",mo,i(y.value.physicalVolumes.length),1)])])])])]),a("div",po,[s(se,{type:"error",closable:!1,size:"small"},{title:o(()=>e[130]||(e[130]=[a("strong",null,"WARNING: DATA LOSS",-1)])),default:o(()=>[e[131]||(e[131]=n(" All data on selected devices will be permanently deleted! "))]),_:1,__:[131]})])]),_:1},8,["model"])]),_:1},8,["modelValue"]),s(Q,{modelValue:fe.value,"onUpdate:modelValue":e[51]||(e[51]=t=>fe.value=t),title:"/etc/fstab Editor",width:"800px",class:"storage-dialog code-dialog"},{default:o(()=>[a("div",yo,[s(se,{type:"warning",closable:!1,style:{"margin-bottom":"15px"},size:"small"},{title:o(()=>e[134]||(e[134]=[a("strong",null,"Warning",-1)])),default:o(()=>[e[135]||(e[135]=n(" Incorrect modifications may prevent your system from booting properly. Edit with caution! "))]),_:1,__:[135]}),a("div",_o,[s(S,{size:"small"},{default:o(()=>[s(r,{onClick:ol,loading:W.value},{default:o(()=>[s(v(m),{icon:"mdi:reload"}),e[136]||(e[136]=n(" Reload "))]),_:1,__:[136]},8,["loading"]),s(r,{onClick:it},{default:o(()=>[s(v(m),{icon:"mdi:format-align-left"}),e[137]||(e[137]=n(" Insert Template "))]),_:1,__:[137]}),s(r,{onClick:nt,loading:W.value},{default:o(()=>[s(v(m),{icon:"mdi:check-circle"}),e[138]||(e[138]=n(" Validate "))]),_:1,__:[138]},8,["loading"])]),_:1}),a("div",go,[a("span",bo,i(_l.value)+" lines",1)])]),s(L,{modelValue:Y.value,"onUpdate:modelValue":e[49]||(e[49]=t=>Y.value=t),type:"textarea",rows:20,resize:"none",placeholder:"Loading fstab content...",loading:W.value,class:"code-editor",spellcheck:"false"},null,8,["modelValue","loading"]),a("div",ho,[s(r,{onClick:e[50]||(e[50]=t=>fe.value=!1),size:"small"},{default:o(()=>e[139]||(e[139]=[n(" Cancel ")])),_:1,__:[139]}),s(r,{type:"primary",onClick:ot,loading:W.value,size:"small"},{default:o(()=>[s(v(m),{icon:"mdi:content-save"}),e[140]||(e[140]=n(" Save Changes "))]),_:1,__:[140]},8,["loading"])])])]),_:1},8,["modelValue"]),s(Q,{modelValue:xe.value,"onUpdate:modelValue":e[53]||(e[53]=t=>xe.value=t),title:"Device Debug Information",width:"90%",fullscreen:ml.value,class:"storage-dialog debug-dialog"},{footer:o(()=>[a("div",Po,[a("div",Fo,[s(r,{onClick:e[52]||(e[52]=t=>xe.value=!1),size:"small"},{default:o(()=>e[144]||(e[144]=[n(" Close ")])),_:1,__:[144]}),s(r,{type:"primary",onClick:ut,size:"small"},{default:o(()=>[s(v(m),{icon:"mdi:content-copy"}),e[145]||(e[145]=n(" Copy JSON "))]),_:1,__:[145]}),s(r,{type:"warning",onClick:rt,size:"small"},{default:o(()=>[s(v(m),{icon:"mdi:download"}),e[146]||(e[146]=n(" Export File "))]),_:1,__:[146]})]),a("div",Ao,[a("span",Ro," Generated: "+i(new Date().toLocaleString()),1)])])]),default:o(()=>[s(gt,{type:"border-card"},{default:o(()=>[s(je,{label:"All Devices"},{default:o(()=>[a("div",wo,[a("div",zo,[e[141]||(e[141]=a("h4",null,"All Detected Devices",-1)),s(A,{type:j.value.allDevices.length>0?"success":"info"},{default:o(()=>[n(i(j.value.allDevices.length)+" devices ",1)]),_:1},8,["type"])]),s(We,{data:j.value.allDevices,stripe:"",border:"",height:"400",size:"small",class:"debug-table"},{default:o(()=>[s(I,{prop:"path",label:"Path",width:"150",fixed:""},{default:o(({row:t})=>[a("div",Vo,[s(v(m),{icon:ne(t.path),width:"14"},null,8,["icon"]),a("span",null,i(t.path),1)])]),_:1}),s(I,{prop:"model",label:"Model",width:"120"}),s(I,{prop:"type",label:"Type",width:"80"},{default:o(({row:t})=>[s(A,{size:"small",type:Ul(t.type)},{default:o(()=>[n(i(t.type),1)]),_:2},1032,["type"])]),_:1}),s(I,{prop:"fstype",label:"Filesystem",width:"100"},{default:o(({row:t})=>[t.fstype?(d(),b(A,{key:0,size:"small",type:el(t.fstype),effect:"plain"},{default:o(()=>[n(i(t.fstype),1)]),_:2},1032,["type"])):(d(),g("span",ko,"-"))]),_:1}),s(I,{prop:"mountpoint",label:"Mount Point",width:"200","show-overflow-tooltip":""}),s(I,{prop:"size",label:"Size",width:"100",sortable:""},{default:o(({row:t})=>[n(i(h(t.size)),1)]),_:1}),s(I,{label:"Status",width:"100",fixed:"right"},{default:o(({row:t})=>[s(A,{type:Fe(t)?"danger":"success",size:"small",effect:Fe(t)?"dark":"light"},{default:o(()=>[n(i(Fe(t)?"OVERLAY":"NORMAL"),1)]),_:2},1032,["type","effect"])]),_:1})]),_:1},8,["data"])])]),_:1}),s(je,{label:"RAID Arrays"},{default:o(()=>[a("div",Do,[a("div",Co,[e[142]||(e[142]=a("h4",null,"RAID Arrays",-1)),s(A,{type:"warning"},{default:o(()=>[n(i(j.value.raidDevices.length)+" arrays ",1)]),_:1})]),s(We,{data:j.value.raidDevices,stripe:"",border:"",height:"400",size:"small",class:"debug-table"},{default:o(()=>[s(I,{prop:"device",label:"Device",width:"150"},{default:o(({row:t})=>[a("div",xo,[s(v(m),{icon:"mdi:raid",width:"14"}),a("span",null,i(t.device),1)])]),_:1}),s(I,{prop:"level",label:"RAID Level",width:"100"},{default:o(({row:t})=>[s(A,{type:"warning",size:"small"},{default:o(()=>[n("RAID "+i(t.level),1)]),_:2},1024)]),_:1}),s(I,{prop:"devices",label:"Devices",width:"200"},{default:o(({row:t})=>[a("div",So,[(d(!0),g(E,null,N(t.devices,O=>(d(),b(A,{key:O,size:"mini",type:"info"},{default:o(()=>[n(i(O),1)]),_:2},1024))),128))])]),_:1}),s(I,{prop:"size",label:"Size",width:"100"},{default:o(({row:t})=>[n(i(h(t.size)),1)]),_:1}),s(I,{prop:"state",label:"State",width:"100"},{default:o(({row:t})=>[s(A,{type:t.state==="active"?"success":"danger",size:"small"},{default:o(()=>[n(i(t.state),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])])]),_:1}),s(je,{label:"LVM Volumes"},{default:o(()=>[a("div",Uo,[a("div",Lo,[e[143]||(e[143]=a("h4",null,"LVM Volumes",-1)),s(A,{type:"success"},{default:o(()=>[n(i(j.value.lvmVolumes.length)+" volumes ",1)]),_:1})]),s(We,{data:j.value.lvmVolumes,stripe:"",border:"",height:"400",size:"small",class:"debug-table"},{default:o(()=>[s(I,{prop:"path",label:"Path",width:"150"},{default:o(({row:t})=>[a("div",To,[s(v(m),{icon:"mdi:layers",width:"14"}),a("span",null,i(t.path),1)])]),_:1}),s(I,{prop:"volumeGroup",label:"Volume Group",width:"150"}),s(I,{prop:"logicalVolume",label:"Logical Volume",width:"150"}),s(I,{prop:"size",label:"Size",width:"100"},{default:o(({row:t})=>[n(i(h(t.size)),1)]),_:1}),s(I,{prop:"fstype",label:"Filesystem",width:"100"},{default:o(({row:t})=>[t.fstype?(d(),b(A,{key:0,size:"small",type:el(t.fstype),effect:"plain"},{default:o(()=>[n(i(t.fstype),1)]),_:2},1032,["type"])):(d(),g("span",Mo,"-"))]),_:1})]),_:1},8,["data"])])]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"]),s(Q,{modelValue:Ce.value,"onUpdate:modelValue":e[55]||(e[55]=t=>Ce.value=t),title:`Device Details: ${T.value?.device}`,width:"700px",class:"storage-dialog details-dialog"},{footer:o(()=>[a("span",ai,[s(r,{onClick:e[54]||(e[54]=t=>Ce.value=!1),size:"small"},{default:o(()=>e[157]||(e[157]=[n(" Close ")])),_:1,__:[157]})])]),default:o(()=>[T.value?(d(),g("div",Io,[a("div",$o,[a("div",Eo,[e[147]||(e[147]=a("span",{class:"detail-label"},"Device:",-1)),a("span",No,i(T.value.device),1)]),a("div",Bo,[e[148]||(e[148]=a("span",{class:"detail-label"},"Type:",-1)),a("span",Go,i(T.value.type.toUpperCase()),1)]),a("div",qo,[e[149]||(e[149]=a("span",{class:"detail-label"},"Size:",-1)),a("span",Oo,i(h(T.value.size)),1)]),a("div",Zo,[e[150]||(e[150]=a("span",{class:"detail-label"},"Used:",-1)),a("span",Wo,i(h(T.value.used))+" ("+i(T.value.usedPercent)+"%)",1)]),a("div",jo,[e[151]||(e[151]=a("span",{class:"detail-label"},"Free:",-1)),a("span",Ho,i(h(T.value.size-T.value.used)),1)]),a("div",Ko,[e[152]||(e[152]=a("span",{class:"detail-label"},"Mount Point:",-1)),a("span",Yo,i(T.value.mounted||"Not mounted"),1)]),a("div",Jo,[e[153]||(e[153]=a("span",{class:"detail-label"},"Status:",-1)),a("span",Qo,i(T.value.status),1)]),a("div",Xo,[e[154]||(e[154]=a("span",{class:"detail-label"},"Read Only:",-1)),a("span",ei,i(T.value.readOnly?"Yes":"No"),1)]),a("div",li,[e[155]||(e[155]=a("span",{class:"detail-label"},"Auto-mount:",-1)),a("span",ti,i(T.value.inFstab?"Yes":"No"),1)])]),T.value.inFstab?(d(),g("div",si,[e[156]||(e[156]=a("h4",null,"Fstab Entry",-1)),a("pre",null,i(Fl(T.value)),1)])):U("",!0)])):U("",!0)]),_:1},8,["modelValue","title"])])}}}),ci=bt(ii,[["__scopeId","data-v-fddfe4a2"]]);export{ci as default};
