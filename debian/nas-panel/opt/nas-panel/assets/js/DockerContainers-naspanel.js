import{_ as Oe,r as v,c as se,o as lt,W as st,D as et,b as h,d as C,e as f,f as o,g as t,h as B,w as l,k as c,I as d,t as y,m as p,i as G,F as j,l as K,n as Z,B as Re,ac as jt,x as g,z as Ue,v as ae,A as Gt,p as _e,ad as Kt,a3 as tt,C as Te}from"./index-naspanel.js";import Yt from"./ContainerStats-naspanel.js";const Qt={class:"ssh-terminal-wrapper"},Xt={class:"terminal-header"},Zt={class:"header-left"},el={class:"terminal-title"},tl={class:"header-right"},ll={key:0,class:"prompt"},sl={key:0,class:"connecting-message"},al={key:1,class:"disconnected-message"},ol={key:0,class:"terminal-input"},nl=["disabled"],rl={class:"terminal-footer"},il={class:"footer-left"},ul={class:"footer-info"},cl={class:"footer-right"},Ae=3,dl={__name:"SSHTerminal",props:{containerId:{type:String,required:!0},containerName:{type:String,default:""},socketUrl:{type:String,default:"ws://localhost:1111"}},emits:["close"],setup(ye,{emit:N}){const O=ye,$=v(!1),I=v(!1),U=v([]),k=v(""),D=v(null),z=v(null),E=v(null),_=v(null),x=v(0),oe=se(()=>$.value?"status-connected":I.value?"status-connecting":"status-disconnected"),ee=se(()=>$.value?"mdi:check-circle":I.value?"mdi:loading":"mdi:close-circle"),be=se(()=>$.value?"Connected":I.value?"Connecting...":"Disconnected"),q=()=>{if(!(I.value||$.value)){I.value=!0,x.value++;try{_.value&&(_.value.close(),_.value=null);const i=`${O.socketUrl}`;console.log("Connecting to WebSocket:",i),_.value=new WebSocket(i),_.value.onopen=()=>{console.log("WebSocket connected"),$.value=!0,I.value=!1,x.value=0,S("Connected to container terminal","system"),ce()},_.value.onmessage=r=>{try{const u=JSON.parse(r.data);switch(console.log("WebSocket message received:",u.type),u.type){case"stdout":S(u.data,"stdout");break;case"stderr":S(u.data,"stderr");break;case"connected":S(u.data,"system");break;case"error":S(`Error: ${u.data}`,"error");break;case"closed":S(`Session closed (code: ${u.code})`,"system"),ne();break;case"pong":break;default:console.log("Unknown message type:",u.type)}}catch(u){console.error("Error parsing WebSocket message:",u),S(`Error: ${u.message}`,"error")}},_.value.onerror=r=>{console.error("WebSocket error:",r),S(`WebSocket error: ${r.type}`,"error"),I.value=!1,$.value=!1,x.value<Ae?setTimeout(q,2e3):g.error("Failed to connect to terminal server")},_.value.onclose=r=>{console.log("WebSocket closed:",r.code,r.reason),I.value=!1,$.value=!1,r.code!==1e3&&x.value<Ae?setTimeout(q,2e3):S("Connection closed","system")}}catch(i){console.error("Failed to create WebSocket:",i),I.value=!1,g.error(`WebSocket error: ${i.message}`)}}},ce=()=>{if(!(!$.value||!_.value))try{const i={type:"exec",containerId:O.containerId,command:"/bin/sh"};_.value.send(JSON.stringify(i)),S("Initializing shell...","system"),setTimeout(()=>{de('echo "Terminal ready"')},500)}catch(i){console.error("Failed to initialize terminal:",i),S(`Init error: ${i.message}`,"error")}},de=i=>{if(!$.value||!_.value){g.warning("Not connected to terminal");return}if(i.trim()){S(i,"input");try{const r={type:"stdin",data:i+`
`};_.value.send(JSON.stringify(r)),k.value="",Ue(()=>{D.value&&D.value.focus()})}catch(r){console.error("Failed to send command:",r),S(`Send error: ${r.message}`,"error")}}},S=(i,r="stdout")=>{U.value.push({content:i.trimRight(),type:r,timestamp:new Date().toISOString()}),U.value.length>1e3&&(U.value=U.value.slice(-500)),Ue(()=>{z.value&&(z.value.scrollTop=z.value.scrollHeight)})},me=i=>{i.key==="Enter"?(i.preventDefault(),de(k.value)):(i.key==="Tab"||i.key==="ArrowUp")&&i.preventDefault()},pe=()=>{U.value=[],S("Terminal cleared","system")},ve=()=>{const i=U.value.map(r=>(r.type==="input"?"$ ":"")+r.content).join(`
`);navigator.clipboard.writeText(i).then(()=>g.success("Terminal content copied to clipboard")).catch(()=>g.error("Failed to copy to clipboard"))},fe=()=>{x.value=0,q()},ne=()=>{_.value&&(_.value.close(),_.value=null),$.value=!1,I.value=!1},ge=()=>{Ue(()=>{D.value&&D.value.focus()})};return lt(()=>{console.log("SSHTerminal mounted for container:",O.containerId),q(),setTimeout(ge,500)}),st(()=>{console.log("SSHTerminal unmounting"),ne()}),et(()=>O.containerId,()=>{console.log("Container ID changed:",O.containerId),$.value&&ne(),q()}),et($,i=>{!i&&!I.value&&x.value<Ae&&setTimeout(q,3e3)}),(i,r)=>{const u=h("el-icon"),L=h("el-tag"),P=h("el-button"),W=h("el-tooltip"),te=h("el-button-group");return f(),C("div",Qt,[o("div",Xt,[o("div",Zt,[t(u,{class:"terminal-icon"},{default:l(()=>[t(c(d),{icon:"mdi:console"})]),_:1}),o("span",el," Container: "+y(ye.containerName||ye.containerId.substring(0,12)),1),$.value?(f(),B(L,{key:0,type:"success",size:"small"},{default:l(()=>[t(u,null,{default:l(()=>[t(c(d),{icon:"mdi:check-circle"})]),_:1}),r[2]||(r[2]=p(" Connected "))]),_:1,__:[2]})):(f(),B(L,{key:1,type:"danger",size:"small"},{default:l(()=>[t(u,null,{default:l(()=>[t(c(d),{icon:"mdi:close-circle"})]),_:1}),r[3]||(r[3]=p(" Disconnected "))]),_:1,__:[3]}))]),o("div",tl,[t(te,null,{default:l(()=>[t(W,{content:"Clear terminal",placement:"top"},{default:l(()=>[t(P,{onClick:pe,size:"small",type:"info"},{default:l(()=>[t(u,null,{default:l(()=>[t(c(d),{icon:"mdi:trash-can"})]),_:1}),r[4]||(r[4]=p(" Clear "))]),_:1,__:[4]})]),_:1}),t(W,{content:"Copy all",placement:"top"},{default:l(()=>[t(P,{onClick:ve,size:"small",type:"success"},{default:l(()=>[t(u,null,{default:l(()=>[t(c(d),{icon:"mdi:content-copy"})]),_:1}),r[5]||(r[5]=p(" Copy "))]),_:1,__:[5]})]),_:1}),t(W,{content:"Reconnect",placement:"top"},{default:l(()=>[t(P,{onClick:fe,size:"small",type:"warning",loading:I.value},{default:l(()=>[t(u,null,{default:l(()=>[t(c(d),{icon:"mdi:refresh"})]),_:1}),r[6]||(r[6]=p(" Reconnect "))]),_:1,__:[6]},8,["loading"])]),_:1}),t(W,{content:"Close",placement:"top"},{default:l(()=>[t(P,{onClick:r[0]||(r[0]=F=>i.$emit("close")),size:"small",type:"danger"},{default:l(()=>[t(u,null,{default:l(()=>[t(c(d),{icon:"mdi:close"})]),_:1}),r[7]||(r[7]=p(" Close "))]),_:1,__:[7]})]),_:1})]),_:1})])]),o("div",{class:"terminal-container",ref_key:"terminalContainer",ref:E},[o("div",{class:"terminal-output",ref_key:"terminalOutput",ref:z},[(f(!0),C(j,null,K(U.value,(F,A)=>(f(),C("div",{key:A,class:"terminal-line"},[F.type==="input"?(f(),C("span",ll,"$ ")):G("",!0),o("span",{class:Z(["line-content",F.type])},y(F.content),3)]))),128)),I.value?(f(),C("div",sl,[t(u,{class:"loading-icon"},{default:l(()=>[t(c(d),{icon:"mdi:loading"})]),_:1}),r[8]||(r[8]=p(" Connecting to container... "))])):G("",!0),!$.value&&!I.value?(f(),C("div",al,[t(u,null,{default:l(()=>[t(c(d),{icon:"mdi:alert-circle"})]),_:1}),r[9]||(r[9]=p(" Disconnected from container "))])):G("",!0)],512),$.value?(f(),C("div",ol,[r[10]||(r[10]=o("span",{class:"input-prompt"},"$ ",-1)),Re(o("input",{ref_key:"terminalInput",ref:D,"onUpdate:modelValue":r[1]||(r[1]=F=>k.value=F),onKeydown:me,disabled:!$.value,placeholder:"Type command and press Enter...",class:"terminal-input-field"},null,40,nl),[[jt,k.value]])])):G("",!0)],512),o("div",rl,[o("div",il,[o("span",ul,[t(u,null,{default:l(()=>[t(c(d),{icon:"mdi:information"})]),_:1}),r[11]||(r[11]=p(" Press Enter to execute command "))])]),o("div",cl,[o("span",{class:Z(["connection-status",oe.value])},[t(u,null,{default:l(()=>[t(c(d),{icon:ee.value},null,8,["icon"])]),_:1}),p(" "+y(be.value),1)],2)])])])}}},ml=Oe(dl,[["__scopeId","data-v-66b4c09e"]]),pl={class:"tab-content"},vl={class:"tab-content"},fl={class:"port-list"},gl={class:"tab-content"},_l={class:"volume-list"},yl={class:"tab-content"},bl={class:"env-list"},hl={class:"dialog-footer"},Cl={class:"footer-right"},kl={__name:"FileEditor",props:{containerId:{type:String,required:!0}},emits:["container-updated"],setup(ye,{expose:N,emit:O}){const $=ye,I=O,U=v(!1),k=v({name:"",image:"",command:"",ports:[],volumes:[],env:[]}),D=v({}),z=v([]),E=v([]),_=v(!1),x=v(!1),oe=v(""),ee=async i=>{if(i)try{const r=await ae.get("/services/docker/images/search",{params:{q:i}});z.value=r.data.images||[]}catch(r){console.error("Error searching images:",r)}},be=()=>{k.value.ports.push({host:"",container:"",protocol:"tcp"})},q=i=>{k.value.ports.splice(i,1)},ce=()=>{k.value.volumes.push({host:"",container:"",mode:"rw"})},de=i=>{k.value.volumes.splice(i,1)},S=()=>{k.value.env.push({key:"",value:""})},me=i=>{k.value.env.splice(i,1)},pe=()=>{x.value=!0,E.value=[],k.value.name||E.value.push("Container name is required"),k.value.image||E.value.push("Image is required"),k.value.ports.forEach((i,r)=>{(!i.host||!i.container)&&E.value.push(`Port mapping ${r+1} is incomplete`)}),k.value.volumes.forEach((i,r)=>{(!i.host||!i.container)&&E.value.push(`Volume mapping ${r+1} is incomplete`)}),x.value=!1,E.value.length===0&&g.success("Configuration is valid")},ve=()=>{k.value=JSON.parse(JSON.stringify(D.value)),E.value=[]},fe=()=>{k.value=JSON.parse(JSON.stringify(D.value)),g.info("Configuration reset to original values")},ne=async(i,r)=>{try{oe.value=r;const u=await ae.get(`/services/docker/container/${i}/config`);D.value=u.data.config,k.value=JSON.parse(JSON.stringify(D.value)),U.value=!0,ee(k.value.image.split(":")[0])}catch{g.error("Failed to load container configuration")}},ge=async()=>{_.value=!0;try{const i=await ae.put(`/services/docker/container/${$.containerId}/config`,{config:k.value});g.success(i.data.message||"Container updated successfully"),I("container-updated"),U.value=!1}catch(i){g.error(i.response?.data?.message||"Failed to update container")}finally{_.value=!1}};return N({openEditor:ne}),(i,r)=>{const u=h("el-input"),L=h("el-form-item"),P=h("el-option"),W=h("el-select"),te=h("el-form"),F=h("el-tab-pane"),A=h("el-icon"),R=h("el-button"),he=h("el-tabs"),Y=h("el-button-group"),Q=h("el-dialog");return f(),B(Q,{modelValue:U.value,"onUpdate:modelValue":r[4]||(r[4]=b=>U.value=b),title:`Edit Container: ${oe.value}`,width:"1000px",class:"modern-editor-dialog",onClose:ve},{footer:l(()=>[o("div",hl,[t(Y,null,{default:l(()=>[t(R,{onClick:pe,loading:x.value,size:"large",class:"action-btn"},{default:l(()=>[t(A,null,{default:l(()=>[t(c(d),{icon:"mdi:check-circle"})]),_:1}),r[10]||(r[10]=p(" Validate "))]),_:1,__:[10]},8,["loading"]),t(R,{onClick:fe,size:"large",class:"action-btn"},{default:l(()=>[t(A,null,{default:l(()=>[t(c(d),{icon:"mdi:restore"})]),_:1}),r[11]||(r[11]=p(" Reset "))]),_:1,__:[11]})]),_:1}),o("div",Cl,[t(R,{onClick:r[3]||(r[3]=b=>U.value=!1),size:"large"},{default:l(()=>r[12]||(r[12]=[p(" Cancel ")])),_:1,__:[12]}),t(R,{type:"primary",onClick:ge,disabled:E.value.length>0,loading:_.value,size:"large"},{default:l(()=>[t(A,null,{default:l(()=>[t(c(d),{icon:"mdi:content-save"})]),_:1}),r[13]||(r[13]=p(" Save & Restart "))]),_:1,__:[13]},8,["disabled","loading"])])])]),default:l(()=>[t(he,{type:"card",class:"editor-tabs"},{default:l(()=>[t(F,{label:"Basic Settings"},{default:l(()=>[o("div",pl,[t(te,{model:k.value,"label-position":"top",class:"compact-form"},{default:l(()=>[t(L,{label:"Container Name",prop:"name"},{default:l(()=>[t(u,{modelValue:k.value.name,"onUpdate:modelValue":r[0]||(r[0]=b=>k.value.name=b),size:"large",placeholder:"e.g. my-container"},null,8,["modelValue"])]),_:1}),t(L,{label:"Image",prop:"image"},{default:l(()=>[t(W,{modelValue:k.value.image,"onUpdate:modelValue":r[1]||(r[1]=b=>k.value.image=b),filterable:"",remote:"",size:"large","remote-method":ee,placeholder:"Select or search for image"},{default:l(()=>[(f(!0),C(j,null,K(z.value,b=>(f(),B(P,{key:b,label:b,value:b},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(L,{label:"Command",prop:"command"},{default:l(()=>[t(u,{modelValue:k.value.command,"onUpdate:modelValue":r[2]||(r[2]=b=>k.value.command=b),size:"large",placeholder:"Optional command to run"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1}),t(F,{label:"Network & Ports"},{default:l(()=>[o("div",vl,[t(te,{"label-position":"top"},{default:l(()=>[t(L,{label:"Port Bindings"},{default:l(()=>[o("div",fl,[(f(!0),C(j,null,K(k.value.ports,(b,le)=>(f(),C("div",{key:le,class:"port-item"},[t(u,{modelValue:b.host,"onUpdate:modelValue":V=>b.host=V,placeholder:"Host port",size:"small",class:"port-input"},null,8,["modelValue","onUpdate:modelValue"]),r[5]||(r[5]=o("span",{class:"port-separator"},":",-1)),t(u,{modelValue:b.container,"onUpdate:modelValue":V=>b.container=V,placeholder:"Container port",size:"small",class:"port-input"},null,8,["modelValue","onUpdate:modelValue"]),t(W,{modelValue:b.protocol,"onUpdate:modelValue":V=>b.protocol=V,size:"small",class:"protocol-select"},{default:l(()=>[t(P,{label:"TCP",value:"tcp"}),t(P,{label:"UDP",value:"udp"})]),_:2},1032,["modelValue","onUpdate:modelValue"]),t(R,{type:"danger",circle:"",size:"small",onClick:V=>q(le),class:"remove-btn"},{default:l(()=>[t(A,null,{default:l(()=>[t(c(d),{icon:"mdi:delete"})]),_:1})]),_:2},1032,["onClick"])]))),128)),t(R,{onClick:be,type:"primary",plain:"",size:"small",class:"add-btn"},{default:l(()=>[t(A,null,{default:l(()=>[t(c(d),{icon:"mdi:plus"})]),_:1}),r[6]||(r[6]=p(" Add Port "))]),_:1,__:[6]})])]),_:1})]),_:1})])]),_:1}),t(F,{label:"Volumes"},{default:l(()=>[o("div",gl,[t(te,{"label-position":"top"},{default:l(()=>[t(L,{label:"Volume Bindings"},{default:l(()=>[o("div",_l,[(f(!0),C(j,null,K(k.value.volumes,(b,le)=>(f(),C("div",{key:le,class:"volume-item"},[t(u,{modelValue:b.host,"onUpdate:modelValue":V=>b.host=V,placeholder:"Host path",size:"small",class:"volume-input"},null,8,["modelValue","onUpdate:modelValue"]),r[7]||(r[7]=o("span",{class:"volume-separator"},":",-1)),t(u,{modelValue:b.container,"onUpdate:modelValue":V=>b.container=V,placeholder:"Container path",size:"small",class:"volume-input"},null,8,["modelValue","onUpdate:modelValue"]),t(W,{modelValue:b.mode,"onUpdate:modelValue":V=>b.mode=V,size:"small",class:"mode-select"},{default:l(()=>[t(P,{label:"RW (Read-Write)",value:"rw"}),t(P,{label:"RO (Read-Only)",value:"ro"})]),_:2},1032,["modelValue","onUpdate:modelValue"]),t(R,{type:"danger",circle:"",size:"small",onClick:V=>de(le),class:"remove-btn"},{default:l(()=>[t(A,null,{default:l(()=>[t(c(d),{icon:"mdi:delete"})]),_:1})]),_:2},1032,["onClick"])]))),128)),t(R,{onClick:ce,type:"primary",plain:"",size:"small",class:"add-btn"},{default:l(()=>[t(A,null,{default:l(()=>[t(c(d),{icon:"mdi:plus"})]),_:1}),r[8]||(r[8]=p(" Add Volume "))]),_:1,__:[8]})])]),_:1})]),_:1})])]),_:1}),t(F,{label:"Environment"},{default:l(()=>[o("div",yl,[t(te,{"label-position":"top"},{default:l(()=>[t(L,{label:"Environment Variables"},{default:l(()=>[o("div",bl,[(f(!0),C(j,null,K(k.value.env,(b,le)=>(f(),C("div",{key:le,class:"env-item"},[t(u,{modelValue:b.key,"onUpdate:modelValue":V=>b.key=V,placeholder:"Variable name",size:"small",class:"env-key"},null,8,["modelValue","onUpdate:modelValue"]),t(u,{modelValue:b.value,"onUpdate:modelValue":V=>b.value=V,placeholder:"Value",size:"small",class:"env-value"},null,8,["modelValue","onUpdate:modelValue"]),t(R,{type:"danger",circle:"",size:"small",onClick:V=>me(le),class:"remove-btn"},{default:l(()=>[t(A,null,{default:l(()=>[t(c(d),{icon:"mdi:delete"})]),_:1})]),_:2},1032,["onClick"])]))),128)),t(R,{onClick:S,type:"primary",plain:"",size:"small",class:"add-btn"},{default:l(()=>[t(A,null,{default:l(()=>[t(c(d),{icon:"mdi:plus"})]),_:1}),r[9]||(r[9]=p(" Add Variable "))]),_:1,__:[9]})])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])}}},wl=Oe(kl,[["__scopeId","data-v-010432f4"]]),Sl={class:"docker-containers"},Dl={key:0,class:"error-state"},$l={key:1,class:"loading-state"},Il={class:"loading-content"},Vl={class:"clean-header"},Nl={class:"header-left"},zl={class:"header-right"},Tl={class:"header-actions"},Ul={class:"table-wrapper"},El={key:0,class:"empty-state"},xl={key:1,class:"table-container"},Pl={class:"expanded-row-content"},Ll={class:"container-id"},Fl={class:"name-cell"},Al={class:"name-text"},Rl={class:"image-text"},Ol={class:"uptime-cell"},Ml={class:"uptime-text"},Bl={class:"resource-cell"},ql={class:"resource-row cpu-row"},Wl={class:"resource-value"},Hl={class:"resource-row memory-row"},Jl={class:"resource-value"},jl={class:"ports-container"},Gl={key:0,class:"ports-cell"},Kl={key:1,class:"no-ports"},Yl={class:"actions-container"},Ql={class:"action-buttons-group"},Xl={key:2,class:"table-footer"},Zl={class:"footer-info"},es={class:"footer-text"},ts={key:0,class:"running-count"},ls={class:"footer-actions"},ss={class:"batch-header"},as={class:"batch-content"},os={class:"batch-buttons"},ns={class:"tags-container"},rs={class:"tags-container"},is={class:"debug-section"},us={class:"api-grid"},cs={class:"api-card-header"},ds={class:"api-card-url"},ms={class:"api-card-actions"},ps={class:"debug-section"},vs={class:"containers-grid"},fs={class:"container-debug-header"},gs={class:"container-name"},_s={class:"container-id-small"},ys={class:"container-debug-body"},bs={class:"debug-info-row"},hs={class:"debug-info-row"},Cs={class:"debug-info-row"},ks={key:0,class:"debug-stats"},ws={class:"debug-stat"},Ss={class:"debug-stat"},Ds={class:"debug-section"},$s={class:"stats-debug"},Is={class:"stats-header"},Vs={class:"stats-count"},Ns={class:"stats-json"},zs={class:"network-debug"},Ts={class:"network-logs"},Us={class:"log-time"},Es={class:"log-url"},xs={class:"log-duration"},Ps={class:"debug-footer"},Ls={class:"debug-controls"},Fs={class:"logs-container"},As={class:"logs-toolbar"},Rs={class:"logs-actions"},Os={class:"logs-content"},Ms={class:"logs-header"},Bs={class:"logs-info"},qs={class:"logs-count"},Ws={key:0,class:"logs-updated"},Hs={class:"logs-output-wrapper"},Js={__name:"DockerContainers",setup(ye){const N=v([]),O=v(!1),$=v(!0),I=v(0),U=v(""),k=v(!1),D=v(""),z=v(""),E=v({}),_=v({}),x=v(!1),oe=v(!1),ee=v(!1),be=v(""),q=v(!1),ce=v("api"),de=v(!1),S=v(!1),me=v(!1),pe=v(""),ve=v(!1),fe=v(!1),ne=v(!1),ge=v([]),i=v(null),r=v(null),u=v({name:"",image:"",ports:[],volumes:[]}),L=v(""),P=v(""),W=v([]),te=v([]),F=v([]),A=v([]);let R=null,he=null,Y=null;const Q=se(()=>Array.isArray(N.value)?(U.value?N.value.filter(e=>{const n=U.value.toLowerCase();return e.ID?.toLowerCase().includes(n)||e.Names?.toLowerCase().includes(n)||e.Image?.toLowerCase().includes(n)||e.Status?.toLowerCase().includes(n)}):N.value).map(e=>({...e,ID:e.ID||e.Id||"",Names:e.Names||e.Name||"",Image:e.Image||e.Config?.Image||"",Status:e.Status||e.State||"",Ports:e.Ports||e.PortBindings||"",Config:e.Config||{}})):[]),b=se(()=>N.value.filter(s=>X(s.Status))),le=se(()=>D.value?D.value.split(`
`).length:0);se(()=>{const s=b.value;if(s.length===0)return 0;const e=s.reduce((n,w)=>{const m=_.value[w.ID];return n+(m?.memory||0)},0);return Math.round(e/s.length)}),se(()=>{const s=b.value;if(s.length===0)return 0;const e=s.reduce((n,w)=>{const m=_.value[w.ID];return n+(m?.cpu||0)},0);return Math.round(e/s.length)});const V=se(()=>JSON.stringify({totalStats:Object.keys(_.value).length,stats:Object.entries(_.value).reduce((s,[e,n])=>(s[e.substring(0,12)]={cpu:n.cpu,memory:n.memory,error:n.error,timestamp:new Date(n.timestamp).toLocaleTimeString()},s),{}),apiErrors:A.value.slice(-5),containers:N.value.length,running:b.value.length,timestamp:new Date().toISOString()},null,2)),at=se(()=>`ws://${window.location.hostname}:1111`),ot=s=>{if(!s)return"No image";const e=s.split("/");return e[e.length-1]},X=s=>s?.toLowerCase().includes("up")||!1,Me=s=>{if(!s)return"info";const e=s.toLowerCase();return e.includes("up")?"success":e.includes("exited")?"danger":e.includes("paused")?"warning":"info"},nt=s=>{if(!s)return"";const e=s.toLowerCase();return e.includes("up")?"status-running":e.includes("exited")?"status-stopped":""},rt=s=>{if(!s)return"mdi:help-circle";const e=s.toLowerCase();return e.includes("up")?"mdi:check-circle":e.includes("exited")?"mdi:stop-circle":e.includes("paused")?"mdi:pause-circle":"mdi:help-circle"},Be=s=>s?s.includes("Up")?"Running":s.includes("Exited")?"Stopped":s.includes("Paused")?"Paused":s.split(" ")[0]||s:"Unknown",it=s=>{if(!s)return"-";const e=s.match(/Up\s+(.*)/);return e?e[1]:"-"},qe=s=>!s&&s!==0?"#94a3b8":s<30?"#10B981":s<70?"#F59E0B":"#EF4444",ke=s=>{if(s==null)return 0;const e=parseFloat(s);return isNaN(e)?0:Math.min(Math.max(e,0),100)},we=s=>{if(s==null)return"0.0";const e=parseFloat(s);return isNaN(e)?"0.0":e.toFixed(1)},ut=s=>{switch(s){case"success":return"mdi:check-circle";case"error":return"mdi:alert-circle";case"pending":return"mdi:clock-outline";default:return"mdi:help-circle"}},We=s=>{if(s==null)return"";const e=parseFloat(s);return isNaN(e)?"":e>80?"text-danger":e>60?"text-warning":"text-success"},Se=s=>s?typeof s=="string"?s.split(",").map(e=>e.trim()).filter(e=>e):Array.isArray(s)?s.map(e=>typeof e=="string"?e:e&&e.PublicPort&&e.PrivatePort&&e.Type?`${e.IP||"0.0.0.0"}:${e.PublicPort}->${e.PrivatePort}/${e.Type.toLowerCase()}`:String(e)).filter(e=>e):[]:[],ct=(s,e="")=>(console.error(`Error in ${e}:`,s),me.value=!0,pe.value=`${e}: ${s.message||"Unknown error occurred"}`,e.includes("stats")||g.error(`Error: ${s.message||"Failed to load containers"}`),null),Ee=async(s,e,n={})=>{const w=Date.now(),m={time:new Date().toLocaleTimeString(),method:s,url:e,status:"pending",duration:0};F.value.push(m);try{const M=await ae({method:s,url:e,timeout:8e3,...n});return m.status="success",m.duration=Date.now()-w,m.response=M.data,M}catch(M){throw m.status="error",m.duration=Date.now()-w,m.error=M.message,M}},dt=()=>{F.value=[]},mt=()=>{me.value=!1,pe.value="",$.value=!0,re()},pt=({row:s})=>ge.value.includes(s.ID)?"expanded-row":"",vt=(s,e)=>{ge.value=e.map(n=>n.ID)},ft=()=>{Y&&clearInterval(Y),I.value=0,Y=setInterval(()=>{I.value<90?I.value+=10:clearInterval(Y)},200)},xe=()=>{te.value=[{name:"Get Containers",url:"/services/docker/containers",method:"GET",status:"pending",loading:!1},{name:"Container Stats",url:"/services/docker/stats/container/{ID}",method:"GET",status:"pending",loading:!1},{name:"Docker Info",url:"/services/docker/info",method:"GET",status:"pending",loading:!1}]},He=async s=>{s.loading=!0,s.status="pending";try{let e=s.url;if(e.includes("{ID}")&&N.value.length>0){const w=N.value[0]?.ID;w&&(e=e.replace("{ID}",w))}const n=await Ee("GET",e.replace(baseUrl.value,""));s.response=n.data,s.status="success",g.success(`${s.name} is working`)}catch(e){s.status="error",s.error=e.message,g.error(`${s.name} failed: ${e.message}`)}finally{s.loading=!1}},re=async()=>{if(!O.value)try{O.value=!0,$.value=!0,ft();const s=await Ee("GET","/services/docker/containers",{params:{all:!0}});if(!s.data)throw new Error("No response data received");N.value=Array.isArray(s.data.containers)?s.data.containers:s.data,Array.isArray(N.value)||(N.value=[]),xe(),_t(),I.value=100,setTimeout(()=>{$.value=!1},500),g.success(`Loaded ${N.value.length} containers`)}catch(s){ct(s,"Fetching containers"),A.value.push({type:"containers",time:new Date().toISOString(),error:s.message,status:s.response?.status,data:s.response?.data}),N.value=[],g.error(`Failed to fetch containers: ${s.message}`)}finally{O.value=!1,Y&&(clearInterval(Y),Y=null)}},Pe=async s=>{if(!s)return null;try{const e=`/services/docker/stats/container/${s}`;console.log(`Using endpoint: ${e}`);const n=await Ee("GET",e,{timeout:8e3}),w=n.data?.stats||n.data;if(!w)throw new Error("No stats data received");const m=w.cpu_percent||w.cpuPercent||w.cpu||w.CPUPerc||w.cpuPercentage||w.CPU||0,M=w.memory_percent||w.memoryPercent||w.memory||w.MemPerc||w.memoryPercentage||w.MEM||0;let H=0,ue=0;return typeof m=="string"?H=parseFloat(m.replace("%",""))||0:typeof m=="number"&&(H=m),typeof M=="string"?ue=parseFloat(M.replace("%",""))||0:typeof M=="number"&&(ue=M),_.value={..._.value,[s]:{cpu:H,memory:ue,timestamp:Date.now(),success:!0}},_.value[s]}catch(e){return console.warn(`Error fetching stats for ${s}:`,e.message),A.value.push({type:"stats",containerId:s?s.substring(0,12):"unknown",time:new Date().toISOString(),error:e.message,status:e.response?.status,data:e.response?.data}),_.value={..._.value,[s]:{cpu:0,memory:0,error:!0,timestamp:Date.now(),errorMessage:e.message}},{cpu:0,memory:0,error:!0}}},gt=s=>{console.warn("Stats component error:",s)},Le=async()=>{const s=b.value;if(s.length!==0)for(const e of s.slice(0,10))e.ID&&X(e.Status)&&(await Pe(e.ID),await new Promise(n=>setTimeout(n,50)))},Je=async()=>{try{ve.value=!0,await Le(),g.success("Stats refreshed")}catch(s){console.error("Error refreshing stats:",s),g.error("Failed to refresh stats")}finally{ve.value=!1}},_t=()=>{je(),setTimeout(()=>Le(),1e3),R=setInterval(()=>{N.value.length>0&&Le()},1e4)},je=()=>{R&&(clearInterval(R),R=null)},yt=()=>{oe.value=!0,ce.value="api",xe()},bt=async()=>{try{ne.value=!0,g.info("Running full diagnostic...");for(const s of te.value)await He(s),await new Promise(e=>setTimeout(e,500));g.success("Diagnostic complete")}catch(s){console.error("Diagnostic failed:",s),g.error("Diagnostic failed")}finally{ne.value=!1}},Ge=async(s,e)=>{if(!s){g.error("Container ID is required");return}try{E.value[s]=e,await ae.post(`/services/docker/container/${s}/${e}`,{},{timeout:3e4}),g.success(`Container ${e} successful`),setTimeout(()=>{re()},1500)}catch(n){g.error(`Failed to ${e} container: ${n.message}`),console.error(n)}finally{setTimeout(()=>{E.value[s]=null},1e3)}},Fe=async s=>{try{const e=s==="start"?Q.value.filter(w=>!X(w.Status)):Q.value.filter(w=>X(w.Status));if(e.length===0){g.info(`No containers to ${s}`);return}await Te.confirm(`This will ${s} ${e.length} containers. Continue?`,`Confirm ${s} all`,{confirmButtonText:"Proceed",cancelButtonText:"Cancel",type:"warning"});const n=e.map(w=>ae.post(`/services/docker/container/${w.ID}/${s}`,{},{timeout:1e4}).catch(m=>(console.error(`Failed to ${s} container ${w.ID}:`,m),null)));await Promise.all(n),g.success(`${s}ed ${e.length} containers`),re()}catch(e){e!=="cancel"&&g.error(`Batch ${s} failed: ${e.message}`)}},ht=async s=>{if(!s){g.error("Container ID is required");return}try{E.value[s]="delete",await ae.delete(`/services/docker/container/${s}`,{params:{force:!0},timeout:3e4}),g.success("Container deleted"),await re()}catch(e){throw g.error(`Failed to delete: ${e.response?.data?.message||e.message}`),e}finally{E.value[s]=null}},Ct=s=>{if(!s?.ID){g.error("Invalid container");return}Te.confirm(`Delete container ${s.Names||s.ID.substring(0,12)}?`,"Confirm",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning"}).then(async()=>{await ht(s.ID)}).catch(()=>{})},kt=async s=>{if(!s){g.error("Container ID is required");return}try{z.value=s,await De("tail=100"),k.value=!0}catch(e){g.error(`Failed to get logs: ${e.message}`)}},De=async(s="tail=100")=>{if(!z.value){D.value="No container selected";return}try{const e=await ae.get(`/services/docker/container/logs/${z.value}?${s}`,{timeout:3e4});let n=e.data?.logs||e.data||"No logs available";s.includes("follow=true")&&S.value&&D.value?D.value+=`
`+n:D.value=n,await Ue(),i.value&&(i.value.scrollTop=i.value.scrollHeight)}catch(e){D.value=`Error loading logs: ${e.message}`}},wt=()=>{Ce(),he=setInterval(async()=>{await De("tail=10&follow=true")},2e3)},Ce=()=>{he&&(clearInterval(he),he=null),S.value=!1},St=()=>{S.value=!S.value,S.value?wt():Ce()},Dt=()=>{D.value="",g.info("Logs cleared")},$t=()=>{if(!D.value){g.warning("No logs to copy");return}navigator.clipboard.writeText(D.value).then(()=>g.success("Copied to clipboard")).catch(()=>g.error("Failed to copy"))},It=()=>{if(!D.value){g.warning("No logs to download");return}const s=new Blob([D.value],{type:"text/plain"}),e=URL.createObjectURL(s),n=document.createElement("a");n.href=e,n.download=`container-${z.value?z.value.substring(0,12):"logs"}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(e),g.success("Logs downloaded")},Vt=async s=>{if(!s){W.value=[];return}try{const e=await ae.get("/services/docker/images/search",{params:{q:s},timeout:1e4});W.value=e.data?.images||[]}catch(e){console.error("Error searching images:",e),W.value=[]}},Ke=()=>{L.value&&(u.value.ports.push(L.value),L.value="")},Nt=s=>{u.value.ports.splice(s,1)},Ye=()=>{P.value&&(u.value.volumes.push(P.value),P.value="")},zt=s=>{u.value.volumes.splice(s,1)},Tt=async()=>{if(!u.value.name||!u.value.image){g.error("Name and image are required");return}try{fe.value=!0;const s=await ae.post("/services/docker/container/create",{name:u.value.name,image:u.value.image,ports:u.value.ports,volumes:u.value.volumes},{timeout:3e4});g.success(s.data?.message||"Container created successfully"),x.value=!1,Ut(),await re()}catch(s){g.error(`Failed to create container: ${s.response?.data?.message||s.message}`)}finally{fe.value=!1}},Ut=()=>{u.value={name:"",image:"",ports:[],volumes:[]},L.value="",P.value=""},Et=async(s,e,n)=>{n.target.closest(".quick-actions")||n.target.closest(".el-button")||s.ID&&!_.value[s.ID]&&await Pe(s.ID)},xt=(s,e)=>{z.value=s,r.value.openEditor(s,e)},Pt=(s,e)=>{if(!s){g.error("Container ID is required");return}z.value=s,be.value=e||"Container",ee.value=!0},Qe=()=>{ee.value=!1,Ce()},Lt=async s=>{if(!s){g.error("Container ID is required");return}const e=N.value.find(n=>n.ID===s);if(!e){g.error("Container not found");return}try{const n=await Pe(s);Te.alert(`<div class="stats-test-result">
        <h4>Stats Test: ${e.Names||e.ID.substring(0,12)}</h4>
        <pre>${JSON.stringify(n,null,2)}</pre>
        <p><strong>Status:</strong> ${n.error?"‚ùå Failed":"‚úÖ Success"}</p>
        ${n.error?`<p><strong>Error:</strong> ${n.errorMessage}</p>`:""}
      </div>`,`Stats Test - ${s.substring(0,12)}`,{dangerouslyUseHTMLString:!0,width:"60%"})}catch(n){g.error(`Test failed: ${n.message}`)}},Ft=s=>{if(!s){g.error("Container data is missing");return}const e=_.value[s.ID];let n=`
    <div class="container-debug-popup">
      <h4>${s.Names||"Unnamed"}</h4>
      <p><strong>ID:</strong> ${s.ID?s.ID.substring(0,12):"N/A"}</p>
      <p><strong>Status:</strong> ${s.Status||"N/A"}</p>
      <p><strong>Image:</strong> ${s.Image||"N/A"}</p>
      <p><strong>Running:</strong> ${X(s.Status)?"‚úÖ Yes":"‚ùå No"}</p>
      <p><strong>Stats loaded:</strong> ${e?"‚úÖ Yes":"‚ùå No"}</p>
  `;e&&(n+=`
      <p><strong>CPU Usage:</strong> ${e.cpu||0}%</p>
      <p><strong>Memory Usage:</strong> ${e.memory||0}%</p>
      <p><strong>Last update:</strong> ${new Date(e.timestamp).toLocaleTimeString()}</p>
      <p><strong>Error:</strong> ${e.error?"‚úÖ Yes":"‚ùå No"}</p>
    `),n+="</div>",Te.alert(n,`üîç Debug: ${s.Names||"Container"}`,{dangerouslyUseHTMLString:!0,width:"500px"})};return lt(()=>{re(),xe()}),st(()=>{je(),Ce(),Y&&clearInterval(Y)}),(s,e)=>{const n=h("el-button"),w=h("el-result"),m=h("el-icon"),M=h("el-progress"),H=h("el-tag"),ue=h("el-input"),J=h("el-tooltip"),ie=h("el-table-column"),$e=h("el-button-group"),At=h("el-table"),Xe=h("el-card"),Rt=h("el-collapse-transition"),Ie=h("el-form-item"),Ze=h("el-col"),Ot=h("el-option"),Mt=h("el-select"),Bt=h("el-row"),qt=h("el-form"),Ve=h("el-dialog"),Ne=h("el-tab-pane"),Wt=h("el-tabs"),Ht=h("el-switch"),Jt=Gt("loading");return f(),C("div",Sl,[me.value?(f(),C("div",Dl,[t(w,{icon:"error",title:"Failed to Load Containers","sub-title":pe.value},{extra:l(()=>[t(n,{type:"primary",onClick:mt},{default:l(()=>e[23]||(e[23]=[p("Retry")])),_:1,__:[23]})]),_:1},8,["sub-title"])])):$.value?(f(),C("div",$l,[o("div",Il,[t(m,{class:"loading-icon",size:"64"},{default:l(()=>[t(c(d),{icon:"mdi:docker"})]),_:1}),e[24]||(e[24]=o("h3",null,"Loading Docker Containers...",-1)),e[25]||(e[25]=o("p",null,"Please wait while we fetch your containers",-1)),t(M,{percentage:I.value,"show-text":!1,status:"success"},null,8,["percentage"])])])):(f(),C(j,{key:2},[o("div",Vl,[o("div",Nl,[o("h2",null,[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:docker"})]),_:1}),e[26]||(e[26]=p(" Docker Containers ")),Q.value.length>0?(f(),B(H,{key:0,type:"info",size:"small",class:"ml-2"},{default:l(()=>[p(y(Q.value.length)+" total ",1)]),_:1})):G("",!0)])]),o("div",zl,[t(ue,{modelValue:U.value,"onUpdate:modelValue":e[0]||(e[0]=a=>U.value=a),placeholder:"Search containers...",clearable:"",size:"small",style:{width:"250px"},onClear:re},{prefix:l(()=>[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:magnify"})]),_:1})]),_:1},8,["modelValue"]),o("div",Tl,[t(J,{content:"Refresh",placement:"top"},{default:l(()=>[t(n,{type:"info",onClick:re,size:"small",loading:O.value,class:"action-btn"},{default:l(()=>[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:refresh"})]),_:1})]),_:1},8,["loading"])]),_:1}),t(J,{content:"Create",placement:"top"},{default:l(()=>[t(n,{type:"primary",onClick:e[1]||(e[1]=a=>x.value=!0),size:"small",class:"action-btn"},{default:l(()=>[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:plus"})]),_:1})]),_:1})]),_:1}),t(J,{content:"Debug",placement:"top"},{default:l(()=>[t(n,{type:"warning",onClick:yt,size:"small",class:"action-btn"},{default:l(()=>[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:bug"})]),_:1})]),_:1})]),_:1})])])]),o("div",Ul,[t(Xe,{shadow:"never",class:Z(["clean-table-card",{empty:Q.value.length===0}])},{default:l(()=>[Q.value.length===0&&!O.value?(f(),C("div",El,[t(m,{size:"64",class:"empty-icon"},{default:l(()=>[t(c(d),{icon:"mdi:package-variant"})]),_:1}),e[28]||(e[28]=o("h3",null,"No containers found",-1)),e[29]||(e[29]=o("p",null,"There are no Docker containers running on this system",-1)),t(n,{type:"primary",onClick:e[2]||(e[2]=a=>x.value=!0),size:"small",class:"create-btn"},{default:l(()=>[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:plus"})]),_:1}),e[27]||(e[27]=p(" Create your first container "))]),_:1,__:[27]})])):(f(),C("div",xl,[Re((f(),B(At,{data:Q.value,class:"clean-table",stripe:"",onRowClick:Et,"row-class-name":pt,"expand-row-keys":ge.value,onExpandChange:vt,"row-key":"ID"},{default:l(()=>[t(ie,{type:"expand",width:"40"},{default:l(({row:a})=>[o("div",Pl,[(f(),B(Yt,{"container-id":a.ID,key:a.ID,onError:gt},null,8,["container-id"]))])]),_:1}),t(ie,{prop:"ID",label:"ID",width:"120"},{default:l(({row:a})=>[t(J,{content:a.ID,placement:"top"},{default:l(()=>[o("code",Ll,y(a.ID?a.ID.substring(0,12):"N/A"),1)]),_:2},1032,["content"])]),_:1}),t(ie,{prop:"Names",label:"Name","min-width":"180"},{default:l(({row:a})=>[o("div",Fl,[t(m,{class:"name-icon"},{default:l(()=>[t(c(d),{icon:"mdi:cube-outline"})]),_:1}),o("span",Al,y(a.Names?a.Names.replace(/^\//,""):"unnamed"),1),a.Config?.Labels?.["com.docker.compose.project"]?(f(),B(H,{key:0,size:"mini",effect:"plain",class:"compose-tag"},{default:l(()=>e[30]||(e[30]=[p(" compose ")])),_:1,__:[30]})):G("",!0)])]),_:1}),t(ie,{prop:"Image",label:"Image","min-width":"200"},{default:l(({row:a})=>[t(J,{content:a.Image||"No image",placement:"top"},{default:l(()=>[o("span",Rl,y(ot(a.Image)),1)]),_:2},1032,["content"])]),_:1}),t(ie,{label:"Status",width:"100"},{default:l(({row:a})=>[t(H,{type:Me(a.Status),size:"small",class:Z([nt(a.Status),"status-tag"])},{default:l(()=>[t(m,{size:10,class:"status-icon"},{default:l(()=>[t(c(d),{icon:rt(a.Status)},null,8,["icon"])]),_:2},1024),p(" "+y(Be(a.Status)),1)]),_:2},1032,["type","class"])]),_:1}),t(ie,{label:"Uptime",width:"120"},{default:l(({row:a})=>[o("div",Ol,[t(m,{size:"12",class:"uptime-icon"},{default:l(()=>[t(c(d),{icon:"mdi:clock-outline"})]),_:1}),o("span",Ml,y(it(a.Status)),1)])]),_:1}),t(ie,{label:"Resources",width:"150"},{default:l(({row:a})=>[o("div",Bl,[o("div",ql,[t(m,{size:"12",class:"resource-icon"},{default:l(()=>[t(c(d),{icon:"mdi:cpu-64-bit"})]),_:1}),t(M,{percentage:ke(_.value[a.ID]?.cpu),color:qe(ke(_.value[a.ID]?.cpu)),"show-text":!1,"stroke-width":6,class:"resource-bar"},null,8,["percentage","color"]),o("span",Wl,y(we(_.value[a.ID]?.cpu))+"%",1)]),o("div",Hl,[t(m,{size:"12",class:"resource-icon"},{default:l(()=>[t(c(d),{icon:"mdi:memory"})]),_:1}),t(M,{percentage:ke(_.value[a.ID]?.memory),color:qe(ke(_.value[a.ID]?.memory)),"show-text":!1,"stroke-width":6,class:"resource-bar"},null,8,["percentage","color"]),o("span",Jl,y(we(_.value[a.ID]?.memory))+"%",1)])])]),_:1}),t(ie,{label:"Ports",width:"180"},{default:l(({row:a})=>[o("div",jl,[a.Ports&&Se(a.Ports).length>0?(f(),C("div",Gl,[(f(!0),C(j,null,K(Se(a.Ports).slice(0,2),(T,ze)=>(f(),B(H,{key:ze,size:"small",class:"port-tag"},{default:l(()=>[p(y(T),1)]),_:2},1024))),128)),Se(a.Ports).length>2?(f(),B(H,{key:0,size:"small",type:"info",class:"more-ports"},{default:l(()=>[p(" +"+y(Se(a.Ports).length-2),1)]),_:2},1024)):G("",!0)])):(f(),C("span",Kl,"-"))])]),_:1}),t(ie,{label:"Actions",width:"320",fixed:"right","class-name":"actions-column"},{default:l(({row:a})=>[o("div",Yl,[o("div",Ql,[t($e,{class:"primary-actions"},{default:l(()=>[t(J,{content:"Start/Stop",placement:"top"},{default:l(()=>[t(n,{type:X(a.Status)?"danger":"success",size:"small",circle:"",onClick:_e(T=>Ge(a.ID,X(a.Status)?"stop":"start"),["stop"]),loading:E.value[a.ID]==="start"||E.value[a.ID]==="stop",disabled:!a.ID},{default:l(()=>[t(m,null,{default:l(()=>[t(c(d),{icon:X(a.Status)?"mdi:stop":"mdi:play"},null,8,["icon"])]),_:2},1024)]),_:2},1032,["type","onClick","loading","disabled"])]),_:2},1024),t(J,{content:"Restart",placement:"top"},{default:l(()=>[t(n,{type:"warning",size:"small",circle:"",onClick:_e(T=>Ge(a.ID,"restart"),["stop"]),loading:E.value[a.ID]==="restart",disabled:!a.ID||!X(a.Status)},{default:l(()=>[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:restart"})]),_:1})]),_:2},1032,["onClick","loading","disabled"])]),_:2},1024),t(J,{content:"Logs",placement:"top"},{default:l(()=>[t(n,{type:"info",size:"small",circle:"",onClick:_e(T=>kt(a.ID),["stop"]),disabled:!a.ID},{default:l(()=>[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:file-document-outline"})]),_:1})]),_:2},1032,["onClick","disabled"])]),_:2},1024)]),_:2},1024),t($e,{class:"secondary-actions"},{default:l(()=>[t(J,{content:"Edit Config",placement:"top"},{default:l(()=>[t(n,{type:"primary",size:"small",circle:"",onClick:T=>xt(a.ID,a.Config?.Labels?.["com.docker.compose.project.config_files"]||`${a.Names}.yml`),disabled:!a.ID||!X(a.Status)},{default:l(()=>[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:file-edit"})]),_:1})]),_:2},1032,["onClick","disabled"])]),_:2},1024),t(J,{content:"Terminal",placement:"top"},{default:l(()=>[t(n,{type:"success",size:"small",circle:"",onClick:_e(T=>Pt(a.ID,a.Names),["stop"]),disabled:!a.ID||!X(a.Status)},{default:l(()=>[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:console"})]),_:1})]),_:2},1032,["onClick","disabled"])]),_:2},1024),t(J,{content:"Test Stats",placement:"top"},{default:l(()=>[t(n,{type:"warning",size:"small",circle:"",onClick:_e(T=>Lt(a.ID),["stop"]),disabled:!a.ID},{default:l(()=>[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:chart-line"})]),_:1})]),_:2},1032,["onClick","disabled"])]),_:2},1024)]),_:2},1024),t($e,{class:"tertiary-actions"},{default:l(()=>[t(J,{content:"Debug",placement:"top"},{default:l(()=>[t(n,{type:"info",size:"small",circle:"",onClick:_e(T=>Ft(a),["stop"]),disabled:!a.ID},{default:l(()=>[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:bug-outline"})]),_:1})]),_:2},1032,["onClick","disabled"])]),_:2},1024),t(J,{content:"Delete",placement:"top"},{default:l(()=>[t(n,{type:"danger",size:"small",circle:"",onClick:_e(T=>Ct(a),["stop"]),disabled:!a.ID},{default:l(()=>[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:delete-outline"})]),_:1})]),_:2},1032,["onClick","disabled"])]),_:2},1024)]),_:2},1024)])])]),_:1})]),_:1},8,["data","expand-row-keys"])),[[Jt,O.value]])])),Q.value.length>0?(f(),C("div",Xl,[o("div",Zl,[o("span",es,[p(" Showing "+y(Q.value.length)+" containers ",1),b.value.length>0?(f(),C("span",ts," ("+y(b.value.length)+" running) ",1)):G("",!0)])]),o("div",ls,[t(n,{size:"small",onClick:Je,class:"footer-btn",loading:ve.value},{default:l(()=>[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:refresh"})]),_:1}),e[31]||(e[31]=p(" Refresh Stats "))]),_:1,__:[31]},8,["loading"]),t(n,{size:"small",onClick:e[3]||(e[3]=a=>q.value=!q.value),class:"footer-btn"},{default:l(()=>[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:robot"})]),_:1}),e[32]||(e[32]=p(" Batch Actions "))]),_:1,__:[32]})])])):G("",!0)]),_:1},8,["class"])]),t(Rt,null,{default:l(()=>[Re(t(Xe,{class:"batch-actions-panel",shadow:"never"},{default:l(()=>[o("div",ss,[o("h4",null,[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:robot"})]),_:1}),e[33]||(e[33]=p(" Batch Operations"))])]),o("div",as,[o("div",os,[t(n,{onClick:e[4]||(e[4]=a=>Fe("start")),type:"success",size:"small",class:"batch-btn"},{default:l(()=>e[34]||(e[34]=[p(" Start All Stopped ")])),_:1,__:[34]}),t(n,{onClick:e[5]||(e[5]=a=>Fe("stop")),type:"danger",size:"small",class:"batch-btn"},{default:l(()=>e[35]||(e[35]=[p(" Stop All Running ")])),_:1,__:[35]}),t(n,{onClick:e[6]||(e[6]=a=>Fe("restart")),type:"warning",size:"small",class:"batch-btn"},{default:l(()=>e[36]||(e[36]=[p(" Restart All Running ")])),_:1,__:[36]}),t(n,{onClick:e[7]||(e[7]=a=>q.value=!1),type:"text",size:"small",class:"close-btn"},{default:l(()=>[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:close"})]),_:1})]),_:1})])])]),_:1},512),[[Kt,q.value]])]),_:1})],64)),t(Ve,{modelValue:x.value,"onUpdate:modelValue":e[13]||(e[13]=a=>x.value=a),title:"Create Container",width:"600px",class:"clean-dialog"},{footer:l(()=>[t(n,{onClick:e[12]||(e[12]=a=>x.value=!1)},{default:l(()=>e[37]||(e[37]=[p("Cancel")])),_:1,__:[37]}),t(n,{type:"primary",onClick:Tt,disabled:!u.value.name||!u.value.image,loading:fe.value},{default:l(()=>e[38]||(e[38]=[p(" Create Container ")])),_:1,__:[38]},8,["disabled","loading"])]),default:l(()=>[t(qt,{model:u.value,"label-width":"120px","label-position":"top"},{default:l(()=>[t(Bt,{gutter:20},{default:l(()=>[t(Ze,{span:12},{default:l(()=>[t(Ie,{label:"Container Name",required:""},{default:l(()=>[t(ue,{modelValue:u.value.name,"onUpdate:modelValue":e[8]||(e[8]=a=>u.value.name=a),placeholder:"my-container"},null,8,["modelValue"])]),_:1})]),_:1}),t(Ze,{span:12},{default:l(()=>[t(Ie,{label:"Image",required:""},{default:l(()=>[t(Mt,{modelValue:u.value.image,"onUpdate:modelValue":e[9]||(e[9]=a=>u.value.image=a),filterable:"",remote:"","remote-method":Vt,placeholder:"nginx:latest",style:{width:"100%"}},{default:l(()=>[(f(!0),C(j,null,K(W.value,a=>(f(),B(Ot,{key:a,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(Ie,{label:"Ports"},{default:l(()=>[o("div",ns,[(f(!0),C(j,null,K(u.value.ports,(a,T)=>(f(),B(H,{key:T,closable:"",onClose:ze=>Nt(T),size:"small"},{default:l(()=>[p(y(a),1)]),_:2},1032,["onClose"]))),128))]),t(ue,{modelValue:L.value,"onUpdate:modelValue":e[10]||(e[10]=a=>L.value=a),placeholder:"8080:80",onKeyup:tt(Ke,["enter"])},{append:l(()=>[t(n,{onClick:Ke},{default:l(()=>[t(c(d),{icon:"mdi:plus"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(Ie,{label:"Volumes"},{default:l(()=>[o("div",rs,[(f(!0),C(j,null,K(u.value.volumes,(a,T)=>(f(),B(H,{key:T,closable:"",onClose:ze=>zt(T),size:"small"},{default:l(()=>[p(y(a),1)]),_:2},1032,["onClose"]))),128))]),t(ue,{modelValue:P.value,"onUpdate:modelValue":e[11]||(e[11]=a=>P.value=a),placeholder:"/host/path:/container/path",onKeyup:tt(Ye,["enter"])},{append:l(()=>[t(n,{onClick:Ye},{default:l(()=>[t(c(d),{icon:"mdi:plus"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(wl,{ref_key:"fileEditor",ref:r,"container-id":z.value,onContainerUpdated:re},null,8,["container-id"]),t(Ve,{modelValue:oe.value,"onUpdate:modelValue":e[17]||(e[17]=a=>oe.value=a),title:"üîç Docker Containers Debug Console",width:"90%",top:"5vh",class:"debug-dialog"},{footer:l(()=>[o("div",Ps,[o("div",Ls,[t(Ht,{modelValue:de.value,"onUpdate:modelValue":e[15]||(e[15]=a=>de.value=a),"active-text":"Debug Mode","inactive-text":"Normal Mode"},null,8,["modelValue"]),t(n,{onClick:bt,type:"primary",loading:ne.value},{default:l(()=>[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:play"})]),_:1}),e[50]||(e[50]=p(" Run Full Diagnostic "))]),_:1,__:[50]},8,["loading"])]),t(n,{onClick:e[16]||(e[16]=a=>oe.value=!1)},{default:l(()=>e[51]||(e[51]=[p(" Close ")])),_:1,__:[51]})])]),default:l(()=>[t(Wt,{modelValue:ce.value,"onUpdate:modelValue":e[14]||(e[14]=a=>ce.value=a),class:"debug-tabs"},{default:l(()=>[t(Ne,{label:"API Status",name:"api"},{default:l(()=>[o("div",is,[o("h3",null,[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:api"})]),_:1}),e[39]||(e[39]=p(" API Endpoints Status"))]),o("div",us,[(f(!0),C(j,null,K(te.value,(a,T)=>(f(),C("div",{key:T,class:Z(["api-card",a.status])},[o("div",cs,[t(m,{class:Z(a.status)},{default:l(()=>[t(c(d),{icon:ut(a.status)},null,8,["icon"])]),_:2},1032,["class"]),o("strong",null,y(a.name),1)]),o("div",ds,[o("code",null,y(a.url),1)]),o("div",ms,[t(n,{onClick:ze=>He(a),loading:a.loading,size:"small"},{default:l(()=>e[40]||(e[40]=[p(" Test Now ")])),_:2,__:[40]},1032,["onClick","loading"]),t(H,{type:a.status==="success"?"success":a.status==="error"?"danger":"warning",size:"small"},{default:l(()=>[p(y(a.status.toUpperCase()),1)]),_:2},1032,["type"])])],2))),128))])])]),_:1}),t(Ne,{label:"Containers Data",name:"containers"},{default:l(()=>[o("div",ps,[o("h3",null,[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:docker"})]),_:1}),p(" Containers Loaded: "+y(N.value.length),1)]),o("div",vs,[(f(!0),C(j,null,K(N.value.slice(0,30),a=>(f(),C("div",{key:a.ID,class:"container-debug-card"},[o("div",fs,[o("div",gs,[o("strong",null,y(a.Names||"Unnamed"),1),o("code",_s,y(a.ID?a.ID.substring(0,12):"N/A"),1)]),t(H,{type:Me(a.Status),size:"small"},{default:l(()=>[p(y(Be(a.Status)),1)]),_:2},1032,["type"])]),o("div",ys,[o("div",bs,[e[41]||(e[41]=o("span",null,"Image:",-1)),o("code",null,y(a.Image||"N/A"),1)]),o("div",hs,[e[42]||(e[42]=o("span",null,"Status:",-1)),o("span",null,y(a.Status||"N/A"),1)]),o("div",Cs,[e[43]||(e[43]=o("span",null,"Stats:",-1)),o("span",{class:Z(_.value[a.ID]?"text-success":"text-muted")},y(_.value[a.ID]?"Loaded":"Not loaded"),3)]),_.value[a.ID]?(f(),C("div",ks,[o("div",ws,[e[44]||(e[44]=o("span",null,"CPU:",-1)),o("span",{class:Z(We(_.value[a.ID].cpu))},y(we(_.value[a.ID].cpu))+"%",3)]),o("div",Ss,[e[45]||(e[45]=o("span",null,"MEM:",-1)),o("span",{class:Z(We(_.value[a.ID].memory))},y(we(_.value[a.ID].memory))+"%",3)])])):G("",!0)])]))),128))])])]),_:1}),t(Ne,{label:"Statistics",name:"stats"},{default:l(()=>[o("div",Ds,[o("h3",null,[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:chart-line"})]),_:1}),e[46]||(e[46]=p(" Statistics Data"))]),o("div",$s,[o("div",Is,[t(n,{onClick:Je,size:"small"},{default:l(()=>e[47]||(e[47]=[p(" Refresh All Stats ")])),_:1,__:[47]}),o("span",Vs,y(Object.keys(_.value).length)+" containers with stats",1)]),o("pre",Ns,y(V.value),1)])])]),_:1}),t(Ne,{label:"Network Debug",name:"network"},{default:l(()=>[o("div",zs,[e[49]||(e[49]=o("h3",null,"Network Requests",-1)),t(n,{onClick:dt},{default:l(()=>e[48]||(e[48]=[p("Clear Logs")])),_:1,__:[48]}),o("div",Ts,[(f(!0),C(j,null,K(F.value.slice().reverse(),(a,T)=>(f(),C("div",{class:"network-log",key:T},[o("span",Us,y(a.time),1),o("span",{class:Z(["log-method",a.method])},y(a.method),3),o("span",Es,y(a.url),1),o("span",{class:Z(["log-status",a.status])},y(a.status),3),o("span",xs,y(a.duration)+"ms",1)]))),128))])])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),t(Ve,{modelValue:k.value,"onUpdate:modelValue":e[21]||(e[21]=a=>k.value=a),title:`üìÑ Logs: ${z.value?z.value.substring(0,12):"Container"}`,width:"80%",top:"5vh",class:"logs-dialog",onClosed:Ce},{footer:l(()=>[t(n,{onClick:e[20]||(e[20]=a=>k.value=!1)},{default:l(()=>e[57]||(e[57]=[p("Close")])),_:1,__:[57]})]),default:l(()=>[o("div",Fs,[o("div",As,[t($e,null,{default:l(()=>[t(n,{onClick:e[18]||(e[18]=a=>De("tail=100")),size:"small"},{default:l(()=>e[52]||(e[52]=[p(" Last 100 lines ")])),_:1,__:[52]}),t(n,{onClick:e[19]||(e[19]=a=>De("tail=500")),size:"small"},{default:l(()=>e[53]||(e[53]=[p(" Last 500 lines ")])),_:1,__:[53]}),t(n,{onClick:St,size:"small",type:S.value?"primary":""},{default:l(()=>[t(m,null,{default:l(()=>[t(c(d),{icon:S.value?"mdi:pause":"mdi:play"},null,8,["icon"])]),_:1}),p(" "+y(S.value?"Following":"Follow"),1)]),_:1},8,["type"]),t(n,{onClick:Dt,size:"small"},{default:l(()=>[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:trash-can"})]),_:1}),e[54]||(e[54]=p(" Clear "))]),_:1,__:[54]})]),_:1}),o("div",Rs,[t(n,{onClick:$t,size:"small"},{default:l(()=>[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:content-copy"})]),_:1}),e[55]||(e[55]=p(" Copy "))]),_:1,__:[55]}),t(n,{onClick:It,size:"small"},{default:l(()=>[t(m,null,{default:l(()=>[t(c(d),{icon:"mdi:download"})]),_:1}),e[56]||(e[56]=p(" Download "))]),_:1,__:[56]})])]),o("div",Os,[o("div",Ms,[o("div",Bs,[o("span",qs,"Lines: "+y(le.value),1),S.value?(f(),C("span",Ws,"Updating...")):G("",!0)])]),o("div",Hs,[o("pre",{class:"logs-output",ref_key:"logsOutputRef",ref:i},y(D.value),513)])])])]),_:1},8,["modelValue","title"]),t(Ve,{modelValue:ee.value,"onUpdate:modelValue":e[22]||(e[22]=a=>ee.value=a),title:`SSH Terminal: ${be.value}`,width:"85%",top:"5vh",onClosed:Qe},{default:l(()=>[ee.value?(f(),B(ml,{key:0,"container-id":z.value,"socket-url":at.value,onClose:Qe},null,8,["container-id","socket-url"])):G("",!0)]),_:1},8,["modelValue","title"])])}}},Ks=Oe(Js,[["__scopeId","data-v-3951ab05"]]);export{Ks as default};
