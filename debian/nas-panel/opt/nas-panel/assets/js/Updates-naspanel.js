import{_ as se,c as S,Q as Ue,R as Ne,S as We,b as y,d as b,e as v,g as s,f as e,m as k,w as c,h as Y,U as qe,n as we,t as l,k as t,V as je,u as de,I as U,v as $e,r as V,D as te,i as O,F as me,l as pe,x as W,o as Ke,W as Ge,E as Qe,C as ie}from"./index-naspanel.js";const Xe={class:"update-status"},Je={key:0,class:"status-container"},Ye={class:"status-meta"},Ze={class:"status-message"},et={class:"status-time"},tt={key:1,class:"status-pending"},st={__name:"UpdateStatus",props:{status:{type:Object,required:!0,default:()=>({progress:0,status:"",message:"",time:"",indeterminate:!1})}},setup(o){const i=o,_=S(()=>({success:"status-icon success",exception:"status-icon error","":"status-icon pending"})[i.status.status]),w=S(()=>({success:We,exception:Ne,"":Ue})[i.status.status]);return(d,m)=>{const C=y("el-progress"),x=y("el-icon");return v(),b("div",Xe,[o.status.progress>0?(v(),b("div",Je,[s(C,{percentage:o.status.progress,status:o.status.status,"text-inside":!0,"stroke-width":20,indeterminate:o.status.indeterminate},null,8,["percentage","status","indeterminate"]),e("div",Ye,[e("span",Ze,[s(x,{class:we(_.value)},{default:c(()=>[(v(),Y(qe(w.value)))]),_:1},8,["class"]),k(" "+l(o.status.message),1)]),e("span",et,l(o.status.time),1)])])):(v(),b("div",tt,[s(x,null,{default:c(()=>[s(t(je))]),_:1}),k(" "+l(o.status.message),1)]))])}}},at=se(st,[["__scopeId","data-v-8f79368b"]]),lt={class:"badge-content"},nt={class:"badge-text"},ot={__name:"PriorityBadge",props:{priority:{type:String,required:!0,validator:o=>["critical","high","medium","low","unknown"].includes(o)}},setup(o){const{t:i}=de(),_=o,w=S(()=>{const C={critical:i("systemUpdates.priorityCritical"),high:i("systemUpdates.priorityHigh"),medium:i("systemUpdates.priorityMedium"),low:i("systemUpdates.priorityLow"),unknown:i("systemUpdates.priorityUnknown")};return C[_.priority]||C.unknown}),d=S(()=>{const C={critical:"mdi:alert-octagram",high:"mdi:alert-circle",medium:"mdi:information",low:"mdi:check-circle",unknown:"mdi:help-circle"};return C[_.priority]||C.unknown}),m=S(()=>`priority-${_.priority}`);return S(()=>{const C={critical:"var(--el-color-danger)",high:"var(--el-color-warning)",medium:"var(--el-color-info)",low:"var(--el-color-success)",unknown:"var(--el-text-color-secondary)"};return C[_.priority]||C.unknown}),(C,x)=>(v(),b("div",{class:we(["priority-badge",m.value])},[e("div",lt,[s(t(U),{icon:d.value,width:"12",height:"12",class:"badge-icon"},null,8,["icon"]),e("span",nt,l(w.value),1)])],2))}},Ve=se(ot,[["__scopeId","data-v-39e01715"]]),it={key:0,class:"details-content"},dt={class:"package-header"},ct={class:"package-icon-title"},rt={class:"package-title"},ut={class:"package-meta"},mt={class:"version-info"},pt={class:"version-row"},vt={class:"version-label"},ht={class:"version-row"},gt={class:"version-label"},yt={class:"tab-content"},_t={class:"description-full"},ft={class:"description-text"},Ut={key:0},wt={key:1,class:"no-description"},bt={key:0,class:"maintainer-info"},kt={class:"maintainer"},$t={class:"tab-content"},Vt={key:0,class:"loading-deps"},xt={key:1,class:"dependencies-list"},Ct={class:"dependencies-grid"},St={class:"dependency-name"},Dt={key:2,class:"no-dependencies"},zt={class:"tab-content"},Tt={key:0,class:"loading-changelog"},At={key:1,class:"changelog-content"},Mt={class:"changelog-header"},It=["innerHTML"],Ot={key:2,class:"no-changelog"},Bt={class:"tab-content"},Et={class:"installation-info"},Ft={class:"info-grid"},Pt={class:"info-item"},Lt={class:"info-label"},Ht={class:"info-value"},Rt={class:"info-item"},Nt={class:"info-label"},Wt={class:"info-value"},qt={class:"info-item"},jt={class:"info-label"},Kt={class:"info-value"},Gt={key:0,class:"info-item"},Qt={class:"info-label"},Xt={class:"info-value"},Jt={class:"install-note"},Yt={key:1,class:"no-update-selected"},Zt={class:"dialog-footer"},es={__name:"UpdateDetailsDialog",props:{modelValue:{type:Boolean,required:!0},update:{type:Object,default:null}},emits:["update:modelValue","install"],setup(o,{expose:i,emit:_}){const w=o,d=_,{t:m}=de(),C=$e.create({baseURL:`${window.location.protocol}//${window.location.hostname}:1112`}),x=V("description"),z=V([]),T=V(""),H=V(!1),A=V(!1),r=V(!1),I=V(null);S(()=>w.update?.name||""),te(()=>w.update,$=>{$&&(K(),w.modelValue&&h())},{deep:!0}),te(()=>w.modelValue,$=>{$&&w.update&&(K(),h())});const M=$=>{const D={kernel:"mdi:chip",firefox:"mdi:firefox",chrome:"mdi:google-chrome",docker:"mdi:docker",nginx:"mdi:nginx",apache:"mdi:apache",python:"mdi:language-python",php:"mdi:language-php",node:"mdi:nodejs",mysql:"mdi:database",postgresql:"mdi:database",redis:"mdi:database",vim:"mdi:code-tags",git:"mdi:git",ssh:"mdi:lock",ssl:"mdi:security",curl:"mdi:download",wget:"mdi:download"};for(const[P,q]of Object.entries(D))if($.includes(P))return q;return"mdi:package-variant"},R=$=>$.name.includes("security")?"critical":$.name.includes("kernel")?"high":$.description?.toLowerCase().includes("bug")?"medium":"low",B=$=>{if($===0)return"0 B";const D=1024,P=["B","KB","MB","GB"],q=Math.floor(Math.log($)/Math.log(D));return parseFloat(($/Math.pow(D,q)).toFixed(2))+" "+P[q]},h=async()=>{if(w.update?.name){H.value=!0;try{const $=await C.get(`/system/updates/check-deps/${w.update.name}`);z.value=$.data.dependencies||[]}catch($){console.error("Failed to load dependencies:",$),z.value=[]}finally{H.value=!1}x.value==="changelog"&&u()}},u=async()=>{if(!(!w.update?.name||T.value)){A.value=!0;try{const $=await C.get(`/system/updates/changelog/${w.update.name}`);T.value=$.data.changelog||""}catch($){console.error("Failed to load changelog:",$),T.value=""}finally{A.value=!1}}},E=async()=>{if(T.value)try{const $=T.value.replace(/<br>/g,`
`).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");await navigator.clipboard.writeText($),W.success(m("systemUpdates.changelogCopied"))}catch($){console.error("Failed to copy changelog:",$),W.error(m("systemUpdates.copyFailed"))}},F=()=>{d("update:modelValue",!1)},Q=()=>{K()},K=()=>{x.value="description",z.value=[],T.value="",H.value=!1,A.value=!1,r.value=!1};return te(x,$=>{$==="changelog"&&!T.value&&!A.value&&u()}),i({loadAdditionalData:h}),($,D)=>{const P=y("el-tag"),q=y("el-divider"),X=y("el-tab-pane"),j=y("el-icon"),L=y("el-button"),ae=y("el-alert"),Z=y("el-tabs"),le=y("el-dialog");return v(),Y(le,{"model-value":o.modelValue,"onUpdate:modelValue":D[2]||(D[2]=N=>$.$emit("update:modelValue",N)),title:t(m)("systemUpdates.updateDetails"),width:"60%","close-on-click-modal":!1,class:"update-details-dialog",onClosed:Q},{footer:c(()=>[e("div",Zt,[s(L,{onClick:F},{default:c(()=>[k(l(t(m)("common.close")),1)]),_:1}),s(L,{type:"primary",onClick:D[1]||(D[1]=N=>d("install",o.update)),loading:r.value,disabled:!o.update,class:"install-btn"},{icon:c(()=>[s(t(U),{icon:"mdi:package-down",width:"16"})]),default:c(()=>[k(" "+l(t(m)("systemUpdates.installThisUpdate")),1)]),_:1},8,["loading","disabled"])])]),default:c(()=>[o.update?(v(),b("div",it,[e("div",dt,[e("div",ct,[s(t(U),{icon:M(o.update.name),width:"32",height:"32",class:"package-icon-large"},null,8,["icon"]),e("div",rt,[e("h3",null,l(o.update.name),1),e("div",ut,[s(P,{size:"small",type:"info"},{default:c(()=>[k(l(o.update.section||"unknown"),1)]),_:1}),s(Ve,{priority:R(o.update)},null,8,["priority"])])])]),e("div",mt,[e("div",pt,[e("span",vt,l(t(m)("systemUpdates.currentVersion")),1),s(P,{size:"large",effect:"plain",class:"version-tag"},{default:c(()=>[k(l(o.update.current_version),1)]),_:1})]),s(t(U),{icon:"mdi:arrow-right-thick",width:"24",class:"version-arrow"}),e("div",ht,[e("span",gt,l(t(m)("systemUpdates.newVersion")),1),s(P,{size:"large",type:"success",effect:"dark",class:"version-tag"},{default:c(()=>[k(l(o.update.new_version),1)]),_:1})])])]),s(q),s(Z,{modelValue:x.value,"onUpdate:modelValue":D[0]||(D[0]=N=>x.value=N),class:"details-tabs"},{default:c(()=>[s(X,{label:t(m)("systemUpdates.description"),name:"description"},{default:c(()=>[e("div",yt,[e("div",_t,[e("h4",null,l(t(m)("systemUpdates.packageDescription")),1),e("div",ft,[o.update.description?(v(),b("pre",Ut,l(o.update.description),1)):(v(),b("p",wt,l(t(m)("systemUpdates.noDescriptionAvailable")),1))]),o.update.maintainer?(v(),b("div",bt,[e("h4",null,l(t(m)("systemUpdates.maintainer")),1),e("div",kt,[s(t(U),{icon:"mdi:account",width:"16"}),e("span",null,l(o.update.maintainer),1)])])):O("",!0)])])]),_:1},8,["label"]),s(X,{label:t(m)("systemUpdates.dependencies"),name:"dependencies"},{default:c(()=>[e("div",$t,[H.value?(v(),b("div",Vt,[s(j,{class:"is-loading"},{default:c(()=>[s(t(Ue))]),_:1}),e("span",null,l(t(m)("systemUpdates.loadingDependencies")),1)])):z.value&&z.value.length>0?(v(),b("div",xt,[e("h4",null,l(t(m)("systemUpdates.dependencyCount",{count:z.value.length})),1),e("div",Ct,[(v(!0),b(me,null,pe(z.value,N=>(v(),b("div",{key:N,class:"dependency-item"},[s(t(U),{icon:"mdi:package-variant",width:"14"}),e("span",St,l(N),1)]))),128))])])):(v(),b("div",Dt,[s(t(U),{icon:"mdi:check-circle-outline",width:"48",class:"no-deps-icon"}),e("h4",null,l(t(m)("systemUpdates.noDependencies")),1),e("p",null,l(t(m)("systemUpdates.thisPackageHasNoDependencies")),1)]))])]),_:1},8,["label"]),s(X,{label:t(m)("systemUpdates.changelog"),name:"changelog"},{default:c(()=>[e("div",zt,[A.value?(v(),b("div",Tt,[s(j,{class:"is-loading"},{default:c(()=>[s(t(Ue))]),_:1}),e("span",null,l(t(m)("systemUpdates.loadingChangelog")),1)])):T.value?(v(),b("div",At,[e("div",Mt,[e("h4",null,l(t(m)("systemUpdates.packageChangelog")),1),s(L,{size:"small",onClick:E,disabled:!T.value},{icon:c(()=>[s(t(U),{icon:"mdi:content-copy",width:"14"})]),default:c(()=>[k(" "+l(t(m)("common.copy")),1)]),_:1},8,["disabled"])]),e("div",{class:"changelog-text",ref_key:"changelogRef",ref:I},[e("pre",{innerHTML:T.value},null,8,It)],512)])):(v(),b("div",Ot,[s(t(U),{icon:"mdi:text-box-remove-outline",width:"48",class:"no-changelog-icon"}),e("h4",null,l(t(m)("systemUpdates.noChangelog")),1),e("p",null,l(t(m)("systemUpdates.changelogNotAvailable")),1)]))])]),_:1},8,["label"]),s(X,{label:t(m)("systemUpdates.installationInfo"),name:"installation"},{default:c(()=>[e("div",Bt,[e("div",Et,[e("div",Ft,[e("div",Pt,[e("div",Lt,[s(t(U),{icon:"mdi:harddisk",width:"16"}),k(" "+l(t(m)("systemUpdates.downloadSize")),1)]),e("div",Ht,l(o.update.size?B(o.update.size):t(m)("systemUpdates.unknown")),1)]),e("div",Rt,[e("div",Nt,[s(t(U),{icon:"mdi:security",width:"16"}),k(" "+l(t(m)("systemUpdates.updateType")),1)]),e("div",Wt,[s(P,{size:"small",type:o.update.is_security?"danger":"info"},{default:c(()=>[k(l(o.update.is_security?t(m)("systemUpdates.securityUpdate"):t(m)("systemUpdates.regularUpdate")),1)]),_:1},8,["type"])])]),e("div",qt,[e("div",jt,[s(t(U),{icon:"mdi:update",width:"16"}),k(" "+l(t(m)("systemUpdates.updateNeeded")),1)]),e("div",Kt,[s(P,{size:"small",type:o.update.is_kernel?"warning":"success"},{default:c(()=>[k(l(o.update.is_kernel?t(m)("systemUpdates.kernelUpdate"):t(m)("systemUpdates.userSpace")),1)]),_:1},8,["type"])])]),o.update.repository?(v(),b("div",Gt,[e("div",Qt,[s(t(U),{icon:"mdi:server",width:"16"}),k(" "+l(t(m)("systemUpdates.repository")),1)]),e("div",Xt,[e("code",null,l(o.update.repository),1)])])):O("",!0)]),e("div",Jt,[s(ae,{title:t(m)("systemUpdates.installationNote"),type:"info","show-icon":"",closable:!1},{default:c(()=>[e("p",null,l(t(m)("systemUpdates.installationNoteText")),1)]),_:1},8,["title"])])])])]),_:1},8,["label"])]),_:1},8,["modelValue"])])):(v(),b("div",Yt,[s(t(U),{icon:"mdi:package-variant-remove",width:"64",class:"no-update-icon"}),e("h3",null,l(t(m)("systemUpdates.noPackageSelected")),1),e("p",null,l(t(m)("systemUpdates.selectPackageToViewDetails")),1)]))]),_:1},8,["model-value","title"])}}},ts=se(es,[["__scopeId","data-v-6eb607c2"]]),ss={class:"cron-helper-content"},as={class:"cron-presets"},ls={class:"presets-grid"},ns=["onClick"],os={class:"preset-expression"},is={class:"preset-description"},ds={class:"cron-builder"},cs={class:"builder-section"},rs={class:"builder-row"},us={class:"builder-row"},ms={class:"builder-row"},ps={class:"builder-row"},vs={class:"builder-row"},hs={class:"cron-preview"},gs={class:"preview-expression"},ys={class:"dialog-footer"},_s={__name:"CronHelperDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue","apply"],setup(o,{emit:i}){const{t:_}=de(),w=o,d=i,m=S({get:()=>w.modelValue,set:A=>d("update:modelValue",A)}),C=V([{expression:"0 2 * * *",description:"Daily at 2:00 AM"},{expression:"0 0 * * 0",description:"Weekly on Sunday at midnight"},{expression:"0 0 1 * *",description:"Monthly on the 1st at midnight"},{expression:"*/30 * * * *",description:"Every 30 minutes"},{expression:"0 */6 * * *",description:"Every 6 hours"},{expression:"0 9-17 * * 1-5",description:"Every hour from 9 AM to 5 PM on weekdays"}]),x=V({minute:"*",hour:"*",dayOfMonth:"*",month:"*",dayOfWeek:"*"}),z=S(()=>{const{minute:A,hour:r,dayOfMonth:I,month:M,dayOfWeek:R}=x.value;return`${A} ${r} ${I} ${M} ${R}`}),T=A=>{const r=A.expression.split(" ");x.value={minute:r[0],hour:r[1],dayOfMonth:r[2],month:r[3],dayOfWeek:r[4]}},H=()=>{d("apply",z.value),d("update:modelValue",!1)};return(A,r)=>{const I=y("el-divider"),M=y("el-input"),R=y("el-button"),B=y("el-dialog");return v(),Y(B,{"model-value":o.modelValue,"onUpdate:modelValue":r[6]||(r[6]=h=>A.$emit("update:modelValue",h)),title:"Cron Expression Helper",width:"600px",class:"cron-helper-dialog"},{footer:c(()=>[e("div",ys,[s(R,{onClick:r[5]||(r[5]=h=>m.value=!1)},{default:c(()=>r[20]||(r[20]=[k("Cancel")])),_:1,__:[20]}),s(R,{type:"primary",onClick:H},{default:c(()=>r[21]||(r[21]=[k("Apply")])),_:1,__:[21]})])]),default:c(()=>[e("div",ss,[e("div",as,[r[7]||(r[7]=e("h4",null,"Common Presets",-1)),e("div",ls,[(v(!0),b(me,null,pe(C.value,h=>(v(),b("div",{key:h.expression,class:"preset-item",onClick:u=>T(h)},[e("div",os,l(h.expression),1),e("div",is,l(h.description),1)],8,ns))),128))])]),s(I),e("div",ds,[r[19]||(r[19]=e("h4",null,"Custom Builder",-1)),e("div",cs,[e("div",rs,[r[8]||(r[8]=e("span",{class:"builder-label"},"Minute",-1)),s(M,{modelValue:x.value.minute,"onUpdate:modelValue":r[0]||(r[0]=h=>x.value.minute=h),placeholder:"*"},null,8,["modelValue"]),r[9]||(r[9]=e("span",{class:"builder-example"},"0-59, *",-1))]),e("div",us,[r[10]||(r[10]=e("span",{class:"builder-label"},"Hour",-1)),s(M,{modelValue:x.value.hour,"onUpdate:modelValue":r[1]||(r[1]=h=>x.value.hour=h),placeholder:"*"},null,8,["modelValue"]),r[11]||(r[11]=e("span",{class:"builder-example"},"0-23, *",-1))]),e("div",ms,[r[12]||(r[12]=e("span",{class:"builder-label"},"Day of Month",-1)),s(M,{modelValue:x.value.dayOfMonth,"onUpdate:modelValue":r[2]||(r[2]=h=>x.value.dayOfMonth=h),placeholder:"*"},null,8,["modelValue"]),r[13]||(r[13]=e("span",{class:"builder-example"},"1-31, *",-1))]),e("div",ps,[r[14]||(r[14]=e("span",{class:"builder-label"},"Month",-1)),s(M,{modelValue:x.value.month,"onUpdate:modelValue":r[3]||(r[3]=h=>x.value.month=h),placeholder:"*"},null,8,["modelValue"]),r[15]||(r[15]=e("span",{class:"builder-example"},"1-12, *",-1))]),e("div",vs,[r[16]||(r[16]=e("span",{class:"builder-label"},"Day of Week",-1)),s(M,{modelValue:x.value.dayOfWeek,"onUpdate:modelValue":r[4]||(r[4]=h=>x.value.dayOfWeek=h),placeholder:"*"},null,8,["modelValue"]),r[17]||(r[17]=e("span",{class:"builder-example"},"0-6 (0=Sunday), *",-1))])]),e("div",hs,[r[18]||(r[18]=e("div",{class:"preview-label"},"Cron Expression:",-1)),e("div",gs,l(z.value),1)])])])]),_:1},8,["model-value"])}}},fs=se(_s,[["__scopeId","data-v-c2fd7b61"]]),Us={class:"settings-content"},ws={class:"main-switch"},bs={class:"switch-description"},ks={key:0,class:"settings-options"},$s={class:"setting-section"},Vs={class:"section-description"},xs={class:"schedule-options"},Cs={key:0,class:"custom-schedule"},Ss={class:"cron-hint"},Ds={key:1,class:"time-selection"},zs={key:0,class:"day-selection"},Ts={class:"next-run"},As={class:"label"},Ms={class:"value"},Is={class:"setting-section"},Os={class:"section-description"},Bs={class:"update-type-options"},Es={class:"radio-option"},Fs={class:"option-content"},Ps={class:"radio-option"},Ls={class:"option-content"},Hs={class:"additional-options"},Rs={class:"checkbox-hint"},Ns={class:"setting-section"},Ws={class:"section-description"},qs={class:"notification-options"},js={class:"notification-option"},Ks={class:"notification-option"},Gs={class:"notification-option"},Qs={key:0,class:"email-settings"},Xs={key:1,class:"webhook-settings"},Js={class:"setting-section"},Ys={class:"advanced-options"},Zs={class:"advanced-option"},ea={class:"option-hint"},ta={class:"advanced-option"},sa={class:"option-hint"},aa={class:"advanced-option"},la={class:"option-hint"},na={class:"advanced-option"},oa={class:"option-label"},ia={key:1,class:"schedule-preview"},da={class:"preview-header"},ca={class:"preview-content"},ra={class:"cron-preview"},ua={class:"preview-description"},ma={class:"dialog-footer"},pa={__name:"AutomaticUpdatesDialog",props:{modelValue:{type:Boolean,required:!0},settings:{type:Object,required:!0}},emits:["update:modelValue","save"],setup(o,{emit:i}){const _=o,w=i,{t:d}=de(),m=S({get:()=>_.modelValue,set:h=>w("update:modelValue",h)}),C=V(!1),x=V(!1),z=V([]),T=[{value:"0",label:d("systemUpdates.sunday")},{value:"1",label:d("systemUpdates.monday")},{value:"2",label:d("systemUpdates.tuesday")},{value:"3",label:d("systemUpdates.wednesday")},{value:"4",label:d("systemUpdates.thursday")},{value:"5",label:d("systemUpdates.friday")},{value:"6",label:d("systemUpdates.saturday")}],H=S(()=>{if(!_.settings.enabled)return"";if(_.settings.scheduleType==="custom")return _.settings.customSchedule;const[h,u]=_.settings.time.split(":");return _.settings.scheduleType==="daily"?`${u} ${h} * * *`:_.settings.scheduleType==="weekly"?`${u} ${h} * * ${_.settings.dayOfWeek}`:""}),A=S(()=>{if(!_.settings.enabled)return d("systemUpdates.scheduleDisabled");if(_.settings.scheduleType==="daily")return d("systemUpdates.dailyAt",{time:_.settings.time});if(_.settings.scheduleType==="weekly"){const h=T.find(u=>u.value===_.settings.dayOfWeek)?.label;return d("systemUpdates.weeklyAt",{day:h,time:_.settings.time})}else if(_.settings.scheduleType==="custom")return d("systemUpdates.customSchedule");return""}),r=S(()=>d("systemUpdates.nextRunCalculated")),I=async()=>{C.value=!0;try{if(_.settings.enabled&&_.settings.scheduleType==="custom"&&!B(_.settings.customSchedule))throw new Error(d("systemUpdates.invalidCronExpression"));w("save",_.settings),W.success(d("systemUpdates.settingsSaved")),w("update:modelValue",!1),m.value=!1}catch(h){W.error(h.message||d("systemUpdates.saveFailed"))}finally{C.value=!1}},M=()=>{x.value=!0},R=h=>{_.settings.customSchedule=h},B=h=>/^(\*|([0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9])|\*\/([0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9])) (\*|([0-9]|1[0-9]|2[0-3])|\*\/([0-9]|1[0-9]|2[0-3])) (\*|([1-9]|1[0-9]|2[0-9]|3[0-1])|\*\/([1-9]|1[0-9]|2[0-9]|3[0-1])) (\*|([1-9]|1[0-2])|\*\/([1-9]|1[0-2])) (\*|([0-6])|\*\/([0-6]))$/.test(h);return te(()=>_.settings,h=>{const u={enabled:!1,scheduleType:"daily",customSchedule:"0 2 * * *",time:"02:00",dayOfWeek:"0",updateType:"security",autoInstall:!1,notificationMethods:["system"],emailAddress:"",webhookUrl:"",rebootAfterUpdate:!1,cleanAfterUpdate:!0,skipKernelUpdates:!1,concurrentDownloads:3};Object.keys(u).forEach(E=>{h[E]===void 0&&(h[E]=u[E])})},{deep:!0,immediate:!0}),(h,u)=>{const E=y("el-switch"),F=y("el-divider"),Q=y("el-radio-button"),K=y("el-radio-group"),$=y("el-button"),D=y("el-input"),P=y("el-time-select"),q=y("el-option"),X=y("el-select"),j=y("el-radio"),L=y("el-checkbox"),ae=y("el-checkbox-group"),Z=y("el-tooltip"),le=y("el-slider"),N=y("el-collapse-item"),ve=y("el-collapse"),he=y("el-dialog");return v(),Y(he,{"model-value":o.modelValue,"onUpdate:modelValue":u[17]||(u[17]=g=>h.$emit("update:modelValue",g)),title:t(d)("systemUpdates.automaticUpdates"),width:"50%","close-on-click-modal":!1,class:"automatic-updates-dialog"},{footer:c(()=>[e("div",ma,[s($,{onClick:u[15]||(u[15]=g=>m.value=!1)},{default:c(()=>[k(l(t(d)("common.cancel")),1)]),_:1}),s($,{type:"primary",onClick:I,loading:C.value},{default:c(()=>[k(l(t(d)("common.save")),1)]),_:1},8,["loading"])])]),default:c(()=>[e("div",Us,[e("div",ws,[s(E,{modelValue:o.settings.enabled,"onUpdate:modelValue":u[0]||(u[0]=g=>o.settings.enabled=g),size:"large","inline-prompt":"","active-text":t(d)("common.enabled"),"inactive-text":t(d)("common.disabled"),style:{"--el-switch-on-color":"var(--el-color-success)"}},null,8,["modelValue","active-text","inactive-text"]),e("div",bs,[e("h4",null,l(t(d)("systemUpdates.automaticUpdates")),1),e("p",null,l(t(d)("systemUpdates.automaticUpdatesDescription")),1)])]),o.settings.enabled?(v(),b("div",ks,[s(F),e("div",$s,[e("h4",null,l(t(d)("systemUpdates.schedule")),1),e("p",Vs,l(t(d)("systemUpdates.scheduleDescription")),1),e("div",xs,[s(K,{modelValue:o.settings.scheduleType,"onUpdate:modelValue":u[1]||(u[1]=g=>o.settings.scheduleType=g),class:"schedule-type"},{default:c(()=>[s(Q,{value:"daily"},{default:c(()=>[k(l(t(d)("systemUpdates.daily")),1)]),_:1}),s(Q,{value:"weekly"},{default:c(()=>[k(l(t(d)("systemUpdates.weekly")),1)]),_:1}),s(Q,{value:"custom"},{default:c(()=>[k(l(t(d)("systemUpdates.custom")),1)]),_:1})]),_:1},8,["modelValue"]),o.settings.scheduleType==="custom"?(v(),b("div",Cs,[s(D,{modelValue:o.settings.customSchedule,"onUpdate:modelValue":u[2]||(u[2]=g=>o.settings.customSchedule=g),placeholder:"0 2 * * *",class:"cron-input"},{prepend:c(()=>[s(t(U),{icon:"mdi:clock-outline",width:"16"})]),append:c(()=>[s($,{onClick:M},{default:c(()=>[k(l(t(d)("systemUpdates.cronHelper")),1)]),_:1})]),_:1},8,["modelValue"]),e("div",Ss,[s(t(U),{icon:"mdi:information-outline",width:"14"}),e("span",null,l(t(d)("systemUpdates.cronFormatHint")),1)])])):(v(),b("div",Ds,[s(P,{modelValue:o.settings.time,"onUpdate:modelValue":u[3]||(u[3]=g=>o.settings.time=g),placeholder:t(d)("systemUpdates.selectTime"),start:"00:00",step:"00:30",end:"23:30",class:"time-selector"},null,8,["modelValue","placeholder"]),o.settings.scheduleType==="weekly"?(v(),b("div",zs,[s(X,{modelValue:o.settings.dayOfWeek,"onUpdate:modelValue":u[4]||(u[4]=g=>o.settings.dayOfWeek=g),placeholder:t(d)("systemUpdates.selectDay"),class:"day-selector"},{default:c(()=>[(v(),b(me,null,pe(T,g=>s(q,{key:g.value,label:g.label,value:g.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"])])):O("",!0)])),e("div",Ts,[s(t(U),{icon:"mdi:calendar-clock",width:"16"}),e("span",As,l(t(d)("systemUpdates.nextRun"))+":",1),e("span",Ms,l(r.value),1)])])]),s(F),e("div",Is,[e("h4",null,l(t(d)("systemUpdates.updateType")),1),e("p",Os,l(t(d)("systemUpdates.updateTypeDescription")),1),e("div",Bs,[s(K,{modelValue:o.settings.updateType,"onUpdate:modelValue":u[5]||(u[5]=g=>o.settings.updateType=g)},{default:c(()=>[s(j,{value:"security",border:""},{default:c(()=>[e("div",Es,[s(t(U),{icon:"mdi:shield-check",width:"20",class:"option-icon security"}),e("div",Fs,[e("strong",null,l(t(d)("systemUpdates.securityOnly")),1),e("p",null,l(t(d)("systemUpdates.securityOnlyDescription")),1)])])]),_:1}),s(j,{value:"all",border:""},{default:c(()=>[e("div",Ps,[s(t(U),{icon:"mdi:package-variant",width:"20",class:"option-icon all"}),e("div",Ls,[e("strong",null,l(t(d)("systemUpdates.allUpdates")),1),e("p",null,l(t(d)("systemUpdates.allUpdatesDescription")),1)])])]),_:1})]),_:1},8,["modelValue"])]),e("div",Hs,[s(L,{modelValue:o.settings.autoInstall,"onUpdate:modelValue":u[6]||(u[6]=g=>o.settings.autoInstall=g)},{default:c(()=>[k(l(t(d)("systemUpdates.autoInstallUpdates")),1)]),_:1},8,["modelValue"]),e("div",Rs,l(t(d)("systemUpdates.autoInstallHint")),1)])]),s(F),e("div",Ns,[e("h4",null,l(t(d)("systemUpdates.notifications")),1),e("p",Ws,l(t(d)("systemUpdates.notificationsDescription")),1),e("div",qs,[s(ae,{modelValue:o.settings.notificationMethods,"onUpdate:modelValue":u[7]||(u[7]=g=>o.settings.notificationMethods=g)},{default:c(()=>[s(L,{value:"email"},{default:c(()=>[e("div",js,[s(t(U),{icon:"mdi:email",width:"16"}),e("span",null,l(t(d)("systemUpdates.email")),1)])]),_:1}),s(L,{value:"system"},{default:c(()=>[e("div",Ks,[s(t(U),{icon:"mdi:bell-outline",width:"16"}),e("span",null,l(t(d)("systemUpdates.systemNotification")),1)])]),_:1}),s(L,{value:"webhook"},{default:c(()=>[e("div",Gs,[s(t(U),{icon:"mdi:webhook",width:"16"}),e("span",null,l(t(d)("systemUpdates.webhook")),1)])]),_:1})]),_:1},8,["modelValue"]),o.settings.notificationMethods.includes("email")?(v(),b("div",Qs,[s(D,{modelValue:o.settings.emailAddress,"onUpdate:modelValue":u[8]||(u[8]=g=>o.settings.emailAddress=g),placeholder:t(d)("systemUpdates.emailPlaceholder"),class:"email-input"},{prepend:c(()=>[s(t(U),{icon:"mdi:at",width:"16"})]),_:1},8,["modelValue","placeholder"])])):O("",!0),o.settings.notificationMethods.includes("webhook")?(v(),b("div",Xs,[s(D,{modelValue:o.settings.webhookUrl,"onUpdate:modelValue":u[9]||(u[9]=g=>o.settings.webhookUrl=g),placeholder:t(d)("systemUpdates.webhookPlaceholder"),class:"webhook-input"},{prepend:c(()=>[s(t(U),{icon:"mdi:link",width:"16"})]),_:1},8,["modelValue","placeholder"])])):O("",!0)])]),s(F),e("div",Js,[s(ve,{modelValue:z.value,"onUpdate:modelValue":u[14]||(u[14]=g=>z.value=g)},{default:c(()=>[s(N,{name:"advanced"},{title:c(()=>[e("h4",null,l(t(d)("systemUpdates.advancedOptions")),1)]),default:c(()=>[e("div",Ys,[e("div",Zs,[s(L,{modelValue:o.settings.rebootAfterUpdate,"onUpdate:modelValue":u[10]||(u[10]=g=>o.settings.rebootAfterUpdate=g)},{default:c(()=>[k(l(t(d)("systemUpdates.rebootAfterUpdate")),1)]),_:1},8,["modelValue"]),e("div",ea,l(t(d)("systemUpdates.rebootAfterUpdateHint")),1)]),e("div",ta,[s(L,{modelValue:o.settings.cleanAfterUpdate,"onUpdate:modelValue":u[11]||(u[11]=g=>o.settings.cleanAfterUpdate=g)},{default:c(()=>[k(l(t(d)("systemUpdates.cleanAfterUpdate")),1)]),_:1},8,["modelValue"]),e("div",sa,l(t(d)("systemUpdates.cleanAfterUpdateHint")),1)]),e("div",aa,[s(L,{modelValue:o.settings.skipKernelUpdates,"onUpdate:modelValue":u[12]||(u[12]=g=>o.settings.skipKernelUpdates=g)},{default:c(()=>[k(l(t(d)("systemUpdates.skipKernelUpdates")),1)]),_:1},8,["modelValue"]),e("div",la,l(t(d)("systemUpdates.skipKernelUpdatesHint")),1)]),e("div",na,[e("div",oa,[e("span",null,l(t(d)("systemUpdates.maxConcurrentDownloads")),1),s(Z,{content:t(d)("systemDownloads.concurrentDownloadsHint"),placement:"top"},{default:c(()=>[s(t(U),{icon:"mdi:information-outline",width:"14"})]),_:1},8,["content"])]),s(le,{modelValue:o.settings.concurrentDownloads,"onUpdate:modelValue":u[13]||(u[13]=g=>o.settings.concurrentDownloads=g),min:1,max:10,step:1,"show-stops":"","show-input":"",class:"concurrent-slider"},null,8,["modelValue"])])])]),_:1})]),_:1},8,["modelValue"])])])):O("",!0),o.settings.enabled?(v(),b("div",ia,[e("div",da,[s(t(U),{icon:"mdi:calendar-text",width:"20"}),e("h4",null,l(t(d)("systemUpdates.schedulePreview")),1)]),e("div",ca,[e("pre",ra,l(H.value),1),e("div",ua,l(A.value),1)])])):O("",!0)]),s(fs,{modelValue:x.value,"onUpdate:modelValue":u[16]||(u[16]=g=>x.value=g),onApply:R},null,8,["modelValue"])]),_:1},8,["model-value","title"])}}},va=se(pa,[["__scopeId","data-v-879302eb"]]),ha={class:"updates-dashboard"},ga={class:"header-content"},ya={class:"header-left"},_a={class:"header-icon small"},fa={class:"header-text"},Ua={class:"subtitle"},wa={class:"header-stats"},ba={class:"stat-item small"},ka={class:"stat-icon"},$a={class:"stat-info"},Va={class:"stat-value"},xa={class:"stat-label"},Ca={class:"stat-item small"},Sa={class:"stat-icon"},Da={class:"stat-info"},za={class:"stat-value"},Ta={class:"stat-label"},Aa={class:"stat-item small"},Ma={class:"stat-icon"},Ia={class:"stat-info"},Oa={class:"stat-label"},Ba={class:"stat-value"},Ea={class:"header-actions compact"},Fa={class:"combined-content"},Pa={class:"quick-actions"},La={key:0,class:"compact-progress"},Ha={class:"progress-info"},Ra={class:"progress-text"},Na={class:"progress-percentage"},Wa={class:"progress-details"},qa={class:"list-header"},ja={class:"search-section"},Ka={key:0,class:"selection-info"},Ga={class:"selected-count"},Qa={key:1,class:"loading-state"},Xa={key:2,class:"empty-state compact"},Ja={class:"empty-text"},Ya={key:3,class:"updates-list compact"},Za={class:"update-checkbox"},el={class:"update-icon"},tl={class:"update-content"},sl={class:"update-header"},al={class:"update-name"},ll={class:"name-text"},nl={class:"version-change"},ol={class:"update-actions"},il={class:"action-buttons"},dl={class:"update-description"},cl={class:"desc-text"},rl={class:"update-meta"},ul={key:0,class:"size-text"},ml={key:4,class:"pagination compact"},pl={__name:"Updates",setup(o){const{t:i}=de(),_=$e.create({baseURL:`${window.location.protocol}//${window.location.hostname}:1112`,timeout:45e3,headers:{"X-Requested-With":"XMLHttpRequest"}}),w=V([]),d=V(!1),m=V(!1),C=V(!1),x=V(null),z=V(""),T=V(!1),H=V(!1),A=V(null),r=V([]),I=V({}),M=V({}),R=V(!1),B=V(1),h=V(10),u=V("all"),E=V(""),F=V(""),Q=V({autoUpdate:!1,autoInstall:!1,schedule:"0 2 * * *",securityOnly:!1,notifyOnUpdates:!0,rebootAfterUpdate:!1}),K=S(()=>w.value.length>0),$=S(()=>w.value.filter(a=>g(a)==="critical").length);S(()=>{const a=w.value.reduce((n,p)=>n+(p.size||0),0);return Z(a)}),S(()=>{const a=r.value.reduce((n,p)=>n+(p.size||0),0);return Z(a)});const D=S(()=>{const a=w.value.length,n=Object.values(I.value).filter(p=>p.progress===100).length;return Math.round(n/a*100)}),P=S(()=>D.value<30?"#e6a23c":D.value<70?"#409eff":"#67c23a"),q=S(()=>Object.values(I.value).filter(a=>a.progress===100).length),X=S(()=>{if(!x.value)return i("systemUpdates.never");const a=new Date(x.value),p=Math.floor((new Date-a)/(1e3*60));return p<1?i("systemUpdates.justNow"):p<60?i("systemUpdates.minutesAgo",{minutes:p}):p<1440?i("systemUpdates.hoursAgo",{hours:Math.floor(p/60)}):a.toLocaleDateString()}),j=S(()=>{let a=[...w.value];if(u.value==="security"&&(a=a.filter(n=>g(n)==="critical")),F.value&&(a=a.filter(n=>g(n)===F.value)),E.value){const n=E.value.toLowerCase();a=a.filter(p=>p.name.toLowerCase().includes(n)||p.description&&p.description.toLowerCase().includes(n))}return a}),L=S(()=>{const a=(B.value-1)*h.value,n=a+h.value;return j.value.slice(a,n)}),ae=S(()=>u.value!=="all"||E.value||F.value?i("systemUpdates.noUpdatesFilter"):i("systemUpdates.noUpdatesAvailable")),Z=a=>a<1024?`${a} B`:a<1024*1024?`${(a/1024).toFixed(1)} KB`:a<1024*1024*1024?`${(a/(1024*1024)).toFixed(1)} MB`:`${(a/(1024*1024*1024)).toFixed(1)} GB`,le=a=>a?a.length>80?a.substring(0,80)+"...":a:i("systemUpdates.noDescription"),N=a=>{const n={kernel:"mdi:chip",firefox:"mdi:firefox",chrome:"mdi:google-chrome",docker:"mdi:docker",nginx:"mdi:nginx",apache:"mdi:apache",python:"mdi:language-python",php:"mdi:language-php",node:"mdi:nodejs",mysql:"mdi:database",postgresql:"mdi:database",redis:"mdi:database",vim:"mdi:code-tags",git:"mdi:git",ssh:"mdi:lock",ssl:"mdi:security",security:"mdi:shield-check",updates:"mdi:update"};for(const[p,G]of Object.entries(n))if(a.toLowerCase().includes(p))return G;return"mdi:package-variant"},ve=a=>({critical:"#f56c6c",high:"#e6a23c",medium:"#409eff",low:"#909399"})[a]||"#909399",he=a=>a.includes("-security")?"security":a.includes("-backports")?"backports":a.includes("-updates")?"updates":"main",g=a=>a.name.includes("security")||a.name.toLowerCase().includes("sec")?"critical":a.name.includes("kernel")?"high":a.description?.toLowerCase().includes("bug")?"medium":(a.name.includes("-backports"),"low"),be=a=>r.value.some(n=>n.name===a.name),xe=a=>{const n=r.value.findIndex(p=>p.name===a.name);n===-1?r.value.push(a):r.value.splice(n,1)},ce=async(a=!1)=>{d.value=!0,z.value="";try{const n=await _.get(`/system/updates/check?force=${a}`);w.value=n.data.updates||[],x.value=new Date().toISOString(),w.value.length>0&&await Ce(),!K.value&&a&&Qe.success({title:i("systemUpdates.systemUpToDate"),message:i("systemUpdates.noUpdatesFound"),position:"bottom-right"})}catch(n){z.value=i("systemUpdates.checkFailed",{error:n.response?.data?.message||n.message})}finally{d.value=!1}},Ce=async()=>{const a=w.value.map(n=>n.name);try{const n=await _.post("/system/updates/details",{packages:a});w.value=w.value.map(p=>({...p,...n.data[p.name],size:n.data[p.name]?.size||0}))}catch(n){console.warn("Failed to fetch package details:",n)}},ge=async a=>{if(!(!a||m.value))try{await ie.confirm(i("systemUpdates.confirmInstallSingle",{name:a.name,version:a.new_version}),i("systemUpdates.confirmTitle"),{confirmButtonText:i("systemUpdates.install"),cancelButtonText:i("common.cancel"),type:"info"}),_e(a.name);const n=await _.post("/system/updates/install",{packages:[a.name],no_confirm:!0});ye(a.name,n.data.processId,[a.name])}catch(n){n!=="cancel"&&(ne(a.name,{progress:0,status:"exception",message:n.response?.data?.message||n.message}),W.error(i("systemUpdates.installFailed",{error:n.response?.data?.message||n.message})))}},Se=async()=>{if(!(r.value.length===0||m.value))try{await ie.confirm(i("systemUpdates.confirmInstallSelected",{count:r.value.length}),i("systemUpdates.confirmTitle"),{confirmButtonText:i("systemUpdates.install"),cancelButtonText:i("common.cancel"),type:"warning"}),C.value=!0;const a=r.value.map(p=>p.name);a.forEach(p=>_e(p));const n=await _.post("/system/updates/install",{packages:a,no_confirm:!0});ye("_selected",n.data.processId,a)}catch(a){a!=="cancel"&&W.error(i("systemUpdates.installFailed",{error:a.message}))}finally{C.value=!1}},De=async()=>{if(w.value.length!==0)try{await ie.confirm(i("systemUpdates.confirmInstallAll",{count:w.value.length}),i("systemUpdates.confirmTitle"),{confirmButtonText:i("systemUpdates.installAll"),cancelButtonText:i("common.cancel"),type:"warning"}),m.value=!0;const a=w.value.map(p=>p.name);a.forEach(p=>_e(p));const n=await _.post("/system/updates/install",{packages:a,no_confirm:!0});ye("_all",n.data.processId,a)}catch(a){a!=="cancel"&&W.error(i("systemUpdates.installFailed",{error:a.message})),m.value=!1}},ye=(a,n,p=[])=>{const G=new EventSource(`${_.defaults.baseURL}/system/updates/progress/${n}`);M.value[n]=G,G.onmessage=ee=>{try{const J=JSON.parse(ee.data);a==="_all"?w.value.forEach(oe=>{ne(oe.name,J)}):a==="_selected"?p.forEach(oe=>{ne(oe,J)}):ne(p[0],J),J.progress===100&&setTimeout(()=>{G.close(),delete M.value[n],setTimeout(()=>{ce(!0)},2e3)},1e3)}catch(J){console.error("Error parsing SSE data:",J)}},G.onerror=ee=>{console.error("SSE Error:",ee),G.close(),delete M.value[n]}},_e=a=>{I.value[a]={progress:0,status:"",message:i("systemUpdates.startingInstallation"),time:new Date().toLocaleTimeString(),indeterminate:!0}},ne=(a,n)=>{I.value[a]={...I.value[a]||{},...n,time:new Date().toLocaleTimeString()}},fe=a=>I.value[a]||{progress:0,status:"",message:i("systemUpdates.pending"),time:""},ze=a=>{const n=w.value.find(p=>p.name===a);n&&ge(n)},Te=a=>{A.value=a,T.value=!0},Ae=async a=>{try{const n=await _.get(`/system/updates/changelog/${a.name}`);ie.alert(n.data.changelog,`Changelog: ${a.name}`,{confirmButtonText:i("common.close"),dangerouslyUseHTMLString:!0,width:"600px"})}catch{W.warning(i("systemUpdates.noChangelog"))}},Me=()=>{r.value=[]},Ie=async()=>{try{await ie.confirm(i("systemUpdates.confirmCancelAll"),i("common.warning"),{confirmButtonText:i("common.confirm"),cancelButtonText:i("common.cancel"),type:"warning"}),R.value=!0,await _.delete("/system/updates/cancel/_all"),Object.keys(I.value).forEach(a=>{ne(a,{progress:0,status:"exception",message:i("systemUpdates.cancelled")})}),m.value=!1,C.value=!1}catch(a){a!=="cancel"&&W.error(i("systemUpdates.cancelFailed"))}finally{R.value=!1}},Oe=async a=>{try{await _.post("/system/updates/settings",a),Q.value=a,W.success(i("systemUpdates.settingsSaved")),H.value=!1}catch(n){W.error(i("systemUpdates.saveFailed",{error:n.message}))}},Be=a=>{B.value=a},Ee=a=>{h.value=a,B.value=1};return Ke(()=>{ce(!1)}),Ge(()=>{Object.values(M.value).forEach(a=>a.close())}),te(E,()=>{B.value=1}),te(F,()=>{B.value=1}),te(u,()=>{B.value=1}),(a,n)=>{const p=y("el-button"),G=y("el-button-group"),ee=y("el-card"),J=y("el-progress"),oe=y("el-input"),re=y("el-option"),Fe=y("el-select"),Pe=y("el-alert"),ke=y("el-icon"),Le=y("el-checkbox"),He=y("el-tag"),Re=y("el-pagination");return v(),b("div",ha,[s(ee,{class:"dashboard-header compact",shadow:"hover"},{default:c(()=>[e("div",ga,[e("div",ya,[e("div",_a,[s(t(U),{icon:"mdi:package-variant-closed"})]),e("div",fa,[e("h2",null,l(t(i)("systemUpdates.title")),1),e("p",Ua,l(t(i)("systemUpdates.subtitle")),1)])]),e("div",wa,[e("div",ba,[e("div",ka,[s(t(U),{icon:"mdi:package-variant",width:"14"})]),e("div",$a,[e("div",Va,l(w.value.length),1),e("div",xa,l(t(i)("systemUpdates.updates")),1)])]),e("div",Ca,[e("div",Sa,[s(t(U),{icon:"mdi:shield-alert",width:"14"})]),e("div",Da,[e("div",za,l($.value),1),e("div",Ta,l(t(i)("systemUpdates.security")),1)])]),e("div",Aa,[e("div",Ma,[s(t(U),{icon:"mdi:clock-outline",width:"14"})]),e("div",Ia,[e("div",Oa,l(t(i)("systemUpdates.lastChecked")),1),e("div",Ba,l(X.value),1)])])]),e("div",Ea,[s(G,null,{default:c(()=>[s(p,{type:u.value==="all"?"primary":"default",onClick:n[0]||(n[0]=f=>u.value="all"),size:"small"},{default:c(()=>[k(l(t(i)("systemUpdates.all")),1)]),_:1},8,["type"]),s(p,{type:u.value==="security"?"primary":"default",onClick:n[1]||(n[1]=f=>u.value="security"),size:"small"},{default:c(()=>[k(l(t(i)("systemUpdates.security")),1)]),_:1},8,["type"])]),_:1})])])]),_:1}),s(ee,{class:"combined-card",shadow:"hover"},{default:c(()=>[e("div",Fa,[e("div",Pa,[s(p,{type:"primary",size:"small",onClick:n[2]||(n[2]=f=>ce(!0)),loading:d.value,disabled:m.value},{default:c(()=>[s(t(U),{icon:"mdi:refresh",width:"14"}),k(" "+l(t(i)("systemUpdates.checkNow")),1)]),_:1},8,["loading","disabled"]),K.value?(v(),Y(p,{key:0,type:"success",size:"small",onClick:De,loading:m.value,disabled:d.value||m.value},{default:c(()=>[s(t(U),{icon:"mdi:download",width:"14"}),k(" "+l(t(i)("systemUpdates.installAll")),1)]),_:1},8,["loading","disabled"])):O("",!0),r.value.length>0?(v(),Y(p,{key:1,type:"warning",size:"small",onClick:Se,loading:C.value,disabled:m.value},{default:c(()=>[s(t(U),{icon:"mdi:download-multiple",width:"14"}),k(" "+l(t(i)("systemUpdates.installSelected")),1)]),_:1},8,["loading","disabled"])):O("",!0)]),m.value?(v(),b("div",La,[e("div",Ha,[e("span",Ra,l(t(i)("systemUpdates.installing")),1),e("span",Na,l(D.value)+"%",1)]),s(J,{percentage:D.value,"stroke-width":6,striped:"",duration:10,color:P.value},null,8,["percentage","color"]),e("div",Wa,[e("span",null,l(q.value)+"/"+l(w.value.length)+" "+l(t(i)("systemUpdates.packages")),1),s(p,{size:"mini",type:"danger",text:"",onClick:Ie},{default:c(()=>[k(l(t(i)("common.cancel")),1)]),_:1})])])):O("",!0)])]),_:1}),s(ee,{class:"updates-list-card",shadow:"hover"},{default:c(()=>[e("div",qa,[e("div",ja,[s(oe,{modelValue:E.value,"onUpdate:modelValue":n[3]||(n[3]=f=>E.value=f),placeholder:t(i)("systemUpdates.searchPlaceholder"),clearable:"",size:"small",class:"search-input compact"},{prefix:c(()=>[s(t(U),{icon:"mdi:magnify",width:"14"})]),_:1},8,["modelValue","placeholder"]),s(Fe,{modelValue:F.value,"onUpdate:modelValue":n[4]||(n[4]=f=>F.value=f),placeholder:t(i)("systemUpdates.priority"),clearable:"",size:"small",class:"filter-select"},{default:c(()=>[s(re,{label:t(i)("systemUpdates.critical"),value:"critical"},null,8,["label"]),s(re,{label:t(i)("systemUpdates.high"),value:"high"},null,8,["label"]),s(re,{label:t(i)("systemUpdates.medium"),value:"medium"},null,8,["label"]),s(re,{label:t(i)("systemUpdates.low"),value:"low"},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),r.value.length>0?(v(),b("div",Ka,[e("span",Ga,l(t(i)("systemUpdates.selectedCount",{count:r.value.length})),1),s(p,{size:"small",text:"",onClick:Me,class:"clear-btn"},{default:c(()=>[k(l(t(i)("common.clear")),1)]),_:1})])):O("",!0)]),z.value?(v(),Y(Pe,{key:0,title:z.value,type:"error","show-icon":"",closable:"",onClose:n[5]||(n[5]=f=>z.value=""),size:"small",class:"compact-alert"},null,8,["title"])):O("",!0),d.value&&w.value.length===0?(v(),b("div",Qa,[s(ke,{size:24,class:"is-loading"},{default:c(()=>[s(t(U),{icon:"mdi:loading"})]),_:1}),e("span",null,l(t(i)("systemUpdates.checkingUpdates")),1)])):j.value.length===0&&!d.value?(v(),b("div",Xa,[s(t(U),{icon:"mdi:check-circle-outline",width:"48"}),e("div",Ja,[e("h4",null,l(t(i)("systemUpdates.systemUpToDate")),1),e("p",null,l(ae.value),1),s(p,{type:"primary",size:"small",onClick:n[6]||(n[6]=f=>ce(!0))},{default:c(()=>[k(l(t(i)("systemUpdates.checkAgain")),1)]),_:1})])])):(v(),b("div",Ya,[(v(!0),b(me,null,pe(L.value,f=>(v(),b("div",{key:f.name,class:we(["update-item",{selected:be(f),installing:fe(f.name).progress>0,security:g(f)==="critical"}])},[e("div",Za,[s(Le,{"model-value":be(f),onChange:ue=>xe(f),size:"small"},null,8,["model-value","onChange"])]),e("div",el,[s(ke,{size:20,color:ve(g(f))},{default:c(()=>[s(t(U),{icon:N(f.name)},null,8,["icon"])]),_:2},1032,["color"])]),e("div",tl,[e("div",sl,[e("div",al,[e("span",ll,l(f.name),1),s(Ve,{priority:g(f),size:"small"},null,8,["priority"]),e("span",nl,[k(l(f.current_version)+" ",1),s(t(U),{icon:"mdi:arrow-right-thin",width:"12"}),e("strong",null,l(f.new_version),1)])]),e("div",ol,[s(at,{status:fe(f.name),onRetry:ue=>ze(f.name),compact:""},null,8,["status","onRetry"]),e("div",il,[f.changelog?(v(),Y(p,{key:0,size:"small",text:"",onClick:ue=>Ae(f),class:"mini-btn"},{default:c(()=>[s(t(U),{icon:"mdi:text-box-outline",width:"12"})]),_:2},1032,["onClick"])):O("",!0),s(p,{size:"small",text:"",onClick:ue=>Te(f),class:"mini-btn"},{default:c(()=>[s(t(U),{icon:"mdi:information-outline",width:"12"})]),_:2},1032,["onClick"]),s(p,{size:"small",type:"success",onClick:ue=>ge(f),loading:fe(f.name).progress>0,disabled:m.value,class:"mini-btn"},{default:c(()=>[s(t(U),{icon:"mdi:package-down",width:"12"})]),_:2},1032,["onClick","loading","disabled"])])])]),e("div",dl,[e("span",cl,l(le(f.description)),1),e("span",rl,[s(He,{size:"mini",effect:"plain"},{default:c(()=>[k(l(he(f.name)),1)]),_:2},1024),f.size?(v(),b("span",ul,l(Z(f.size)),1)):O("",!0)])])])],2))),128))])),!d.value&&j.value.length>0?(v(),b("div",ml,[s(Re,{"current-page":B.value,"onUpdate:currentPage":n[7]||(n[7]=f=>B.value=f),"page-size":h.value,"onUpdate:pageSize":n[8]||(n[8]=f=>h.value=f),total:j.value.length,"page-sizes":[10,20,30],layout:"total, sizes, prev, pager, next",size:"small",onCurrentChange:Be,onSizeChange:Ee},null,8,["current-page","page-size","total"])])):O("",!0)]),_:1}),s(ts,{modelValue:T.value,"onUpdate:modelValue":n[9]||(n[9]=f=>T.value=f),update:A.value,onInstall:n[10]||(n[10]=f=>ge(A.value))},null,8,["modelValue","update"]),s(va,{modelValue:H.value,"onUpdate:modelValue":n[11]||(n[11]=f=>H.value=f),settings:Q.value,onSave:Oe},null,8,["modelValue","settings"])])}}},hl=se(pl,[["__scopeId","data-v-3c72484e"]]);export{hl as default};
