import{_ as F,r as n,b as u,h as c,e as o,w as s,g as i,d as b,f as a,t as C,m,i as x,v as P,x as U}from"./index-naspanel.js";const $={key:0,class:"step-content"},q={key:1,class:"step-content"},O={class:"current-step"},T={class:"log-output"},j={key:2,class:"step-content"},z={__name:"DockerInstall",props:{visible:Boolean},emits:["update:visible","installed"],setup(w,{emit:S}){const D=w,f=S,t=n(0),g=n(0),p=n(""),V=n(""),v=n(""),d=n(""),r=n(!1),k=n(!1),h=async()=>{t.value=1,r.value=!0,d.value="",v.value="",k.value=!1;try{const l=await P.post("/services/docker/install");v.value=l.data.output,g.value=100,p.value="success",k.value=!0,t.value=2}catch(l){d.value=l.response?.data?.error||"Installation failed",v.value=l.response?.data?.details||l.message,p.value="exception",t.value=2}finally{r.value=!1}},N=()=>{t.value=0,g.value=0,p.value="",d.value=""},G=()=>{f("installed"),f("update:visible",!1)},M=l=>{if(r.value){U.warning("Installation in progress. Please wait or cancel the operation.");return}l(),f("update:visible",!1)};return(l,e)=>{const y=u("el-step"),R=u("el-steps"),A=u("el-progress"),_=u("el-button"),I=u("el-result"),E=u("el-dialog");return o(),c(E,{"model-value":D.visible,"onUpdate:modelValue":e[1]||(e[1]=B=>l.$emit("update:visible",B)),title:"Install Docker",width:"50%","before-close":M},{footer:s(()=>[t.value>0&&t.value<2&&!r.value?(o(),c(_,{key:0,onClick:e[0]||(e[0]=B=>t.value--)},{default:s(()=>e[5]||(e[5]=[m(" Back ")])),_:1,__:[5]})):x("",!0),t.value===0?(o(),c(_,{key:1,type:"primary",onClick:h,loading:r.value},{default:s(()=>e[6]||(e[6]=[m(" Begin Installation ")])),_:1,__:[6]},8,["loading"])):x("",!0)]),default:s(()=>[i(R,{active:t.value,"finish-status":"success","align-center":""},{default:s(()=>[i(y,{title:"Preparation"}),i(y,{title:"Installation"}),i(y,{title:"Completion"})]),_:1},8,["active"]),t.value===0?(o(),b("div",$,e[2]||(e[2]=[a("h3",null,"System Requirements",-1),a("ul",null,[a("li",null,"Ubuntu 20.04/22.04 or Debian 10/11"),a("li",null,"64-bit architecture"),a("li",null,"Minimum 2GB RAM (4GB recommended)"),a("li",null,"At least 10GB free disk space")],-1)]))):t.value===1?(o(),b("div",q,[i(A,{percentage:g.value,status:p.value},null,8,["percentage","status"]),a("div",O,[a("h4",null,C(V.value),1),a("pre",T,C(v.value),1)])])):(o(),b("div",j,[k.value?(o(),c(I,{key:0,icon:"success",title:"Installation Complete"},{extra:s(()=>[i(_,{type:"primary",onClick:G},{default:s(()=>e[3]||(e[3]=[m(" Finish ")])),_:1,__:[3]})]),_:1})):(o(),c(I,{key:1,icon:"error",title:"Installation Failed","sub-title":d.value},{extra:s(()=>[i(_,{type:"primary",onClick:N},{default:s(()=>e[4]||(e[4]=[m(" Retry ")])),_:1,__:[4]})]),_:1},8,["sub-title"]))]))]),_:1},8,["model-value"])}}},J=F(z,[["__scopeId","data-v-62dac4d5"]]);export{J as default};
