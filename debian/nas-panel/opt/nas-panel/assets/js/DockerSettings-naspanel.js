import{_ as T,u as N,r as w,o as O,b,d as $,e as g,g as e,w as s,f as n,k as c,I as m,t as v,m as E,h,n as p,F as S,l as M,v as F,x as P}from"./index-naspanel.js";const W={class:"card-header"},G={class:"header-title"},H={class:"header-actions"},J={class:"settings-grid"},K={class:"settings-column"},Q={class:"settings-group"},X={class:"group-title"},Y={class:"form-items"},Z={class:"settings-group"},ee={class:"group-title"},le={class:"form-items"},ae={class:"settings-column"},oe={class:"settings-group"},se={class:"group-title"},te={class:"switch-grid"},ne={class:"settings-group"},de={class:"group-title"},re={class:"form-items"},ie={class:"settings-column"},ue={class:"settings-group"},ce={class:"group-title"},me={class:"form-items"},pe={class:"settings-group"},ve={class:"group-title"},be={class:"form-items"},ge={class:"settings-group"},fe={class:"group-title"},ke={class:"switch-grid"},_e={__name:"DockerSettings",props:{theme:{type:String,default:"light",validator:x=>["light","dark","system"].includes(x)}},emits:["save"],setup(x,{emit:he}){const{t:D}=N(),d=w(!1),L=()=>{const l=localStorage.getItem("darkMode"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;l!==null?d.value=l==="true":d.value=t,d.value?document.body.classList.add("dark"):document.body.classList.remove("dark")},A=()=>{d.value=!d.value,localStorage.setItem("darkMode",d.value.toString()),d.value?document.body.classList.add("dark"):document.body.classList.remove("dark")},o=w({daemonPort:2375,hosts:["tcp://0.0.0.0:2375","unix:///var/run/docker.sock"],ipv6Enabled:!1,loggingDriver:"json-file",logLevel:"debug",maxConcurrentDownloads:3,maxConcurrentUploads:5,maxDownloadAttempts:5,dataRoot:"/var/lib/docker",containerd:"/run/containerd/containerd.sock",experimental:!1,debug:!0,liveRestore:!0,iptables:!0,ip6tables:!1,ipForward:!0,ipMasq:!0,dns:["8.8.8.8","8.8.4.4"],dnsSearch:["localdomain"],tls:!1,defaultAddressPools:[{base:"172.30.0.0/16",size:24},{base:"172.31.0.0/16",size:24}],logOpts:{"cache-disabled":"false","cache-max-file":"5","cache-max-size":"20m","cache-compress":"true",env:"os,customer",labels:"somelabel","max-file":"5","max-size":"10m"}}),R=w(!0),y=w(!1),U=async()=>{try{R.value=!0;const l=await F.get("/services/docker/config");q(l.data)}catch(l){P.error(D("docker.messages.loadError")),console.error("Error loading Docker config:",l)}finally{R.value=!1}},q=l=>{o.value={daemonPort:l.daemonPort||2375,hosts:l.hosts||["tcp://0.0.0.0:2375","unix:///var/run/docker.sock"],ipv6Enabled:l.ipv6Enabled||!1,loggingDriver:l.loggingDriver||"json-file",logLevel:l.logLevel||"debug",maxConcurrentDownloads:l.maxConcurrentDownloads||3,maxConcurrentUploads:l.maxConcurrentUploads||5,maxDownloadAttempts:l.maxDownloadAttempts||5,dataRoot:l.dataRoot||"/var/lib/docker",containerd:l.containerd||"/run/containerd/containerd.sock",experimental:l.experimental||!1,debug:l.debug!==void 0?l.debug:!0,liveRestore:l.liveRestore!==void 0?l.liveRestore:!0,iptables:l.iptables!==void 0?l.iptables:!0,ip6tables:l.ip6tables||!1,ipForward:l.ipForward!==void 0?l.ipForward:!0,ipMasq:l.ipMasq!==void 0?l.ipMasq:!0,dns:l.dns||["8.8.8.8","8.8.4.4"],dnsSearch:l.dnsSearch||["localdomain"],tls:l.tls||!1,defaultAddressPools:l.defaultAddressPools||[{base:"172.30.0.0/16",size:24},{base:"172.31.0.0/16",size:24}],logOpts:l.logOpts||{"cache-disabled":"false","cache-max-file":"5","cache-max-size":"20m","cache-compress":"true",env:"os,customer",labels:"somelabel","max-file":"5","max-size":"10m"}}},j=async()=>{try{y.value=!0,await F.post("/services/docker/config",o.value),P.success(D("docker.messages.saveSuccess")),await U()}catch(l){P.error(D("docker.messages.saveError")),console.error("Error saving Docker config:",l)}finally{y.value=!1}},I=async()=>{await U()};return O(()=>{L(),U()}),(l,t)=>{const u=b("el-icon"),C=b("el-button"),V=b("el-input-number"),r=b("el-form-item"),i=b("el-option"),k=b("el-select"),z=b("el-input"),f=b("el-switch"),B=b("el-card");return g(),$("div",{class:p(["modern-docker-settings",{dark:d.value}])},[e(B,{class:"settings-card",shadow:"never"},{default:s(()=>[n("div",W,[n("div",G,[e(u,{class:"header-icon"},{default:s(()=>[e(c(m),{icon:"mdi:docker"})]),_:1}),n("h2",null,v(l.$t("docker.settings.title")),1)]),n("div",H,[e(C,{type:"primary",onClick:j,loading:y.value,size:"large",round:""},{icon:s(()=>[e(u,null,{default:s(()=>[e(c(m),{icon:"mdi:content-save"})]),_:1})]),default:s(()=>[E(" "+v(l.$t("common.save")),1)]),_:1},8,["loading"]),e(C,{onClick:I,size:"large",round:""},{icon:s(()=>[e(u,null,{default:s(()=>[e(c(m),{icon:"mdi:refresh"})]),_:1})]),default:s(()=>[E(" "+v(l.$t("common.reset")),1)]),_:1}),e(C,{onClick:A,size:"large",circle:"",class:"theme-toggle"},{icon:s(()=>[d.value?(g(),h(u,{key:0},{default:s(()=>[e(c(m),{icon:"mdi:weather-sunny"})]),_:1})):(g(),h(u,{key:1},{default:s(()=>[e(c(m),{icon:"mdi:weather-night"})]),_:1}))]),_:1})])]),n("div",J,[n("div",K,[n("div",Q,[n("h3",X,[e(u,null,{default:s(()=>[e(c(m),{icon:"mdi:connection"})]),_:1}),n("span",null,v(l.$t("docker.settings.connection")),1)]),n("div",Y,[e(r,{label:l.$t("docker.settings.daemonPort"),"label-position":"top"},{default:s(()=>[e(V,{modelValue:o.value.daemonPort,"onUpdate:modelValue":t[0]||(t[0]=a=>o.value.daemonPort=a),min:1,max:65535,"controls-position":"right",class:p({"dark-input":d.value})},null,8,["modelValue","class"])]),_:1},8,["label"]),e(r,{label:l.$t("docker.settings.hosts"),"label-position":"top"},{default:s(()=>[e(k,{modelValue:o.value.hosts,"onUpdate:modelValue":t[1]||(t[1]=a=>o.value.hosts=a),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:l.$t("docker.settings.hostsPlaceholder"),class:p({"dark-select":d.value})},{default:s(()=>[(g(!0),$(S,null,M(o.value.hosts,(a,_)=>(g(),h(i,{key:_,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","class"])]),_:1},8,["label"])])]),n("div",Z,[n("h3",ee,[e(u,null,{default:s(()=>[e(c(m),{icon:"mdi:harddisk"})]),_:1}),n("span",null,v(l.$t("docker.settings.storage")),1)]),n("div",le,[e(r,{label:l.$t("docker.settings.dataRoot"),"label-position":"top"},{default:s(()=>[e(z,{modelValue:o.value.dataRoot,"onUpdate:modelValue":t[2]||(t[2]=a=>o.value.dataRoot=a),placeholder:"/var/lib/docker",class:p({"dark-input":d.value})},null,8,["modelValue","class"])]),_:1},8,["label"]),e(r,{label:l.$t("docker.settings.containerd"),"label-position":"top"},{default:s(()=>[e(z,{modelValue:o.value.containerd,"onUpdate:modelValue":t[3]||(t[3]=a=>o.value.containerd=a),placeholder:"/run/containerd/containerd.sock",class:p({"dark-input":d.value})},null,8,["modelValue","class"])]),_:1},8,["label"])])])]),n("div",ae,[n("div",oe,[n("h3",se,[e(u,null,{default:s(()=>[e(c(m),{icon:"mdi:network"})]),_:1}),n("span",null,v(l.$t("docker.settings.network")),1)]),n("div",te,[e(r,{label:l.$t("docker.settings.ipv6Enabled"),"label-position":"top"},{default:s(()=>[e(f,{modelValue:o.value.ipv6Enabled,"onUpdate:modelValue":t[4]||(t[4]=a=>o.value.ipv6Enabled=a)},null,8,["modelValue"])]),_:1},8,["label"]),e(r,{label:l.$t("docker.settings.ipTables"),"label-position":"top"},{default:s(()=>[e(f,{modelValue:o.value.iptables,"onUpdate:modelValue":t[5]||(t[5]=a=>o.value.iptables=a)},null,8,["modelValue"])]),_:1},8,["label"]),e(r,{label:l.$t("docker.settings.ip6Tables"),"label-position":"top"},{default:s(()=>[e(f,{modelValue:o.value.ip6tables,"onUpdate:modelValue":t[6]||(t[6]=a=>o.value.ip6tables=a)},null,8,["modelValue"])]),_:1},8,["label"]),e(r,{label:l.$t("docker.settings.ipForward"),"label-position":"top"},{default:s(()=>[e(f,{modelValue:o.value.ipForward,"onUpdate:modelValue":t[7]||(t[7]=a=>o.value.ipForward=a)},null,8,["modelValue"])]),_:1},8,["label"]),e(r,{label:l.$t("docker.settings.ipMasq"),"label-position":"top"},{default:s(()=>[e(f,{modelValue:o.value.ipMasq,"onUpdate:modelValue":t[8]||(t[8]=a=>o.value.ipMasq=a)},null,8,["modelValue"])]),_:1},8,["label"])])]),n("div",ne,[n("h3",de,[e(u,null,{default:s(()=>[e(c(m),{icon:"mdi:download"})]),_:1}),n("span",null,v(l.$t("docker.settings.transfer")),1)]),n("div",re,[e(r,{label:l.$t("docker.settings.maxConcurrentDownloads"),"label-position":"top"},{default:s(()=>[e(V,{modelValue:o.value.maxConcurrentDownloads,"onUpdate:modelValue":t[9]||(t[9]=a=>o.value.maxConcurrentDownloads=a),min:1,max:10,"controls-position":"right",class:p({"dark-input":d.value})},null,8,["modelValue","class"])]),_:1},8,["label"]),e(r,{label:l.$t("docker.settings.maxConcurrentUploads"),"label-position":"top"},{default:s(()=>[e(V,{modelValue:o.value.maxConcurrentUploads,"onUpdate:modelValue":t[10]||(t[10]=a=>o.value.maxConcurrentUploads=a),min:1,max:10,"controls-position":"right",class:p({"dark-input":d.value})},null,8,["modelValue","class"])]),_:1},8,["label"]),e(r,{label:l.$t("docker.settings.maxDownloadAttempts"),"label-position":"top"},{default:s(()=>[e(V,{modelValue:o.value.maxDownloadAttempts,"onUpdate:modelValue":t[11]||(t[11]=a=>o.value.maxDownloadAttempts=a),min:1,max:10,"controls-position":"right",class:p({"dark-input":d.value})},null,8,["modelValue","class"])]),_:1},8,["label"])])])]),n("div",ie,[n("div",ue,[n("h3",ce,[e(u,null,{default:s(()=>[e(c(m),{icon:"mdi:dns"})]),_:1}),n("span",null,v(l.$t("docker.settings.dns")),1)]),n("div",me,[e(r,{label:l.$t("docker.settings.dnsServers"),"label-position":"top"},{default:s(()=>[e(k,{modelValue:o.value.dns,"onUpdate:modelValue":t[12]||(t[12]=a=>o.value.dns=a),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:l.$t("docker.settings.dnsPlaceholder"),class:p({"dark-select":d.value})},{default:s(()=>[(g(!0),$(S,null,M(o.value.dns,(a,_)=>(g(),h(i,{key:_,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","class"])]),_:1},8,["label"]),e(r,{label:l.$t("docker.settings.dnsSearch"),"label-position":"top"},{default:s(()=>[e(k,{modelValue:o.value.dnsSearch,"onUpdate:modelValue":t[13]||(t[13]=a=>o.value.dnsSearch=a),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:l.$t("docker.settings.dnsSearchPlaceholder"),class:p({"dark-select":d.value})},{default:s(()=>[(g(!0),$(S,null,M(o.value.dnsSearch,(a,_)=>(g(),h(i,{key:_,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","class"])]),_:1},8,["label"])])]),n("div",pe,[n("h3",ve,[e(u,null,{default:s(()=>[e(c(m),{icon:"mdi:console-line"})]),_:1}),n("span",null,v(l.$t("docker.settings.logging")),1)]),n("div",be,[e(r,{label:l.$t("docker.settings.loggingDriver"),"label-position":"top"},{default:s(()=>[e(k,{modelValue:o.value.loggingDriver,"onUpdate:modelValue":t[14]||(t[14]=a=>o.value.loggingDriver=a),class:p({"dark-select":d.value})},{default:s(()=>[e(i,{label:"json-file",value:"json-file"}),e(i,{label:"syslog",value:"syslog"}),e(i,{label:"journald",value:"journald"}),e(i,{label:"gelf",value:"gelf"}),e(i,{label:"fluentd",value:"fluentd"})]),_:1},8,["modelValue","class"])]),_:1},8,["label"]),e(r,{label:l.$t("docker.settings.logLevel"),"label-position":"top"},{default:s(()=>[e(k,{modelValue:o.value.logLevel,"onUpdate:modelValue":t[15]||(t[15]=a=>o.value.logLevel=a),class:p({"dark-select":d.value})},{default:s(()=>[e(i,{label:"debug",value:"debug"}),e(i,{label:"info",value:"info"}),e(i,{label:"warn",value:"warn"}),e(i,{label:"error",value:"error"}),e(i,{label:"fatal",value:"fatal"})]),_:1},8,["modelValue","class"])]),_:1},8,["label"])])]),n("div",ge,[n("h3",fe,[e(u,null,{default:s(()=>[e(c(m),{icon:"mdi:tune"})]),_:1}),n("span",null,v(l.$t("docker.settings.advanced")),1)]),n("div",ke,[e(r,{label:l.$t("docker.settings.experimental"),"label-position":"top"},{default:s(()=>[e(f,{modelValue:o.value.experimental,"onUpdate:modelValue":t[16]||(t[16]=a=>o.value.experimental=a)},null,8,["modelValue"])]),_:1},8,["label"]),e(r,{label:l.$t("docker.settings.debug"),"label-position":"top"},{default:s(()=>[e(f,{modelValue:o.value.debug,"onUpdate:modelValue":t[17]||(t[17]=a=>o.value.debug=a)},null,8,["modelValue"])]),_:1},8,["label"]),e(r,{label:l.$t("docker.settings.liveRestore"),"label-position":"top"},{default:s(()=>[e(f,{modelValue:o.value.liveRestore,"onUpdate:modelValue":t[18]||(t[18]=a=>o.value.liveRestore=a)},null,8,["modelValue"])]),_:1},8,["label"])])])])])]),_:1})],2)}}},we=T(_e,[["__scopeId","data-v-241410c7"]]);export{we as default};
