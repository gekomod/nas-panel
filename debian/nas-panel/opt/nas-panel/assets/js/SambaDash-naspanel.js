import{_ as K,r as S,D as J,o as G,v as $,E as x,b,d as _,e as y,f as e,g as t,i as U,k as r,I as d,w as l,h as H,F as M,l as X,t as c,m as T,n as P,C as ae,x as A,z as ne,a as le,c as Q}from"./index-naspanel.js";const oe={class:"samba-shares-modern"},ie={class:"section-header"},re={class:"header-left"},de={class:"title-wrapper"},ue={class:"title-icon"},ce={key:0,class:"status-alert"},me={key:0,class:"empty-state"},ve={class:"empty-illustration"},pe={key:1,class:"shares-grid"},fe={class:"share-header"},ge={class:"share-icon"},we={class:"share-title"},he={class:"share-tags"},be={class:"share-actions"},ye={class:"share-content"},_e={class:"share-info"},ke={class:"info-item"},$e={class:"info-value"},ze={key:0,class:"info-item"},Se={class:"info-value"},Ue={class:"share-footer"},Ve={class:"footer-actions"},Ce={class:"dialog-content"},Be={class:"permission-toggle"},je={class:"toggle-icon"},Oe={class:"toggle-icon"},Re={class:"dialog-footer"},Ae={__name:"SambaShares",props:{serviceStatus:{type:Object,required:!0}},emits:["refresh-status"],setup(n,{emit:m}){const o=n,p=m,i=S([]),V=S(!1),z=S(!1),C=S(null),D=S(!1),k=S(null),u=S({name:"",path:"",comment:"",readOnly:!1}),s={name:[{required:!0,message:"Nazwa jest wymagana",trigger:"blur"},{min:1,max:32,message:"Nazwa musi mieć 1-32 znaków",trigger:"blur"},{pattern:/^[a-zA-Z0-9_-]+$/,message:"Tylko litery, cyfry, myślniki i podkreślenia",trigger:"blur"}],path:[{required:!0,message:"Ścieżka jest wymagana",trigger:"blur"},{pattern:/^\/.+/,message:"Ścieżka musi zaczynać się od /",trigger:"blur"}]};J(()=>o.serviceStatus.running,g=>{g?L():i.value=[]}),G(()=>{o.serviceStatus.running&&L()});async function L(){V.value=!0;try{const g=await $.get("/services/samba/shares");if(g.data&&Array.isArray(g.data.data))i.value=g.data.data;else throw new Error("Nieprawidłowy format danych")}catch(g){console.error("Błąd ładowania udostępnień:",g),x.error({title:"Błąd ładowania",message:"Nie udało się załadować listy udostępnień",position:"bottom-right"})}finally{V.value=!1}}function f(g){C.value=g,u.value={...g},z.value=!0}async function h(){if(!(!k.value||!await k.value.validate())){D.value=!0;try{C.value?(await $.put(`/services/samba/shares/${C.value.name}`,u.value),x.success({title:"Sukces",message:"Udostępnienie zaktualizowane",position:"bottom-right"})):(await $.post("/services/samba/shares",u.value),x.success({title:"Sukces",message:"Udostępnienie utworzone",position:"bottom-right"})),z.value=!1,j(),await L(),p("refresh-status")}catch(a){x.error({title:"Błąd",message:a.response?.data?.error||"Błąd podczas zapisywania",position:"bottom-right"})}finally{D.value=!1}}}function j(){u.value={name:"",path:"",comment:"",readOnly:!1},C.value=null,k.value&&k.value.resetFields()}async function B(g){try{await ae.confirm(`Czy na pewno chcesz usunąć udostępnienie "${g.name}"?`,"Potwierdzenie usunięcia",{confirmButtonText:"Usuń",cancelButtonText:"Anuluj",type:"warning",confirmButtonClass:"el-button--danger",customClass:"modern-confirm",beforeClose:async(a,R,E)=>{if(a==="confirm"){R.confirmButtonLoading=!0;try{await $.delete(`/services/samba/shares/${encodeURIComponent(g.name)}`),x.success({title:"Usunięto",message:"Udostępnienie zostało usunięte",position:"bottom-right"}),await L(),p("refresh-status"),E()}catch(v){x.error({title:"Błąd",message:v.response?.data?.error||"Błąd podczas usuwania",position:"bottom-right"}),R.confirmButtonLoading=!1}}else E()}})}catch{}}function O(g){navigator.clipboard.writeText(g.path),A.success("Ścieżka skopiowana do schowka")}function W(g){x.info({title:"Testowanie",message:`Rozpoczynam test udostępnienia ${g.name}`,position:"bottom-right"})}return J(z,g=>{g||ne(()=>j())}),(g,a)=>{const R=b("el-button"),E=b("el-tag"),v=b("el-dropdown-item"),Y=b("el-dropdown-menu"),ee=b("el-dropdown"),F=b("el-input"),Z=b("el-form-item"),te=b("el-form"),se=b("el-dialog");return y(),_("div",oe,[e("div",ie,[e("div",re,[e("div",de,[e("div",ue,[t(r(d),{icon:"mdi:folder-multiple",width:"24"})]),a[9]||(a[9]=e("div",null,[e("h2",null,"Udostępnienia"),e("p",{class:"subtitle"},"Zarządzaj udostępnieniami sieciowymi")],-1))]),n.serviceStatus.running?U("",!0):(y(),_("div",ce,[t(r(d),{icon:"mdi:alert-circle",width:"16"}),a[10]||(a[10]=e("span",null,"Usługa Samba jest wyłączona",-1))]))]),t(R,{type:"primary",onClick:a[0]||(a[0]=w=>z.value=!0),disabled:!n.serviceStatus.running,class:"create-btn"},{default:l(()=>[t(r(d),{icon:"mdi:plus-circle",width:"18"}),a[11]||(a[11]=e("span",null,"Nowe udostępnienie",-1))]),_:1,__:[11]},8,["disabled"])]),!V.value&&i.value.length===0?(y(),_("div",me,[e("div",ve,[t(r(d),{icon:"mdi:folder-network-outline",width:"64"})]),a[13]||(a[13]=e("h3",null,"Brak udostępnień",-1)),a[14]||(a[14]=e("p",null,"Dodaj swoje pierwsze udostępnienie sieciowe",-1)),n.serviceStatus.running?(y(),H(R,{key:0,type:"primary",onClick:a[1]||(a[1]=w=>z.value=!0),class:"empty-action"},{default:l(()=>[t(r(d),{icon:"mdi:plus",width:"16"}),a[12]||(a[12]=e("span",null,"Dodaj udostępnienie",-1))]),_:1,__:[12]})):U("",!0)])):(y(),_("div",pe,[(y(!0),_(M,null,X(i.value,w=>(y(),_("div",{key:w.name,class:"share-card"},[e("div",fe,[e("div",ge,[t(r(d),{icon:"mdi:folder-shared",width:"20"})]),e("div",we,[e("h3",null,c(w.name),1),e("div",he,[t(E,{type:w.readOnly?"warning":"success",size:"small",effect:"plain"},{default:l(()=>[T(c(w.readOnly?"Tylko odczyt":"Odczyt/Zapis"),1)]),_:2},1032,["type"])])]),e("div",be,[t(ee,{trigger:"click"},{dropdown:l(()=>[t(Y,null,{default:l(()=>[t(v,{onClick:q=>f(w)},{default:l(()=>[t(r(d),{icon:"mdi:pencil",width:"16"}),a[15]||(a[15]=e("span",null,"Edytuj",-1))]),_:2,__:[15]},1032,["onClick"]),t(v,{onClick:q=>B(w),style:{color:"var(--el-color-danger)"}},{default:l(()=>[t(r(d),{icon:"mdi:trash-can-outline",width:"16"}),a[16]||(a[16]=e("span",null,"Usuń",-1))]),_:2,__:[16]},1032,["onClick"])]),_:2},1024)]),default:l(()=>[t(R,{text:"",circle:""},{default:l(()=>[t(r(d),{icon:"mdi:dots-vertical",width:"20"})]),_:1})]),_:2},1024)])]),e("div",ye,[e("div",_e,[e("div",ke,[t(r(d),{icon:"mdi:folder",width:"16"}),a[17]||(a[17]=e("span",{class:"info-label"},"Ścieżka:",-1)),e("code",$e,c(w.path),1)]),w.comment?(y(),_("div",ze,[t(r(d),{icon:"mdi:comment-text",width:"16"}),a[18]||(a[18]=e("span",{class:"info-label"},"Opis:",-1)),e("span",Se,c(w.comment),1)])):U("",!0)])]),e("div",Ue,[e("div",Ve,[t(R,{size:"small",text:"",onClick:q=>O(w),class:"footer-btn"},{default:l(()=>[t(r(d),{icon:"mdi:content-copy",width:"14"}),a[19]||(a[19]=e("span",null,"Kopiuj ścieżkę",-1))]),_:2,__:[19]},1032,["onClick"]),t(R,{size:"small",text:"",onClick:q=>W(w),class:"footer-btn"},{default:l(()=>[t(r(d),{icon:"mdi:test-tube",width:"14"}),a[20]||(a[20]=e("span",null,"Testuj",-1))]),_:2,__:[20]},1032,["onClick"])])])]))),128))])),t(se,{modelValue:z.value,"onUpdate:modelValue":a[8]||(a[8]=w=>z.value=w),title:C.value?"Edytuj udostępnienie":"Nowe udostępnienie",width:"500px",class:"modern-dialog"},{footer:l(()=>[e("div",Re,[t(R,{onClick:a[7]||(a[7]=w=>z.value=!1)},{default:l(()=>a[25]||(a[25]=[T(" Anuluj ")])),_:1,__:[25]}),t(R,{type:"primary",onClick:h,loading:D.value,class:"save-btn"},{default:l(()=>[t(r(d),{icon:"mdi:check",width:"16"}),e("span",null,c(C.value?"Zapisz zmiany":"Utwórz udostępnienie"),1)]),_:1},8,["loading"])])]),default:l(()=>[e("div",Ce,[t(te,{model:u.value,rules:s,ref_key:"shareFormRef",ref:k,"label-position":"top"},{default:l(()=>[t(Z,{label:"Nazwa udostępnienia",prop:"name"},{default:l(()=>[t(F,{modelValue:u.value.name,"onUpdate:modelValue":a[2]||(a[2]=w=>u.value.name=w),placeholder:"np. documents",size:"large"},{prefix:l(()=>[t(r(d),{icon:"mdi:tag"})]),_:1},8,["modelValue"]),a[21]||(a[21]=e("div",{class:"form-hint"},"Tylko litery, cyfry, myślniki i podkreślenia",-1))]),_:1,__:[21]}),t(Z,{label:"Ścieżka folderu",prop:"path"},{default:l(()=>[t(F,{modelValue:u.value.path,"onUpdate:modelValue":a[3]||(a[3]=w=>u.value.path=w),placeholder:"/ścieżka/do/folderu",size:"large"},{prefix:l(()=>[t(r(d),{icon:"mdi:folder"})]),_:1},8,["modelValue"]),a[22]||(a[22]=e("div",{class:"form-hint"},"Absolutna ścieżka do folderu",-1))]),_:1,__:[22]}),t(Z,{label:"Opis (opcjonalnie)"},{default:l(()=>[t(F,{modelValue:u.value.comment,"onUpdate:modelValue":a[4]||(a[4]=w=>u.value.comment=w),type:"textarea",rows:3,placeholder:"Krótki opis udostępnienia",maxlength:"255","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(Z,{label:"Uprawnienia"},{default:l(()=>[e("div",Be,[e("div",{class:P(["toggle-option",{active:!u.value.readOnly}]),onClick:a[5]||(a[5]=w=>u.value.readOnly=!1)},[e("div",je,[t(r(d),{icon:"mdi:pencil",width:"20"})]),a[23]||(a[23]=e("div",{class:"toggle-content"},[e("div",{class:"toggle-title"},"Odczyt/Zapis"),e("div",{class:"toggle-desc"},"Użytkownicy mogą edytować pliki")],-1))],2),e("div",{class:P(["toggle-option",{active:u.value.readOnly}]),onClick:a[6]||(a[6]=w=>u.value.readOnly=!0)},[e("div",Oe,[t(r(d),{icon:"mdi:eye",width:"20"})]),a[24]||(a[24]=e("div",{class:"toggle-content"},[e("div",{class:"toggle-title"},"Tylko odczyt"),e("div",{class:"toggle-desc"},"Użytkownicy mogą tylko przeglądać")],-1))],2)])]),_:1})]),_:1},8,["model"])])]),_:1},8,["modelValue","title"])])}}},Le=K(Ae,[["__scopeId","data-v-2f829fe3"]]),I="/services/samba",N={async getShares(){try{return(await $.get(`${I}/shares`)).data}catch(n){throw console.error("Error fetching Samba shares:",n),n}},async createShare(n){try{return(await $.post(`${I}/shares`,n)).data}catch(m){throw console.error("Error creating Samba share:",m),m}},async updateShare(n,m){try{return(await $.put(`${I}/shares/${n}`,m)).data}catch(o){throw console.error("Error updating Samba share:",o),o}},async deleteShare(n){try{return(await $.delete(`${I}/shares/${n}`)).data}catch(m){throw console.error("Error deleting Samba share:",m),m}},async getSettings(){try{return(await $.get(`${I}/settings`)).data}catch(n){throw console.error("Error fetching Samba settings:",n),n}},async updateSettings(n){try{return(await $.put(`${I}/settings`,n)).data}catch(m){throw console.error("Error updating Samba settings:",m),m}},async restartService(){try{return(await $.post(`${I}/restart`)).data}catch(n){throw console.error("Error restarting Samba service:",n),n}},async getHomeDirSettings(){try{return(await $.get(`${I}/settings/homedirs`)).data}catch(n){throw console.error("Error getting home dir settings:",n),n}},async updateHomeDirSettings(n){try{const m={enabled:!!n.enabled,enableUserHomes:!!n.enableUserHomes,browsable:n.browsable!==!1,inheritAcls:n.inheritAcls!==!1,inheritPermissions:!!n.inheritPermissions,enableRecycleBin:n.enableRecycleBin!==!1,followSymlinks:!!n.followSymlinks,wideLinks:!!n.wideLinks};return(await $.post(`${I}/settings/homedirs`,m)).data}catch(m){throw console.error("Error updating home dir settings:",m),m}}},Te={class:"samba-settings"},De={class:"section-header"},Ie={class:"tab-content"},Pe={class:"switch-wrapper"},Ee={class:"log-level-wrapper"},xe={class:"tab-content"},Ne={class:"switch-wrapper"},Ze={class:"switch-wrapper"},He={class:"switch-wrapper"},Ke={class:"switch-wrapper"},We={class:"switch-wrapper"},Fe={class:"switch-wrapper"},qe={class:"switch-wrapper"},Ge={class:"switch-wrapper"},Me={class:"action-buttons"},Je={__name:"SambaSettings",props:{serviceStatus:{type:Object,required:!0}},emits:["service-restarted"],setup(n,{emit:m}){const o=m,p=S({workgroup:"WORKGROUP",security:"user",interfaces:"",bindInterfacesOnly:!1,logLevel:1}),i=S({enabled:!1,enableUserHomes:!1,browsable:!0,inheritAcls:!0,inheritPermissions:!1,enableRecycleBin:!0,followSymlinks:!1,wideLinks:!1}),V=S(!1),z=S(!1);G(()=>{C()});async function C(){try{const[u,s]=await Promise.all([N.getSettings(),N.getHomeDirSettings()]);p.value={workgroup:"WORKGROUP",security:"user",interfaces:"",bindInterfacesOnly:!1,logLevel:1,...u.data},i.value={enabled:!1,enableUserHomes:!1,browsable:!0,inheritAcls:!0,inheritPermissions:!1,enableRecycleBin:!0,followSymlinks:!1,wideLinks:!1,...s.data}}catch(u){A.error("Błąd ładowania ustawień: "+u.message)}}async function D(){try{V.value=!0;const u={settings:{workgroup:p.value.workgroup||"WORKGROUP",security:p.value.security||"user",interfaces:p.value.interfaces||"eth0",bindInterfacesOnly:p.value.bindInterfacesOnly!==!1,logLevel:p.value.logLevel||1}},s={enabled:i.value.enabled||!1,enableUserHomes:i.value.enableUserHomes||!1,browsable:i.value.browsable!==!1,inheritAcls:i.value.inheritAcls!==!1,inheritPermissions:i.value.inheritPermissions||!1,enableRecycleBin:i.value.enableRecycleBin!==!1,followSymlinks:i.value.followSymlinks||!1,wideLinks:i.value.wideLinks||!1};await Promise.all([N.updateSettings(u),N.updateHomeDirSettings(s)]),A.success("Ustawienia zapisane pomyślnie")}catch(u){console.error("Save settings error:",u),A.error("Błąd zapisywania ustawień: "+(u.response?.data?.error||u.message))}finally{V.value=!1}}async function k(){try{z.value=!0,await N.restartService(),A.success("Usługa zrestartowana pomyślnie"),o("service-restarted")}catch(u){A.error("Błąd restartowania usługi: "+u.message)}finally{z.value=!1}}return(u,s)=>{const L=b("el-alert"),f=b("el-input"),h=b("el-form-item"),j=b("el-option"),B=b("el-select"),O=b("el-switch"),W=b("el-input-number"),g=b("el-form"),a=b("el-tab-pane"),R=b("el-tabs"),E=b("el-button");return y(),_("div",Te,[n.serviceStatus.running?U("",!0):(y(),H(L,{key:0,title:"Usługa Samba jest wyłączona",type:"warning",closable:!1,"show-icon":"",class:"service-alert"})),e("div",De,[e("h2",null,[t(r(d),{icon:"mdi:cog",width:"24",height:"24",class:"header-icon"}),s[13]||(s[13]=e("span",null,"Ustawienia Samba",-1))])]),t(R,{type:"border-card",class:"clean-settings-tabs"},{default:l(()=>[t(a,{label:"Główne"},{default:l(()=>[e("div",Ie,[t(g,{model:p.value,"label-width":"250px","label-position":"left",class:"settings-form"},{default:l(()=>[t(h,{label:"Workgroup"},{default:l(()=>[t(f,{modelValue:p.value.workgroup,"onUpdate:modelValue":s[0]||(s[0]=v=>p.value.workgroup=v),placeholder:"np. WORKGROUP"},null,8,["modelValue"])]),_:1}),t(h,{label:"Tryb bezpieczeństwa"},{default:l(()=>[t(B,{modelValue:p.value.security,"onUpdate:modelValue":s[1]||(s[1]=v=>p.value.security=v),placeholder:"Wybierz tryb bezpieczeństwa"},{default:l(()=>[t(j,{label:"User",value:"user"}),t(j,{label:"Share",value:"share"}),t(j,{label:"Domain",value:"domain"})]),_:1},8,["modelValue"])]),_:1}),t(h,{label:"Interfejsy"},{default:l(()=>[t(f,{modelValue:p.value.interfaces,"onUpdate:modelValue":s[2]||(s[2]=v=>p.value.interfaces=v),placeholder:"np. eth0, wlan0"},null,8,["modelValue"]),s[14]||(s[14]=e("div",{class:"form-hint"},"Lista interfejsów oddzielonych przecinkami",-1))]),_:1,__:[14]}),t(h,{label:"Bind tylko do interfejsów"},{default:l(()=>[e("div",Pe,[t(O,{modelValue:p.value.bindInterfacesOnly,"onUpdate:modelValue":s[3]||(s[3]=v=>p.value.bindInterfacesOnly=v)},null,8,["modelValue"]),s[15]||(s[15]=e("span",{class:"switch-description"},"Ogranicza nasłuchiwanie tylko do podanych interfejsów",-1))])]),_:1}),t(h,{label:"Poziom logowania"},{default:l(()=>[e("div",Ee,[t(W,{modelValue:p.value.logLevel,"onUpdate:modelValue":s[4]||(s[4]=v=>p.value.logLevel=v),min:0,max:10,step:1,"controls-position":"right"},null,8,["modelValue"]),s[16]||(s[16]=e("div",{class:"form-hint"},"0 - brak logów, 10 - pełne logowanie",-1))])]),_:1})]),_:1},8,["model"])])]),_:1}),t(a,{label:"Katalogi domowe"},{default:l(()=>[e("div",xe,[t(g,{model:i.value,"label-width":"300px","label-position":"left",class:"settings-form"},{default:l(()=>[t(h,{label:"Włączone"},{default:l(()=>[e("div",Ne,[t(O,{modelValue:i.value.enabled,"onUpdate:modelValue":s[5]||(s[5]=v=>i.value.enabled=v)},null,8,["modelValue"]),s[17]||(s[17]=e("div",{class:"form-hint"},"Aktywuje obsługę katalogów domowych",-1))])]),_:1}),i.value.enabled?(y(),_(M,{key:0},[t(h,{label:"Włącz katalogi domowe użytkowników"},{default:l(()=>[e("div",Ze,[t(O,{modelValue:i.value.enableUserHomes,"onUpdate:modelValue":s[6]||(s[6]=v=>i.value.enableUserHomes=v)},null,8,["modelValue"]),s[18]||(s[18]=e("div",{class:"form-hint"},"Udostępnia automatycznie katalogi domowe użytkowników",-1))])]),_:1}),t(h,{label:"Do przeglądania"},{default:l(()=>[e("div",He,[t(O,{modelValue:i.value.browsable,"onUpdate:modelValue":s[7]||(s[7]=v=>i.value.browsable=v)},null,8,["modelValue"]),s[19]||(s[19]=e("div",{class:"form-hint"},"Kontroluje widoczność udziału na liście dostępnych udziałów",-1))])]),_:1}),t(h,{label:"Dziedzicz ACL-y"},{default:l(()=>[e("div",Ke,[t(O,{modelValue:i.value.inheritAcls,"onUpdate:modelValue":s[8]||(s[8]=v=>i.value.inheritAcls=v)},null,8,["modelValue"]),s[20]||(s[20]=e("div",{class:"form-hint"},"Zapewnia honorowanie ACL-ów z katalogów nadrzędnych",-1))])]),_:1}),t(h,{label:"Dziedzicz uprawnienia"},{default:l(()=>[e("div",We,[t(O,{modelValue:i.value.inheritPermissions,"onUpdate:modelValue":s[9]||(s[9]=v=>i.value.inheritPermissions=v)},null,8,["modelValue"]),s[21]||(s[21]=e("div",{class:"form-hint"},"Nadpisuje domyślne maski uprawnień",-1))])]),_:1}),t(h,{label:"Włącz kosz"},{default:l(()=>[e("div",Fe,[t(O,{modelValue:i.value.enableRecycleBin,"onUpdate:modelValue":s[10]||(s[10]=v=>i.value.enableRecycleBin=v)},null,8,["modelValue"]),s[22]||(s[22]=e("div",{class:"form-hint"},"Tworzy kosz dla każdego użytkownika",-1))])]),_:1}),t(h,{label:"Podążaj za dowiązaniami symbolicznymi"},{default:l(()=>[e("div",qe,[t(O,{modelValue:i.value.followSymlinks,"onUpdate:modelValue":s[11]||(s[11]=v=>i.value.followSymlinks=v)},null,8,["modelValue"]),s[23]||(s[23]=e("div",{class:"form-hint"},"Zezwala na obsługę dowiązań symbolicznych",-1))])]),_:1}),i.value.followSymlinks?(y(),H(h,{key:0,label:"Szerokie linki"},{default:l(()=>[e("div",Ge,[t(O,{modelValue:i.value.wideLinks,"onUpdate:modelValue":s[12]||(s[12]=v=>i.value.wideLinks=v)},null,8,["modelValue"]),s[24]||(s[24]=e("div",{class:"form-hint"},"Zezwala na dowiązania poza katalogiem domowym",-1))])]),_:1})):U("",!0)],64)):U("",!0)]),_:1},8,["model"])])]),_:1})]),_:1}),e("div",Me,[t(E,{type:"primary",onClick:D,loading:V.value,class:"save-btn"},{default:l(()=>[t(r(d),{icon:"mdi:content-save",width:"16"}),s[25]||(s[25]=T(" Zapisz ustawienia "))]),_:1,__:[25]},8,["loading"]),t(E,{onClick:k,loading:z.value,disabled:!n.serviceStatus.running,class:"restart-btn"},{default:l(()=>[t(r(d),{icon:"mdi:restart",width:"16"}),s[26]||(s[26]=T(" Restartuj usługę "))]),_:1,__:[26]},8,["loading","disabled"])])])}}},Qe=K(Je,[["__scopeId","data-v-e429ae02"]]),Xe={class:"samba-status"},Ye={class:"status-header"},et={class:"status-cards"},tt={class:"card-icon"},st={class:"card-content"},at={class:"card-title"},nt={class:"card-subtitle"},lt={class:"status-details"},ot={class:"detail-row"},it={class:"detail-label"},rt={class:"detail-value"},dt={class:"detail-row"},ut={class:"detail-label"},ct={class:"detail-value"},mt={key:0,class:"detail-row"},vt={class:"detail-label"},pt={class:"detail-value text-danger"},ft={key:1,class:"detail-row"},gt={class:"detail-label"},wt={class:"detail-value"},ht={key:2,class:"detail-row"},bt={class:"detail-label"},yt={class:"detail-value"},_t={class:"status-actions"},kt={class:"status-info"},$t={__name:"SambaStatus",props:{status:{type:Object,required:!0}},emits:["status-changed"],setup(n,{emit:m}){const o=n,p=m;function i(){return o.status.installed?o.status.running?"status-success":"status-warning":"status-error"}function V(){return o.status.installed?o.status.running?"mdi:server-network":"mdi:server-network-off":"mdi:server-off"}function z(){return o.status.installed?o.status.running?"Samba działa":"Samba zatrzymana":"Samba nie zainstalowana"}function C(){return o.status.installed?o.status.running?"Usługa działa poprawnie":"Uruchom usługę aby aktywować udostępnienia":"Zainstaluj usługę aby rozpocząć"}function D(){return o.status.installed?o.status.running?"success":"warning":"danger"}function k(){return o.status.installed?o.status.error?"Błąd":o.status.running?"Działa":"Zatrzymana":"Nie zainstalowano"}function u(s){return s?new Date(s).toLocaleString():"—"}return(s,L)=>{const f=b("el-tag"),h=b("el-button");return y(),_("div",Xe,[e("div",Ye,[e("h3",null,[t(r(d),{icon:"mdi:server-network",width:"20",class:"header-icon"}),e("span",null,c(s.$t("samba.status.title")),1)])]),e("div",et,[e("div",{class:P(["status-card",i()])},[e("div",tt,[t(r(d),{icon:V(),width:"32"},null,8,["icon"])]),e("div",st,[e("div",at,c(z()),1),e("div",nt,c(C()),1)]),t(f,{type:D(),size:"small",class:"status-tag",effect:"dark"},{default:l(()=>[T(c(k()),1)]),_:1},8,["type"])],2),e("div",lt,[e("div",ot,[e("span",it,c(s.$t("samba.status.installed")),1),e("span",rt,[t(r(d),{icon:n.status.installed?"mdi:check-circle":"mdi:close-circle",width:"16",class:P(n.status.installed?"text-success":"text-danger")},null,8,["icon","class"]),T(" "+c(n.status.installed?s.$t("common.yes"):s.$t("common.no")),1)])]),e("div",dt,[e("span",ut,c(s.$t("samba.status.running")),1),e("span",ct,[t(r(d),{icon:n.status.running?"mdi:check-circle":"mdi:close-circle",width:"16",class:P(n.status.running?"text-success":"text-danger")},null,8,["icon","class"]),T(" "+c(n.status.running?s.$t("common.yes"):s.$t("common.no")),1)])]),n.status.error?(y(),_("div",mt,[e("span",vt,c(s.$t("samba.status.error")),1),e("span",pt,[t(r(d),{icon:"mdi:alert-circle",width:"16"}),T(" "+c(n.status.error),1)])])):U("",!0),n.status.version?(y(),_("div",ft,[e("span",gt,c(s.$t("samba.status.version")),1),e("span",wt,[t(r(d),{icon:"mdi:tag",width:"16"}),T(" "+c(n.status.version),1)])])):U("",!0),n.status.lastCheck?(y(),_("div",ht,[e("span",bt,c(s.$t("samba.status.lastCheck")),1),e("span",yt,[t(r(d),{icon:"mdi:clock-outline",width:"16"}),T(" "+c(u(n.status.lastCheck)),1)])])):U("",!0)])]),e("div",_t,[t(h,{type:"primary",onClick:L[0]||(L[0]=j=>p("status-changed")),size:"small",class:"refresh-btn",plain:""},{default:l(()=>[t(r(d),{icon:"mdi:refresh",width:"16"}),T(" "+c(s.$t("samba.status.refresh")),1)]),_:1}),e("div",kt,[t(r(d),{icon:"mdi:information",width:"16"}),e("span",null,c(s.$t("samba.status.autoRefresh")),1)])])])}}},zt=K($t,[["__scopeId","data-v-271590fb"]]),St={class:"samba-dashboard"},Ut={class:"hero-section"},Vt={class:"hero-content"},Ct={class:"hero-icon"},Bt={class:"hero-text"},jt={class:"hero-description"},Ot={class:"hero-status"},Rt={class:"quick-actions"},At={key:0,class:"install-banner"},Lt={class:"banner-content"},Tt={class:"banner-text"},Dt={class:"navigation-cards"},It=["onClick"],Pt={class:"nav-content"},Et={class:"nav-arrow"},xt={class:"tab-content-wrapper"},Nt={key:0,class:"tab-content"},Zt={key:1,class:"tab-content"},Ht={key:2,class:"tab-content"},Kt={__name:"SambaDash",setup(n){le();const m=S("shares"),o=S({installed:!1,running:!1,error:null}),p=S(!1),i=S(!1),V=S(!1),z=[{name:"shares",icon:"mdi:folder-multiple",label:"Udostępnienia",description:"Zarządzaj udostępnieniami sieciowymi"},{name:"settings",icon:"mdi:cog",label:"Ustawienia",description:"Konfiguruj ustawienia serwera"},{name:"status",icon:"mdi:chart-line",label:"Status",description:"Monitoruj stan usługi"}],C=Q(()=>o.value.installed?o.value.running?"success":"warning":"error"),D=Q(()=>o.value.installed?o.value.running?"Działa":"Zatrzymana":"Nie zainstalowano");G(()=>{k()});async function k(){try{const f=await $.get("/services/samba/status");o.value={...f.data,error:null}}catch(f){o.value={installed:!1,running:!1,error:f.response?.data?.error||"Błąd połączenia"},console.error("Status check error:",f)}}async function u(f){p.value=!0;try{await $.post("/services/samba/toggle",{action:f}),A.success(f==="start"?"Usługa uruchomiona":"Usługa zatrzymana"),await k()}catch{A.error(f==="start"?"Błąd uruchamiania":"Błąd zatrzymywania")}finally{p.value=!1}}async function s(){i.value=!0;try{await $.post("/services/samba/restart"),A.success("Usługa zrestartowana"),await k()}catch{A.error("Błąd restartowania")}finally{i.value=!1}}async function L(){V.value=!0;try{await $.post("/services/samba/install"),A.success("Instalacja rozpoczęta"),await k()}catch{A.error("Błąd instalacji")}finally{V.value=!1}}return(f,h)=>{const j=b("el-button");return y(),_("div",St,[e("div",Ut,[e("div",Vt,[e("div",Ct,[t(r(d),{icon:"mdi:server-network",width:"48"})]),e("div",Bt,[e("h1",null,c(f.$t("samba.title")),1),e("p",jt,c(f.$t("samba.description")),1)]),e("div",Ot,[e("div",{class:P(["status-badge",C.value])},[e("div",{class:P(["status-indicator",C.value])},null,2),e("span",null,c(D.value),1)],2)])]),e("div",Rt,[t(j,{type:"primary",onClick:h[0]||(h[0]=B=>u("start")),disabled:o.value.running||!o.value.installed,loading:p.value,class:"action-btn"},{default:l(()=>[t(r(d),{icon:"mdi:play",width:"18"}),e("span",null,c(f.$t("samba.actions.start")),1)]),_:1},8,["disabled","loading"]),t(j,{type:"danger",onClick:h[1]||(h[1]=B=>u("stop")),disabled:!o.value.running,loading:p.value,class:"action-btn"},{default:l(()=>[t(r(d),{icon:"mdi:stop",width:"18"}),e("span",null,c(f.$t("samba.actions.stop")),1)]),_:1},8,["disabled","loading"]),t(j,{onClick:s,disabled:!o.value.running,loading:i.value,class:"action-btn"},{default:l(()=>[t(r(d),{icon:"mdi:refresh",width:"18"}),e("span",null,c(f.$t("samba.actions.restart")),1)]),_:1},8,["disabled","loading"]),o.value.installed?U("",!0):(y(),H(j,{key:0,type:"success",onClick:L,loading:V.value,class:"action-btn install-btn"},{default:l(()=>[t(r(d),{icon:"mdi:download",width:"18"}),e("span",null,c(f.$t("samba.actions.install")),1)]),_:1},8,["loading"]))])]),o.value.installed?U("",!0):(y(),_("div",At,[e("div",Lt,[t(r(d),{icon:"mdi:alert-circle",width:"24"}),e("div",Tt,[e("h4",null,c(f.$t("samba.alerts.notInstalled.title")),1),e("p",null,c(f.$t("samba.alerts.notInstalled.message")),1)])])])),e("div",Dt,[(y(),_(M,null,X(z,B=>e("div",{key:B.name,class:P(["nav-card",{active:m.value===B.name}]),onClick:O=>m.value=B.name},[e("div",{class:P(["nav-icon",{active:m.value===B.name}])},[t(r(d),{icon:B.icon,width:"24"},null,8,["icon"])],2),e("div",Pt,[e("h3",null,c(B.label),1),e("p",null,c(B.description),1)]),e("div",Et,[t(r(d),{icon:"mdi:chevron-right",width:"20"})])],10,It)),64))]),e("div",xt,[m.value==="shares"?(y(),_("div",Nt,[t(Le,{"service-status":o.value,onRefreshStatus:k},null,8,["service-status"])])):U("",!0),m.value==="settings"?(y(),_("div",Zt,[t(Qe,{"service-status":o.value,onServiceRestarted:k},null,8,["service-status"])])):U("",!0),m.value==="status"?(y(),_("div",Ht,[t(zt,{status:o.value,onStatusChanged:k},null,8,["status"])])):U("",!0)])])}}},Ft=K(Kt,[["__scopeId","data-v-62a0b852"]]);export{Ft as default};
