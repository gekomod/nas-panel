import{_ as se,y as te,r as y,c as F,o as le,v as N,E as oe,b as h,d as m,e as v,f as e,g as s,w as l,m as c,k as i,I as n,t as r,h as I,i as k,F as ae,l as ie,n as U,x,z as ne}from"./index-naspanel.js";const re={class:"header"},de={class:"header-left"},ce={class:"header-title"},ue={class:"header-right"},ve={class:"main-content"},pe={class:"stats-section"},_e={class:"stats-grid"},fe={class:"stat-item"},me={class:"stat-icon"},ye={class:"stat-content"},he={class:"stat-value"},ge={class:"stat-item"},ke={class:"stat-icon"},we={class:"stat-content"},be={class:"stat-value"},ze={class:"stat-item"},xe={class:"stat-icon"},Ce={class:"stat-content"},Se={class:"stat-value"},Te={class:"stat-item"},Ne={class:"stat-icon"},Ie={class:"stat-content"},$e={class:"stat-value"},je={class:"stat-item"},Be={class:"stat-icon"},Le={class:"stat-content"},De={class:"stat-value"},Me={class:"stat-item"},Ae={class:"stat-icon"},We={class:"stat-content"},Pe={class:"stat-value"},Ee={class:"details-panel"},Ve={class:"viewer-header"},Fe={class:"file-info"},Ue={class:"file-meta"},He={class:"speedtest-section"},Re={class:"section-header"},Oe={class:"speedtest-content"},Ge={key:0,class:"test-start"},Ke={class:"test-info"},Ye={key:0,class:"server-selection"},qe={key:0,class:"server-list"},Je={class:"server-option"},Qe={class:"server-name"},Xe={class:"server-location"},Ze={key:1,class:"warning-text"},es={key:1,class:"test-progress"},ss={class:"progress-info"},ts={class:"progress-text"},ls={key:0,class:"progress-details"},os={key:2,class:"test-results"},as={class:"results-header"},is={key:0,class:"server-info"},ns={class:"results-grid"},rs={class:"result-item download"},ds={class:"result-icon"},cs={class:"result-content"},us={class:"result-value"},vs={class:"result-item upload"},ps={class:"result-icon"},_s={class:"result-content"},fs={class:"result-value"},ms={class:"result-item ping"},ys={class:"result-icon"},hs={class:"result-content"},gs={class:"result-value"},ks={class:"results-actions"},ws={class:"properties-section"},bs={class:"section-header"},zs={class:"properties-grid"},xs={class:"property-item"},Cs={class:"property-icon"},Ss={class:"property-content"},Ts={class:"property-value"},Ns={class:"property-item"},Is={class:"property-icon"},$s={class:"property-content"},js={class:"property-item"},Bs={class:"property-icon"},Ls={class:"property-content"},Ds={class:"property-value"},Ms={class:"property-item"},As={class:"property-icon"},Ws={class:"property-content"},Ps={class:"property-value"},Es={class:"property-item"},Vs={class:"property-icon"},Fs={class:"property-content"},Us={class:"property-value"},Hs={key:1,class:"no-ip"},Rs={class:"property-item"},Os={class:"property-icon"},Gs={class:"property-content"},Ks={class:"property-value"},Ys={__name:"Details",setup(qs){const $=te(),d=y({device:"",status:"",mac:"",mtu:1500,ipv4:{local:"",prefixlen:""},stats:{},ethtool:{},config:{}}),C=y(!1),b=y(!1),u=y(null),z=y(0),j=y(""),S=y(!1),w=y(null),B=y([]),g=y(!1),H=F(()=>g.value?"mdi:weather-sunny":"mdi:weather-night"),R=()=>{g.value=!g.value,g.value?(document.body.classList.add("dark-theme"),document.documentElement.classList.add("dark")):(document.body.classList.remove("dark-theme"),document.documentElement.classList.remove("dark")),localStorage.setItem("theme",g.value?"dark":"light")},O=async()=>{try{const o=await N.get("/network/speedtest/servers");o.data.success&&(B.value=o.data.servers)}catch(o){console.error("Failed to load speedtest servers:",o)}};le(()=>{localStorage.getItem("theme")==="dark"&&(g.value=!0,document.body.classList.add("dark-theme"),document.documentElement.classList.add("dark")),P(),O()});const T=F(()=>d.value.status?.toLowerCase()==="up"),L=o=>{if(o===0)return"0 B";const t=1024,a=["B","KB","MB","GB","TB"],_=Math.floor(Math.log(o)/Math.log(t));return parseFloat((o/Math.pow(t,_)).toFixed(2))+" "+a[_]},D=o=>!o||o==="unknown"?"N/A":typeof o=="number"?o>=1e3?`${o/1e3} Gbps`:`${o} Mbps`:o,G=()=>{const o=d.value.device?.toLowerCase()||"";return o.includes("eth")||o.includes("en")?"mdi:ethernet-cable":o.includes("wlan")||o.includes("wlp")?"mdi:wifi":o.includes("bond")?"mdi:link-variant":o.includes("br")?"mdi:bridge":o.includes("tun")||o.includes("tap")?"mdi:tunnel":"mdi:network"},K=()=>{const o=d.value.status?.toLowerCase();return o==="up"?"success":o==="down"?"danger":"info"},Y=()=>{const o=d.value.status?.toLowerCase();return o==="up"?"mdi:check-circle":o==="down"?"mdi:close-circle":"mdi:help-circle"},M=()=>{const o=d.value.ethtool?.speed;if(!o||o==="unknown")return"unknown";const t=typeof o=="string"?parseInt(o):o;return t>=1e3?"gigabit":t>=100?"fast":"normal"},A=()=>{const o=d.value.ethtool?.duplex?.toLowerCase();return o==="full"?"success":o==="half"?"warning":"info"},W=()=>{const o=d.value.ethtool?.duplex?.toLowerCase();return o==="full"?"Full Duplex":o==="half"?"Half Duplex":"Unknown"},P=async()=>{try{C.value=!0;const o=await N.get(`/network/interfaces/details/${$.params.interface}`);d.value=o.data}catch(o){console.error("Error fetching interface details:",o),oe({title:"Błąd",message:"Nie udało się załadować szczegółów interfejsu",type:"error"})}finally{C.value=!1}},E=async()=>{if(!T.value){x.warning("Interfejs musi być włączony do testu prędkości");return}try{b.value=!0,u.value=null,z.value=0;const o=w.value?w.value.id:null,t=await N.post(`/network/interfaces/details/${$.params.interface}/speedtest`,{serverId:o});if(z.value=100,t.data.success)u.value=t.data.data,x.success("Test prędkości zakończony");else throw new Error(t.data.error||"Test nieudany")}catch(o){console.error("Speed test error:",o),x.error(o.response?.data?.error||o.message||"Test prędkości nieudany"),u.value={download:"0.00",upload:"0.00",ping:"N/A",server:"Test failed",serverHost:"Error",sponsor:"N/A"}}finally{b.value=!1,await ne(),z.value=0}},q=async()=>{if(!u.value)return;const o=`Wyniki testu prędkości:
Interfejs: ${d.value.device}
Pobieranie: ${u.value.download} Mbps
Wysyłanie: ${u.value.upload} Mbps
Ping: ${u.value.ping||"N/A"} ms
Serwer: ${u.value.server}
Czas: ${new Date().toLocaleString("pl-PL")}`;try{await navigator.clipboard.writeText(o),x.success("Wyniki skopiowane do schowka")}catch(t){console.error("Copy failed:",t),x.error("Błąd kopiowania")}},J=()=>{P()};return(o,t)=>{const a=h("el-icon"),_=h("el-button"),Q=h("el-button-group"),V=h("el-card"),f=h("el-tag"),X=h("el-option"),Z=h("el-select"),ee=h("el-progress");return v(),m("div",{class:U(["interface-details-container",{dark:g.value}])},[e("div",re,[e("div",de,[s(_,{onClick:t[0]||(t[0]=p=>o.$router.go(-1)),class:"back-btn",size:"large"},{default:l(()=>[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:arrow-left"})]),_:1}),t[5]||(t[5]=c(" Powrót "))]),_:1,__:[5]}),e("div",ce,[e("h1",null,[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:ethernet-cable"})]),_:1}),c(" "+r(d.value.device||"Interface Details"),1)]),t[6]||(t[6]=e("p",{class:"subtitle"},"Szczegóły konfiguracji interfejsu sieciowego",-1))])]),e("div",ue,[s(Q,null,{default:l(()=>[s(_,{onClick:R,icon:H.value,circle:"",size:"large",class:"theme-toggle"},null,8,["icon"]),s(_,{type:"primary",onClick:J,loading:C.value,size:"large"},{default:l(()=>[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:refresh"})]),_:1}),t[7]||(t[7]=c(" Odśwież "))]),_:1,__:[7]},8,["loading"])]),_:1})])]),e("div",ve,[s(V,{class:"stats-panel"},{default:l(()=>[e("div",pe,[e("h3",null,[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:chart-box"})]),_:1}),t[8]||(t[8]=c(" Statystyki interfejsu"))]),e("div",_e,[e("div",fe,[e("div",me,[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:download"})]),_:1})]),e("div",ye,[t[9]||(t[9]=e("div",{class:"stat-label"},"Odebrane bajty",-1)),e("div",he,r(L(d.value.stats?.rx_bytes||0)),1)])]),e("div",ge,[e("div",ke,[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:upload"})]),_:1})]),e("div",we,[t[10]||(t[10]=e("div",{class:"stat-label"},"Wysłane bajty",-1)),e("div",be,r(L(d.value.stats?.tx_bytes||0)),1)])]),e("div",ze,[e("div",xe,[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:package-down"})]),_:1})]),e("div",Ce,[t[11]||(t[11]=e("div",{class:"stat-label"},"Odebrane pakiety",-1)),e("div",Se,r(d.value.stats?.rx_packets||0),1)])]),e("div",Te,[e("div",Ne,[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:package-up"})]),_:1})]),e("div",Ie,[t[12]||(t[12]=e("div",{class:"stat-label"},"Wysłane pakiety",-1)),e("div",$e,r(d.value.stats?.tx_packets||0),1)])]),e("div",je,[e("div",Be,[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:close-circle"})]),_:1})]),e("div",Le,[t[13]||(t[13]=e("div",{class:"stat-label"},"Błędy odbioru",-1)),e("div",De,r(d.value.stats?.rx_errors||0),1)])]),e("div",Me,[e("div",Ae,[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:close-circle"})]),_:1})]),e("div",We,[t[14]||(t[14]=e("div",{class:"stat-label"},"Błędy wysyłania",-1)),e("div",Pe,r(d.value.stats?.tx_errors||0),1)])])])])]),_:1}),e("div",Ee,[s(V,{class:"interface-details"},{default:l(()=>[e("div",Ve,[e("div",Fe,[e("h2",null,[s(a,null,{default:l(()=>[s(i(n),{icon:G()},null,8,["icon"])]),_:1}),c(" "+r(d.value.device||"Interfejs")+" ",1),s(f,{type:K(),size:"small",class:"status-tag"},{default:l(()=>[s(a,null,{default:l(()=>[s(i(n),{icon:Y()},null,8,["icon"])]),_:1}),c(" "+r(d.value.status?.toUpperCase()||"UNKNOWN"),1)]),_:1},8,["type"]),d.value.ethtool?.driver?(v(),I(f,{key:0,size:"small",class:"driver-tag"},{default:l(()=>[c(r(d.value.ethtool.driver),1)]),_:1})):k("",!0)]),e("div",Ue,[s(f,{size:"small",type:"info"},{default:l(()=>[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:card-bulleted-settings"})]),_:1}),c(" MTU: "+r(d.value.mtu||1500),1)]),_:1}),s(f,{size:"small",type:M()},{default:l(()=>[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:speedometer"})]),_:1}),c(" "+r(D(d.value.ethtool?.speed)),1)]),_:1},8,["type"]),s(f,{size:"small",type:A()},{default:l(()=>[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:swap-horizontal"})]),_:1}),c(" "+r(W()),1)]),_:1},8,["type"]),s(f,{size:"small",type:"info"},{default:l(()=>[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:identifier"})]),_:1}),c(" "+r(d.value.mac||"No MAC"),1)]),_:1})])])]),e("div",He,[e("div",Re,[e("h3",null,[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:speedometer"})]),_:1}),t[15]||(t[15]=c(" Test prędkości"))])]),e("div",Oe,[!b.value&&!u.value?(v(),m("div",Ge,[e("div",Ke,[s(a,{size:"64",class:"test-icon"},{default:l(()=>[s(i(n),{icon:"mdi:internet"})]),_:1}),t[16]||(t[16]=e("h4",null,"Przetestuj prędkość połączenia",-1)),t[17]||(t[17]=e("p",null,"Wykonaj test prędkości pobierania i wysyłania przez ten interfejs",-1))]),!b.value&&!u.value?(v(),m("div",Ye,[s(_,{onClick:t[1]||(t[1]=p=>S.value=!S.value),size:"small",type:"info"},{default:l(()=>[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:server"})]),_:1}),c(" "+r(w.value?`Serwer: ${w.value.name}`:"Wybierz serwer"),1)]),_:1}),S.value?(v(),m("div",qe,[s(Z,{modelValue:w.value,"onUpdate:modelValue":t[2]||(t[2]=p=>w.value=p),placeholder:"Wybierz serwer...",filterable:"",class:"server-select",onChange:t[3]||(t[3]=p=>S.value=!1)},{default:l(()=>[(v(!0),m(ae,null,ie(B.value,p=>(v(),I(X,{key:p.id,label:`${p.name} - ${p.location}`,value:p},{default:l(()=>[e("div",Je,[e("span",Qe,r(p.name),1),e("span",Xe,r(p.location),1),s(f,{size:"small",type:"info"},{default:l(()=>[c(r(p.country),1)]),_:2},1024)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])])):k("",!0)])):k("",!0),s(_,{type:"primary",onClick:E,disabled:C.value||!T.value,size:"large",class:"test-button"},{default:l(()=>[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:play"})]),_:1}),t[18]||(t[18]=c(" Rozpocznij test "))]),_:1,__:[18]},8,["disabled"]),T.value?k("",!0):(v(),m("p",Ze,[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:alert-circle"})]),_:1}),t[19]||(t[19]=c(" Interfejs musi być włączony aby wykonać test "))]))])):b.value?(v(),m("div",es,[e("div",ss,[s(ee,{percentage:z.value,status:(z.value<100,"success"),"stroke-width":16,striped:"","striped-flow":""},null,8,["percentage","status"]),e("div",ts,[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:progress-clock"})]),_:1}),t[20]||(t[20]=c(" Testowanie w toku... "))]),j.value?(v(),m("div",ls,[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:server"})]),_:1}),c(" Serwer testowy: "+r(j.value),1)])):k("",!0)])])):u.value?(v(),m("div",os,[e("div",as,[s(a,{color:"var(--el-color-success)",size:"20"},{default:l(()=>[s(i(n),{icon:"mdi:check-circle"})]),_:1}),t[21]||(t[21]=e("span",null,"Test zakończony pomyślnie",-1)),s(f,{size:"small",type:"info",class:"server-tag"},{default:l(()=>[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:server"})]),_:1}),c(" "+r(u.value.server),1)]),_:1}),s(_,{size:"small",onClick:t[4]||(t[4]=p=>u.value=null),class:"clear-results"},{default:l(()=>[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:close"})]),_:1})]),_:1})]),u.value.serverHost?(v(),m("div",is,[e("small",null,[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:link"})]),_:1}),c(" Host: "+r(u.value.serverHost)+":"+r(u.value.serverPort),1)])])):k("",!0),e("div",ns,[e("div",rs,[e("div",ds,[s(a,{size:"32"},{default:l(()=>[s(i(n),{icon:"mdi:download"})]),_:1})]),e("div",cs,[t[22]||(t[22]=e("div",{class:"result-label"},"Pobieranie",-1)),e("div",us,r(u.value.download)+" Mbps ",1)])]),e("div",vs,[e("div",ps,[s(a,{size:"32"},{default:l(()=>[s(i(n),{icon:"mdi:upload"})]),_:1})]),e("div",_s,[t[23]||(t[23]=e("div",{class:"result-label"},"Wysyłanie",-1)),e("div",fs,r(u.value.upload)+" Mbps ",1)])]),e("div",ms,[e("div",ys,[s(a,{size:"32"},{default:l(()=>[s(i(n),{icon:"mdi:ping"})]),_:1})]),e("div",hs,[t[24]||(t[24]=e("div",{class:"result-label"},"Ping",-1)),e("div",gs,r(u.value.ping||"N/A")+" ms ",1)])])]),e("div",ks,[s(_,{onClick:E,type:"primary",size:"small"},{default:l(()=>[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:refresh"})]),_:1}),t[25]||(t[25]=c(" Testuj ponownie "))]),_:1,__:[25]}),s(_,{onClick:q,size:"small"},{default:l(()=>[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:content-copy"})]),_:1}),t[26]||(t[26]=c(" Kopiuj wyniki "))]),_:1,__:[26]})])])):k("",!0)])]),e("div",ws,[e("div",bs,[e("h3",null,[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:card-bulleted"})]),_:1}),t[27]||(t[27]=c(" Właściwości interfejsu"))])]),e("div",zs,[e("div",xs,[e("div",Cs,[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:car-engine"})]),_:1})]),e("div",Ss,[t[28]||(t[28]=e("div",{class:"property-label"},"Sterownik",-1)),e("div",Ts,r(d.value.ethtool?.driver||"N/A"),1)])]),e("div",Ns,[e("div",Is,[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:speedometer"})]),_:1})]),e("div",$s,[t[29]||(t[29]=e("div",{class:"property-label"},"Prędkość",-1)),e("div",{class:U(["property-value",M()])},r(D(d.value.ethtool?.speed)),3)])]),e("div",js,[e("div",Bs,[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:swap-horizontal"})]),_:1})]),e("div",Ls,[t[30]||(t[30]=e("div",{class:"property-label"},"Duplex",-1)),e("div",Ds,[s(f,{type:A(),size:"small"},{default:l(()=>[c(r(W()),1)]),_:1},8,["type"])])])]),e("div",Ms,[e("div",As,[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:power-sleep"})]),_:1})]),e("div",Ws,[t[31]||(t[31]=e("div",{class:"property-label"},"Wake-on-LAN",-1)),e("div",Ps,[s(f,{type:d.value.ethtool?.wol?"success":"info",size:"small"},{default:l(()=>[c(r(d.value.ethtool?.wol||"N/A"),1)]),_:1},8,["type"])])])]),e("div",Es,[e("div",Vs,[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:ip"})]),_:1})]),e("div",Fs,[t[32]||(t[32]=e("div",{class:"property-label"},"Adres IP",-1)),e("div",Us,[d.value.ipv4?.local?(v(),I(f,{key:0,type:"success",size:"small"},{default:l(()=>[c(r(d.value.ipv4.local)+"/"+r(d.value.ipv4.prefixlen||24),1)]),_:1})):(v(),m("span",Hs,"Nie skonfigurowano"))])])]),e("div",Rs,[e("div",Os,[s(a,null,{default:l(()=>[s(i(n),{icon:"mdi:gate"})]),_:1})]),e("div",Gs,[t[33]||(t[33]=e("div",{class:"property-label"},"Brama",-1)),e("div",Ks,r(d.value.config?.["IP4.GATEWAY"]||"N/A"),1)])])])])]),_:1})])])],2)}}},Qs=se(Ys,[["__scopeId","data-v-598f1f09"]]);export{Qs as default};
