import{_ as be,a as he,r as c,c as A,s as ze,o as Ce,b as f,d as _,e as m,f as o,g as e,m as i,w as l,k as d,I as r,t as p,h as K,i as D,n as X,v as R,E as q,x as T}from"./index-naspanel.js";const je={class:"header"},Ve={class:"header-left"},Ie={class:"header-right"},Se={class:"filters-content"},xe={class:"filter-group"},Ne={class:"filter-group"},Te={class:"status-option up"},Ue={class:"status-option down"},Ae={class:"filter-group"},De={class:"type-option"},Be={class:"type-option"},Le={class:"stats-group"},Ee={class:"actions-group"},$e={class:"main-content"},Me={class:"table-content"},Pe={key:0,class:"loading-state"},We={key:1,class:"empty-state"},Fe={key:2,class:"empty-state"},Re={key:3,class:"table-wrapper"},qe={class:"device-cell"},Oe={class:"device-name"},Qe={key:0,class:"ip-cell"},Ze={class:"ip-address"},Ge={key:0,class:"netmask"},He={key:1,class:"no-data"},Je={key:0,class:"mac-address"},Ke={key:1,class:"no-data"},Xe={class:"speed-cell"},Ye={key:0,class:"duplex-tag"},et={class:"mtu-value"},tt={class:"action-buttons"},lt={class:"table-footer"},at={class:"footer-info"},st={key:0},nt={key:0,class:"footer-pagination"},ot={__name:"Interfaces",setup(it){const Y=he(),B=c(!1);A(()=>B.value?"mdi:weather-sunny":"mdi:weather-night");const U=c(!1),g=c([]),b=c(null),C=c(""),h=c(""),z=c("");c(["ip","mac","speed","method"]);const L=c(1),E=c(25),V=c(!1),$=c(!1),I=c(!1),S=c(""),M=c(!1),w=ze({name:"",type:"ethernet"}),ee={name:[{required:!0,message:"Nazwa interfejsu jest wymagana",trigger:"blur"},{pattern:/^[a-z][a-z0-9]+$/,message:"Nieprawidłowa nazwa interfejsu",trigger:"blur"}],type:[{required:!0,message:"Typ interfejsu jest wymagany",trigger:"change"}]},te=c(""),x=A(()=>{let a=[...g.value];if(h.value&&h.value!=="all"&&(a=a.filter(t=>t.status===h.value)),z.value&&z.value!=="all"&&(a=a.filter(t=>t.type===z.value)),C.value){const t=C.value.toLowerCase();a=a.filter(n=>n.device.toLowerCase().includes(t)||n.address&&n.address.toLowerCase().includes(t)||n.mac&&n.mac.toLowerCase().includes(t)||n.method&&n.method.toLowerCase().includes(t))}return a}),le=A(()=>g.value.filter(a=>a.status==="up").length),ae=A(()=>h.value!==""||z.value!==""||C.value!==""),O=a=>{switch(a){case"ethernet":return"mdi:ethernet-cable";case"wireless":return"mdi:wifi";default:return"mdi:network"}},se=a=>{switch(a){case"ethernet":return"Ethernet";case"wireless":return"Wireless";default:return a}},ne=a=>{switch(a){case"ethernet":return"primary";case"wireless":return"warning";default:return"info"}},oe=a=>!a||a==="unknown"?"N/A":a,ie=a=>{if(!a||a==="unknown")return"unknown";const t=a.match(/(\d+)/);if(t){const n=parseInt(t[1]);if(n>=1e3)return"gigabit";if(n>=100)return"fast"}return"normal"},de=a=>a?a.toUpperCase():"N/A",P=a=>["lo","eth0"].includes(a),re=({row:a})=>b.value&&b.value.device===a.device?"selected-row":"",N=async()=>{try{U.value=!0;const a=await R.get("/network/interfaces");g.value=a.data,te.value=new Date().toLocaleTimeString("pl-PL"),g.value.length>0&&!b.value&&(b.value=g.value[0])}catch(a){console.error("Failed to load interfaces:",a),q({title:"Błąd",message:"Nie udało się załadować interfejsów",type:"error"})}finally{U.value=!1}},ue=a=>{b.value=a},Q=()=>{C.value="",h.value="",z.value="",L.value=1},ce=a=>{Y.push(`/network/interfaces/details/${a}`)},pe=()=>{V.value=!0},fe=a=>{if(P(a)){T.warning(`Nie można usunąć chronionego interfejsu ${a}`);return}S.value=a,I.value=!0},me=async()=>{try{$.value=!0;const a=await R.post("/network/interfaces/add",w);q({title:"Sukces",message:`Interfejs ${w.name} został dodany`,type:"success"}),V.value=!1,w.name="",w.type="ethernet",await N()}catch(a){console.error("Error adding interface:",a),T.error(a.response?.data?.message||"Błąd dodawania interfejsu")}finally{$.value=!1}},ve=async()=>{try{M.value=!0;const a=await R.delete(`/network/interfaces/remove/${S.value}`);q({title:"Sukces",message:`Interfejs ${S.value} został usunięty`,type:"success"}),I.value=!1,S.value="",await N()}catch(a){console.error("Error deleting interface:",a),T.error(a.response?.data?.message||"Błąd usuwania interfejsu")}finally{M.value=!1}},_e=()=>{try{const t=[["Device","Status","IP","Netmask","MAC","Method","Speed","Duplex","Type","MTU"].join(","),...g.value.map(v=>[v.device,v.status,v.address||"",v.netmask||"",v.mac||"",v.method||"",v.speed||"",v.duplex||"",v.type||"",v.mtu||""].join(","))].join(`
`),n=new Blob([t],{type:"text/csv;charset=utf-8;"}),u=document.createElement("a"),W=URL.createObjectURL(n);u.setAttribute("href",W),u.setAttribute("download",`interfaces_${new Date().toISOString().slice(0,10)}.csv`),u.style.visibility="hidden",document.body.appendChild(u),u.click(),document.body.removeChild(u),T.success("Dane wyeksportowane do pliku CSV")}catch{T.error("Błąd eksportowania danych")}};return Ce(()=>{localStorage.getItem("theme")==="dark"&&(B.value=!0,document.body.classList.add("dark-theme"),document.documentElement.classList.add("dark")),N()}),(a,t)=>{const n=f("el-icon"),u=f("el-button"),W=f("el-button-group"),v=f("el-input"),y=f("el-option"),F=f("el-select"),j=f("el-tag"),Z=f("el-card"),k=f("el-table-column"),G=f("el-tooltip"),ge=f("el-table"),ye=f("el-pagination"),H=f("el-form-item"),we=f("el-form"),J=f("el-dialog");return m(),_("div",{class:X(["local-logs-container",{dark:B.value}])},[o("div",je,[o("div",Ve,[o("h1",null,[e(n,null,{default:l(()=>[e(d(r),{icon:"mdi:ethernet-cable"})]),_:1}),t[11]||(t[11]=i(" Interfejsy sieciowe "))]),t[12]||(t[12]=o("p",{class:"subtitle"},"Zarządzanie konfiguracją sieci",-1))]),o("div",Ie,[e(W,null,{default:l(()=>[e(u,{onClick:pe,type:"primary",size:"large"},{default:l(()=>[e(n,null,{default:l(()=>[e(d(r),{icon:"mdi:plus"})]),_:1}),t[13]||(t[13]=i(" Dodaj interfejs "))]),_:1,__:[13]}),e(u,{type:"primary",onClick:N,loading:U.value,size:"large"},{default:l(()=>[e(n,null,{default:l(()=>[e(d(r),{icon:"mdi:refresh"})]),_:1}),t[14]||(t[14]=i(" Odśwież "))]),_:1,__:[14]},8,["loading"])]),_:1})])]),e(Z,{class:"filters-bar",shadow:"never"},{default:l(()=>[o("div",Se,[o("div",xe,[e(v,{modelValue:C.value,"onUpdate:modelValue":t[0]||(t[0]=s=>C.value=s),placeholder:"Szukaj interfejsu...",clearable:"",class:"search-input",size:"large"},{prefix:l(()=>[e(n,null,{default:l(()=>[e(d(r),{icon:"mdi:magnify"})]),_:1})]),_:1},8,["modelValue"])]),o("div",Ne,[e(F,{modelValue:h.value,"onUpdate:modelValue":t[1]||(t[1]=s=>h.value=s),placeholder:"Status",clearable:"",class:"filter-select",size:"large"},{default:l(()=>[e(y,{label:"Wszystkie",value:"all"}),e(y,{value:"up"},{default:l(()=>[o("span",Te,[e(n,null,{default:l(()=>[e(d(r),{icon:"mdi:check-circle"})]),_:1}),t[15]||(t[15]=i(" Aktywne "))])]),_:1}),e(y,{value:"down"},{default:l(()=>[o("span",Ue,[e(n,null,{default:l(()=>[e(d(r),{icon:"mdi:close-circle"})]),_:1}),t[16]||(t[16]=i(" Nieaktywne "))])]),_:1})]),_:1},8,["modelValue"])]),o("div",Ae,[e(F,{modelValue:z.value,"onUpdate:modelValue":t[2]||(t[2]=s=>z.value=s),placeholder:"Typ",clearable:"",class:"filter-select",size:"large"},{default:l(()=>[e(y,{label:"Wszystkie",value:"all"}),e(y,{value:"ethernet"},{default:l(()=>[o("span",De,[e(n,null,{default:l(()=>[e(d(r),{icon:"mdi:ethernet-cable"})]),_:1}),t[17]||(t[17]=i(" Ethernet "))])]),_:1}),e(y,{value:"wireless"},{default:l(()=>[o("span",Be,[e(n,null,{default:l(()=>[e(d(r),{icon:"mdi:wifi"})]),_:1}),t[18]||(t[18]=i(" Wireless "))])]),_:1})]),_:1},8,["modelValue"])]),o("div",Le,[e(j,{size:"large",type:"info"},{default:l(()=>[e(n,null,{default:l(()=>[e(d(r),{icon:"mdi:server-network"})]),_:1}),i(" "+p(g.value.length)+" interfejsów ",1)]),_:1}),e(j,{size:"large",type:"success"},{default:l(()=>[e(n,null,{default:l(()=>[e(d(r),{icon:"mdi:check-circle"})]),_:1}),i(" "+p(le.value)+" aktywnych ",1)]),_:1})]),o("div",Ee,[e(u,{onClick:Q,size:"large",disabled:!ae.value},{default:l(()=>[e(n,null,{default:l(()=>[e(d(r),{icon:"mdi:filter-remove"})]),_:1}),t[19]||(t[19]=i(" Wyczyść "))]),_:1,__:[19]},8,["disabled"]),e(u,{onClick:_e,size:"large",disabled:!g.value.length},{default:l(()=>[e(n,null,{default:l(()=>[e(d(r),{icon:"mdi:export"})]),_:1}),t[20]||(t[20]=i(" CSV "))]),_:1,__:[20]},8,["disabled"])])])]),_:1}),o("div",$e,[e(Z,{class:"interfaces-card",shadow:"never"},{default:l(()=>[o("div",Me,[U.value?(m(),_("div",Pe,[e(n,{class:"loading-icon",size:48},{default:l(()=>[e(d(r),{icon:"mdi:loading"})]),_:1}),t[21]||(t[21]=o("p",null,"Ładowanie interfejsów...",-1))])):g.value.length?x.value.length?(m(),_("div",Re,[e(ge,{data:x.value,stripe:"","highlight-current-row":"",onRowClick:ue,class:"interfaces-table","row-class-name":re},{default:l(()=>[e(k,{prop:"device",label:"Urządzenie",width:"120"},{default:l(({row:s})=>[o("div",qe,[e(n,{class:"device-icon"},{default:l(()=>[e(d(r),{icon:O(s.type)},null,8,["icon"])]),_:2},1024),o("span",Oe,p(s.device),1)])]),_:1}),e(k,{prop:"status",label:"Status",width:"100"},{default:l(({row:s})=>[e(j,{type:s.status==="up"?"success":"danger",size:"large"},{default:l(()=>[s.status==="up"?(m(),K(n,{key:0},{default:l(()=>[e(d(r),{icon:"mdi:check-circle"})]),_:1})):(m(),K(n,{key:1},{default:l(()=>[e(d(r),{icon:"mdi:close-circle"})]),_:1})),i(" "+p(s.status),1)]),_:2},1032,["type"])]),_:1}),e(k,{label:"Adres IP",width:"160"},{default:l(({row:s})=>[s.address?(m(),_("div",Qe,[o("div",Ze,p(s.address),1),s.netmask?(m(),_("div",Ge,"/"+p(s.netmask),1)):D("",!0)])):(m(),_("span",He,"N/A"))]),_:1}),e(k,{prop:"mac",label:"MAC",width:"160"},{default:l(({row:s})=>[s.mac?(m(),_("span",Je,p(de(s.mac)),1)):(m(),_("span",Ke,"N/A"))]),_:1}),e(k,{prop:"method",label:"Metoda",width:"120"},{default:l(({row:s})=>[e(j,{type:s.method==="dhcp"?"primary":"warning",size:"large"},{default:l(()=>[i(p(s.method||"unknown"),1)]),_:2},1032,["type"])]),_:1}),e(k,{label:"Prędkość",width:"140"},{default:l(({row:s})=>[o("div",Xe,[o("div",{class:X(["speed-value",ie(s.speed)])},p(oe(s.speed)),3),s.duplex&&s.duplex!=="unknown"?(m(),_("div",Ye,[e(j,{type:s.duplex==="full"?"success":"warning",size:"small"},{default:l(()=>[i(p(s.duplex),1)]),_:2},1032,["type"])])):D("",!0)])]),_:1}),e(k,{prop:"type",label:"Typ",width:"120"},{default:l(({row:s})=>[e(j,{type:ne(s.type),size:"large"},{default:l(()=>[e(n,null,{default:l(()=>[e(d(r),{icon:O(s.type)},null,8,["icon"])]),_:2},1024),i(" "+p(se(s.type)),1)]),_:2},1032,["type"])]),_:1}),e(k,{prop:"mtu",label:"MTU",width:"100"},{default:l(({row:s})=>[o("span",et,p(s.mtu||1500),1)]),_:1}),e(k,{label:"Akcje",width:"160",fixed:"right"},{default:l(({row:s})=>[o("div",tt,[e(G,{content:"Szczegóły",placement:"top"},{default:l(()=>[e(u,{size:"small",onClick:ke=>ce(s.device),class:"action-button"},{default:l(()=>[e(n,null,{default:l(()=>[e(d(r),{icon:"mdi:eye"})]),_:1}),t[28]||(t[28]=i(" Szczegóły "))]),_:2,__:[28]},1032,["onClick"])]),_:2},1024),e(G,{content:"Usuń",placement:"top",disabled:P(s.device)},{default:l(()=>[e(u,{size:"small",type:"danger",onClick:ke=>fe(s.device),disabled:P(s.device),class:"action-button"},{default:l(()=>[e(n,null,{default:l(()=>[e(d(r),{icon:"mdi:delete"})]),_:1}),t[29]||(t[29]=i(" Usuń "))]),_:2,__:[29]},1032,["onClick","disabled"])]),_:2},1032,["disabled"])])]),_:1})]),_:1},8,["data"])])):(m(),_("div",Fe,[e(n,{size:64},{default:l(()=>[e(d(r),{icon:"mdi:filter-off"})]),_:1}),t[26]||(t[26]=o("h3",null,"Brak wyników",-1)),t[27]||(t[27]=o("p",null,"Spróbuj zmienić filtry lub wyszukiwanie",-1)),e(u,{onClick:Q,type:"primary"},{default:l(()=>[e(n,null,{default:l(()=>[e(d(r),{icon:"mdi:filter-remove"})]),_:1}),t[25]||(t[25]=i(" Wyczyść filtry "))]),_:1,__:[25]})])):(m(),_("div",We,[e(n,{size:64},{default:l(()=>[e(d(r),{icon:"mdi:network-off"})]),_:1}),t[23]||(t[23]=o("h3",null,"Brak interfejsów",-1)),t[24]||(t[24]=o("p",null,"Nie znaleziono interfejsów sieciowych",-1)),e(u,{onClick:N,type:"primary"},{default:l(()=>[e(n,null,{default:l(()=>[e(d(r),{icon:"mdi:refresh"})]),_:1}),t[22]||(t[22]=i(" Spróbuj ponownie "))]),_:1,__:[22]})]))]),o("div",lt,[o("div",at,[o("span",null,"Wyświetlono "+p(x.value.length)+" z "+p(g.value.length)+" interfejsów",1),b.value?(m(),_("span",st," | Wybrano: "+p(b.value.device),1)):D("",!0)]),x.value.length>E.value?(m(),_("div",nt,[e(ye,{"current-page":L.value,"onUpdate:currentPage":t[3]||(t[3]=s=>L.value=s),"page-size":E.value,"onUpdate:pageSize":t[4]||(t[4]=s=>E.value=s),total:x.value.length,"page-sizes":[10,25,50,100],layout:"total, sizes, prev, pager, next",small:"",background:""},null,8,["current-page","page-size","total"])])):D("",!0)])]),_:1})]),e(J,{modelValue:V.value,"onUpdate:modelValue":t[8]||(t[8]=s=>V.value=s),title:"Dodaj nowy interfejs",width:"500px"},{footer:l(()=>[e(u,{onClick:t[7]||(t[7]=s=>V.value=!1)},{default:l(()=>t[30]||(t[30]=[i(" Anuluj ")])),_:1,__:[30]}),e(u,{type:"primary",onClick:me,loading:$.value},{default:l(()=>t[31]||(t[31]=[i(" Dodaj ")])),_:1,__:[31]},8,["loading"])]),default:l(()=>[e(we,{model:w,rules:ee,ref:"addInterfaceForm"},{default:l(()=>[e(H,{label:"Nazwa interfejsu",prop:"name"},{default:l(()=>[e(v,{modelValue:w.name,"onUpdate:modelValue":t[5]||(t[5]=s=>w.name=s),placeholder:"np. eth1, br0, bond0"},null,8,["modelValue"])]),_:1}),e(H,{label:"Typ interfejsu",prop:"type"},{default:l(()=>[e(F,{modelValue:w.type,"onUpdate:modelValue":t[6]||(t[6]=s=>w.type=s),class:"type-select"},{default:l(()=>[e(y,{value:"ethernet",label:"Ethernet"}),e(y,{value:"bridge",label:"Most (Bridge)"}),e(y,{value:"vlan",label:"VLAN"}),e(y,{value:"bond",label:"Bonding"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(J,{modelValue:I.value,"onUpdate:modelValue":t[10]||(t[10]=s=>I.value=s),title:"Potwierdzenie usunięcia",width:"400px"},{footer:l(()=>[e(u,{onClick:t[9]||(t[9]=s=>I.value=!1)},{default:l(()=>t[34]||(t[34]=[i(" Anuluj ")])),_:1,__:[34]}),e(u,{type:"danger",onClick:ve,loading:M.value},{default:l(()=>t[35]||(t[35]=[i(" Usuń ")])),_:1,__:[35]},8,["loading"])]),default:l(()=>[o("p",null,[t[32]||(t[32]=i("Czy na pewno chcesz usunąć interfejs ")),o("strong",null,p(S.value),1),t[33]||(t[33]=i("?"))])]),_:1},8,["modelValue"])],2)}}},rt=be(ot,[["__scopeId","data-v-d5861540"]]);export{rt as default};
