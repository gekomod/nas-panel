import{_ as N,u as b,r as w,o as B,W as E,b as k,A as x,B as D,h as V,e as r,w as p,f as e,d as v,i as j,F as C,l as F,g as c,k as n,I as d,t as o,m as S,E as U}from"./index-naspanel.js";const W={class:"widget-header"},L={class:"header-main"},T={class:"header-icon"},z={class:"header-title"},A={class:"update-time"},M={class:"widget-content"},O={class:"interface-header"},q={class:"interface-name"},G={class:"interface-device"},H={class:"interface-details"},J={class:"detail-row"},K={class:"detail-label"},P={class:"detail-value"},Q={class:"detail-row"},R={class:"detail-label"},X={class:"detail-value"},Y={key:0,class:"no-interfaces"},Z={name:"NetworkWidget",displayName:"Interfejsy Sieciowe"},$=Object.assign(Z,{setup(ee){const{t:s}=b(),l=w([]),u=w(!1),_=w(s("common.loading"));let f=null;function I(a){if(!a)return"mdi:help-circle";const t=a.device||"";return t.includes("wlan")||t.includes("wlp")||t.includes("wifi")?"mdi:wifi":t.includes("eth")||t.includes("eno")||t.includes("enp")?"mdi:ethernet":t.includes("lo")||t.includes("loopback")?"mdi:loop":t.includes("tun")||t.includes("tap")?"mdi:tunnel":"mdi:network"}async function g(){try{u.value=!0;const a=window.location.protocol+"//"+window.location.hostname+":1112",t=await fetch(a+"/network/interfaces");if(!t.ok)throw new Error("Failed to fetch network interfaces");const h=await t.json();l.value=h.filter(function(m){return m.status==="up"}),_.value=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch(a){console.error("Error fetching network interfaces:",a),_.value=s("common.error"),U.error({title:s("common.error"),message:s("network.interfaces.fetchError"),duration:3e3})}finally{u.value=!1}}return B(function(){g(),f=setInterval(g,3e4)}),E(function(){f&&clearInterval(f)}),(a,t)=>{const h=k("el-tag"),m=k("el-card"),y=x("loading");return D((r(),V(m,{class:"widget-card",shadow:"hover"},{header:p(()=>[e("div",W,[e("div",L,[e("div",T,[c(n(d),{icon:"mdi:network",width:"16"})]),e("span",z,o(n(s)("network.interfaces.title")),1),e("div",A,[c(n(d),{icon:"mdi:update",width:"12"}),e("span",null,o(n(s)("common.update"))+": "+o(_.value),1)])])])]),default:p(()=>[e("div",M,[(r(!0),v(C,null,F(l.value,i=>(r(),v("div",{key:i.device,class:"info-row interface-item"},[e("div",O,[e("div",q,[c(n(d),{icon:I(i),width:"14",class:"interface-icon"},null,8,["icon"]),e("span",G,o(i.device),1),c(h,{type:i.status==="up"?"success":"danger",size:"small",class:"status-tag"},{default:p(()=>[S(o(i.status==="up"?n(s)("network.interfaces.up"):n(s)("network.interfaces.down")),1)]),_:2},1032,["type"])])]),e("div",H,[e("div",J,[e("span",K,o(n(s)("network.interfaces.address")),1),e("span",P,o(i.address||n(s)("common.none")),1)]),e("div",Q,[e("span",R,o(n(s)("network.interfaces.mac")),1),e("span",X,o(i.mac||n(s)("common.none")),1)])])]))),128)),l.value.length===0?(r(),v("div",Y,[c(n(d),{icon:"mdi:network-off",width:"20"}),e("span",null,o(n(s)("network.interfaces.noInterfaces")),1)])):j("",!0)])]),_:1})),[[y,u.value]])}}}),se=N($,[["__scopeId","data-v-4ddcc045"]]);export{se as default};
