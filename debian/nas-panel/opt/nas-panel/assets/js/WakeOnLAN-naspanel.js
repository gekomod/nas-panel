import{_ as T,s as B,r as v,o as q,b as s,A as G,d as H,e as V,g as a,w as o,B as D,h as j,m as k,k as c,I as p,f as z,v as m,x as i}from"./index-naspanel.js";const J={class:"wake-on-lan"},K={class:"card-header"},Q={class:"card-header"},R={__name:"WakeOnLAN",setup(X){const d=B({enabled:!0,macAddress:"00:1A:2B:3C:4D:5E",ipAddress:"192.168.1.255",port:9}),f=v(!1),t=B({name:"",mac:"",ip:""}),_=v([]),b=v(!1),A=v(!1),y=v(!1),h=async()=>{b.value=!0;try{const l=await m.get("/wakeonlan/config");Object.assign(d,l.data.config)}catch(l){console.error("Błąd podczas ładowania konfiguracji Wake-on-LAN:",l),i.error("Nie udało się załadować konfiguracji Wake-on-LAN")}finally{b.value=!1}},x=async()=>{A.value=!0;try{const l=await m.get("/wakeonlan/devices");_.value=l.data.devices}catch(l){console.error("Błąd podczas ładowania urządzeń Wake-on-LAN:",l),i.error("Nie udało się załadować urządzeń Wake-on-LAN")}finally{A.value=!1}},U=async()=>{y.value=!0;try{await m.post("/wakeonlan/config",{config:d}),i.success("Ustawienia Wake-on-LAN zapisane")}catch(l){console.error("Błąd podczas zapisywania konfiguracji Wake-on-LAN:",l),i.error("Nie udało się zapisać konfiguracji Wake-on-LAN")}finally{y.value=!1}},M=async l=>{try{await m.post("/wakeonlan/wake",{mac:l.mac,ip:l.ip||d.ipAddress,port:d.port}),i.success(`Wysyłanie pakietu Wake-on-LAN do ${l.name}`)}catch(e){console.error("Błąd podczas wysyłania pakietu Wake-on-LAN:",e),i.error("Nie udało się wysłać pakietu Wake-on-LAN")}},$=async()=>{if(t.name&&t.mac)try{const l=await m.post("/wakeonlan/devices",{device:t});_.value.push({id:l.data.id,...t}),i.success("Urządzenie dodane"),f.value=!1,Object.assign(t,{name:"",mac:"",ip:""})}catch(l){console.error("Błąd podczas dodawania urządzenia:",l),i.error("Nie udało się dodać urządzenia")}else i.warning("Wypełnij nazwę i adres MAC")},E=async l=>{try{await m.delete(`/wakeonlan/devices/${l.id}`),_.value=_.value.filter(e=>e.id!==l.id),i.success("Urządzenie usunięte")}catch(e){console.error("Błąd podczas usuwania urządzenia:",e),i.error("Nie udało się usunąć urządzenia")}};return q(()=>{h(),x()}),(l,e)=>{const I=s("el-switch"),r=s("el-form-item"),w=s("el-input"),O=s("el-input-number"),u=s("el-button"),N=s("el-form"),C=s("el-card"),W=s("el-col"),g=s("el-table-column"),P=s("el-table"),Z=s("el-row"),F=s("el-dialog"),L=G("loading");return V(),H("div",J,[a(Z,{gutter:20},{default:o(()=>[a(W,{span:12},{default:o(()=>[a(C,{shadow:"hover"},{header:o(()=>[z("div",K,[a(c(p),{icon:"mdi:lan-connect",width:"24"}),e[10]||(e[10]=z("h3",null,"Wake-on-LAN",-1))])]),default:o(()=>[D((V(),j(N,{model:d,"label-width":"140px"},{default:o(()=>[a(r,{label:"Włącz Wake-on-LAN"},{default:o(()=>[a(I,{modelValue:d.enabled,"onUpdate:modelValue":e[0]||(e[0]=n=>d.enabled=n)},null,8,["modelValue"])]),_:1}),a(r,{label:"Adres MAC"},{default:o(()=>[a(w,{modelValue:d.macAddress,"onUpdate:modelValue":e[1]||(e[1]=n=>d.macAddress=n),placeholder:"00:1A:2B:3C:4D:5E",disabled:!d.enabled},null,8,["modelValue","disabled"])]),_:1}),a(r,{label:"Adres IP"},{default:o(()=>[a(w,{modelValue:d.ipAddress,"onUpdate:modelValue":e[2]||(e[2]=n=>d.ipAddress=n),placeholder:"192.168.1.100",disabled:!d.enabled},null,8,["modelValue","disabled"])]),_:1}),a(r,{label:"Port"},{default:o(()=>[a(O,{modelValue:d.port,"onUpdate:modelValue":e[3]||(e[3]=n=>d.port=n),min:1,max:65535,disabled:!d.enabled},null,8,["modelValue","disabled"])]),_:1}),a(r,null,{default:o(()=>[a(u,{type:"primary",disabled:!d.enabled,onClick:U,loading:y.value},{default:o(()=>[a(c(p),{icon:"mdi:content-save",width:"16"}),e[11]||(e[11]=k(" Zapisz ustawienia "))]),_:1,__:[11]},8,["disabled","loading"])]),_:1})]),_:1},8,["model"])),[[L,b.value]])]),_:1})]),_:1}),a(W,{span:12},{default:o(()=>[a(C,{shadow:"hover"},{header:o(()=>[z("div",Q,[a(c(p),{icon:"mdi:devices",width:"24"}),e[12]||(e[12]=z("h3",null,"Zapisane urządzenia",-1))])]),default:o(()=>[D((V(),j(P,{data:_.value,style:{width:"100%"}},{default:o(()=>[a(g,{prop:"name",label:"Nazwa"}),a(g,{prop:"mac",label:"MAC",width:"140"}),a(g,{label:"Operacje",width:"120"},{default:o(({row:n})=>[a(u,{size:"small",type:"success",onClick:S=>M(n)},{default:o(()=>[a(c(p),{icon:"mdi:power",width:"14"})]),_:2},1032,["onClick"]),a(u,{size:"small",type:"danger",onClick:S=>E(n)},{default:o(()=>[a(c(p),{icon:"mdi:delete",width:"14"})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[L,A.value]]),a(u,{type:"primary",class:"add-button",onClick:e[4]||(e[4]=n=>f.value=!0)},{default:o(()=>[a(c(p),{icon:"mdi:plus",width:"16"}),e[13]||(e[13]=k(" Dodaj urządzenie "))]),_:1,__:[13]})]),_:1})]),_:1})]),_:1}),a(F,{modelValue:f.value,"onUpdate:modelValue":e[9]||(e[9]=n=>f.value=n),title:"Dodaj urządzenie",width:"400px"},{footer:o(()=>[a(u,{onClick:e[8]||(e[8]=n=>f.value=!1)},{default:o(()=>e[14]||(e[14]=[k("Anuluj")])),_:1,__:[14]}),a(u,{type:"primary",onClick:$},{default:o(()=>e[15]||(e[15]=[k("Dodaj")])),_:1,__:[15]})]),default:o(()=>[a(N,{model:t,"label-width":"100px"},{default:o(()=>[a(r,{label:"Nazwa"},{default:o(()=>[a(w,{modelValue:t.name,"onUpdate:modelValue":e[5]||(e[5]=n=>t.name=n)},null,8,["modelValue"])]),_:1}),a(r,{label:"MAC"},{default:o(()=>[a(w,{modelValue:t.mac,"onUpdate:modelValue":e[6]||(e[6]=n=>t.mac=n),placeholder:"00:1A:2B:3C:4D:5E"},null,8,["modelValue"])]),_:1}),a(r,{label:"IP"},{default:o(()=>[a(w,{modelValue:t.ip,"onUpdate:modelValue":e[7]||(e[7]=n=>t.ip=n),placeholder:"192.168.1.100"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},ee=T(R,[["__scopeId","data-v-f9fd292e"]]);export{ee as default};
