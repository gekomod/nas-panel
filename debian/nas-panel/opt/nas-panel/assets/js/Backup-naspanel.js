import{_ as Oe,u as Ae,r as y,c as j,o as Ze,W as Ge,b as _,d as m,e as u,g as l,f as t,w as i,k as d,I as r,t as o,m as k,h as C,i as z,p as ne,F as T,l as U,n as Ke,v as P,x as f,C as de}from"./index-naspanel.js";const Je={class:"backup-dashboard"},Qe={class:"header-content"},Xe={class:"header-left"},Ye={class:"header-icon"},et={class:"header-text"},tt={class:"subtitle"},at={class:"header-actions"},st={class:"backup-content"},lt={class:"card-header"},ot={class:"form-section"},it={class:"section-title"},nt={class:"input-description"},ct={class:"input-description"},ut={class:"form-section"},dt={class:"section-title"},rt={class:"items-grid"},pt={class:"item-content"},mt={class:"item-icon"},vt={class:"item-info"},yt={class:"item-size"},kt={class:"item-checkbox"},ht={class:"form-section"},_t={class:"section-title"},bt={class:"input-description"},ft={class:"switch-container"},gt={class:"switch-label"},wt={class:"input-description"},zt={class:"form-actions"},$t={class:"card-header"},Bt={key:0,class:"loading-spinner"},Dt={class:"form-section"},Tt={class:"section-title"},Vt={class:"backup-option"},Ct={class:"backup-info"},St={class:"backup-name"},jt={class:"backup-details"},Ut={class:"backup-date"},Pt={class:"backup-size"},Ht={class:"backup-status"},It={class:"input-description"},Mt={key:0,class:"selected-backup-info"},Wt={class:"backup-detail"},Nt={class:"detail-grid"},Rt={class:"detail-item"},qt={class:"detail-value"},Lt={class:"detail-item"},Ft={class:"detail-value"},xt={class:"detail-item"},Et={class:"detail-value"},Ot={class:"detail-item"},At={class:"detail-value"},Zt={class:"form-section"},Gt={class:"section-title"},Kt={class:"switch-container"},Jt={class:"switch-label"},Qt={class:"input-description"},Xt={class:"switch-container"},Yt={class:"switch-label"},ea={class:"input-description"},ta={class:"form-actions"},aa={class:"card-header"},sa={class:"card-header-actions"},la={key:0,class:"loading-spinner"},oa={key:2,class:"backups-list"},ia={class:"backup-icon"},na={class:"backup-content"},ca={class:"backup-header"},ua={class:"backup-meta"},da={class:"backup-type"},ra={class:"backup-details"},pa={class:"backup-date"},ma={class:"backup-size"},va={key:0,class:"backup-progress"},ya={class:"backup-actions"},ka={key:3,class:"pagination-section"},ha={class:"card-header"},_a={class:"form-section"},ba={class:"section-title"},fa={class:"input-description"},ga={key:0,class:"schedule-details"},wa={class:"input-description"},za={class:"input-description"},$a={class:"input-description"},Ba={class:"input-description"},Da={class:"input-description"},Ta={class:"form-section"},Va={class:"section-title"},Ca={class:"input-description"},Sa={key:0,class:"form-section"},ja={class:"section-title"},Ua={class:"next-backup-info"},Pa={class:"next-backup-icon"},Ha={class:"next-backup-details"},Ia={class:"next-backup-time"},Ma={class:"next-backup-description"},Wa={class:"form-actions"},Na={class:"stats-content"},Ra={class:"stat-item"},qa={class:"stat-icon stat-total"},La={class:"stat-info"},Fa={class:"stat-item"},xa={class:"stat-icon stat-completed"},Ea={class:"stat-info"},Oa={class:"stat-item"},Aa={class:"stat-icon stat-in-progress"},Za={class:"stat-info"},Ga={class:"stat-item"},Ka={class:"stat-icon stat-failed"},Ja={class:"stat-info"},Qa={class:"stat-item"},Xa={class:"stat-icon stat-size"},Ya={class:"stat-info"},es={__name:"Backup",setup(ts){const{t:c}=Ae(),g=y("create"),I=y(!1),A=y(!1),Z=y(!1),G=y(!1),K=y(!1),h=y({type:"full",name:"",items:[],compression:"medium",includeSystemConfig:!0}),re=[{value:"full",text:c("backup.types.full")},{value:"incremental",text:c("backup.types.incremental")},{value:"differential",text:c("backup.types.differential")}],pe=[{value:"documents",text:c("backup.items.documents"),icon:"mdi:file-document"},{value:"photos",text:c("backup.items.photos"),icon:"mdi:image"},{value:"music",text:c("backup.items.music"),icon:"mdi:music"},{value:"videos",text:c("backup.items.videos"),icon:"mdi:video"},{value:"configuration",text:c("backup.items.configuration"),icon:"mdi:cog"},{value:"databases",text:c("backup.items.databases"),icon:"mdi:database"},{value:"logs",text:c("backup.items.logs"),icon:"mdi:text-box"}],me=[{value:"none",text:c("backup.compression_levels.none")},{value:"low",text:c("backup.compression_levels.low")},{value:"medium",text:c("backup.compression_levels.medium")},{value:"high",text:c("backup.compression_levels.high")}],J=y([]),$=y(""),Q=y(!1),X=y(!0),B=y([]),M=y(1),W=y(10),N=y(""),Y=y(null),ee=y(null),S=y(null),n=y({type:"disabled",dailyTime:"02:00",weeklyDay:"monday",weeklyTime:"02:00",monthlyDay:1,monthlyTime:"02:00",retention:"30d"}),ve=[{value:"disabled",text:c("backup.schedule_types.disabled")},{value:"daily",text:c("backup.schedule_types.daily")},{value:"weekly",text:c("backup.schedule_types.weekly")},{value:"monthly",text:c("backup.schedule_types.monthly")}],ye=[{value:"monday",text:c("weekdays.monday")},{value:"tuesday",text:c("weekdays.tuesday")},{value:"wednesday",text:c("weekdays.wednesday")},{value:"thursday",text:c("weekdays.thursday")},{value:"friday",text:c("weekdays.friday")},{value:"saturday",text:c("weekdays.saturday")},{value:"sunday",text:c("weekdays.sunday")}],ke=[{value:"7d",text:c("backup.retention_options.7d")},{value:"14d",text:c("backup.retention_options.14d")},{value:"30d",text:c("backup.retention_options.30d")},{value:"90d",text:c("backup.retention_options.90d")},{value:"1y",text:c("backup.retention_options.1y")},{value:"forever",text:c("backup.retention_options.forever")}],R=j(()=>{let e=[...B.value];return N.value&&(e=e.filter(a=>a.status===N.value)),e.sort((a,p)=>new Date(p.created_at)-new Date(a.created_at)),e}),he=j(()=>{const e=(M.value-1)*W.value,a=e+W.value;return R.value.slice(e,a)}),_e=j(()=>B.value.length),be=j(()=>B.value.filter(e=>e.status==="completed").length),fe=j(()=>B.value.filter(e=>e.status==="in_progress").length),ge=j(()=>B.value.filter(e=>e.status==="failed").length),we=j(()=>B.value.reduce((e,a)=>e+(a.size||0),0)),ze=j(()=>N.value?`Brak kopii ze statusem: ${N.value}`:"Brak dostępnych kopii zapasowych"),te=e=>new Date(e).toLocaleDateString("pl-PL",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),F=e=>{if(e===0)return"0 Bytes";const a=1024,p=["Bytes","KB","MB","GB","TB"],w=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,w)).toFixed(2))+" "+p[w]},ae=e=>({completed:"success",failed:"danger",in_progress:"warning",queued:"info"})[e]||"",$e=e=>({full:"mdi:database",incremental:"mdi:database-sync",differential:"mdi:database-arrow-up"})[e]||"mdi:database",Be=e=>({full:"#3b82f6",incremental:"#10b981",differential:"#8b5cf6"})[e]||"#6b7280",ce=e=>{const a=h.value.items.indexOf(e);a===-1?h.value.items.push(e):h.value.items.splice(a,1)},De=e=>{M.value=e},Te=e=>{W.value=e,M.value=1},x=e=>J.value.find(a=>a.id===e)||B.value.find(a=>a.id===e),Ve=e=>{const a=x(e);return a?c(`backup.types.${a.type}`):"Nieznany"},Ce=e=>{const a=x(e);return a?a.created_at:null},Se=e=>{const a=x(e);return a?a.size:0},ue=e=>{const a=x(e);return a?a.status:"unknown"},je=()=>{const e=new Date,a=new Date(e);switch(n.value.type){case"daily":a.setHours(n.value.dailyTime.split(":")[0]),a.setMinutes(n.value.dailyTime.split(":")[1]),a.setSeconds(0),a<=e&&a.setDate(a.getDate()+1);break;case"weekly":const p={monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6,sunday:0};a.setHours(n.value.weeklyTime.split(":")[0]),a.setMinutes(n.value.weeklyTime.split(":")[1]),a.setSeconds(0);const w=p[n.value.weeklyDay]||1,b=a.getDay();let V=w-b;(V<0||V===0&&a<=e)&&(V+=7),a.setDate(a.getDate()+V);break;case"monthly":a.setHours(n.value.monthlyTime.split(":")[0]),a.setMinutes(n.value.monthlyTime.split(":")[1]),a.setSeconds(0),a.setDate(n.value.monthlyDay),a<=e&&a.setMonth(a.getMonth()+1);break}return a.toLocaleString("pl-PL",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},Ue=()=>{switch(n.value.type){case"daily":return`Codziennie o ${n.value.dailyTime}`;case"weekly":return`Co tydzień w ${c(`weekdays.${n.value.weeklyDay}`)} o ${n.value.weeklyTime}`;case"monthly":return`Co miesiąc ${n.value.monthlyDay}. dnia o ${n.value.monthlyTime}`;default:return"Harmonogram wyłączony"}},Pe=async()=>{Z.value=!0;try{const e=await P.post("/api/system/backup/create",h.value);f.success({message:"Rozpoczęto tworzenie kopii zapasowej",type:"success",showClose:!0}),h.value.name="",h.value.items=[],setTimeout(()=>{q(),E()},2e3)}catch(e){f.error({message:e.response?.data?.message||"Wystąpił błąd podczas tworzenia kopii",type:"error",showClose:!0})}finally{Z.value=!1}},E=async()=>{A.value=!0;try{const e=await P.get("/api/system/backup/list");J.value=e.data.backups||[]}catch{f.error("Błąd podczas ładowania dostępnych kopii")}finally{A.value=!1}},q=async()=>{I.value=!0;try{const e=await P.get("/api/system/backup/history",{params:{page:M.value,per_page:W.value}});B.value=e.data.backups||[],B.value.filter(p=>p.status==="in_progress").length>0&&!S.value&&He()}catch{f.error("Błąd podczas ładowania historii kopii")}finally{I.value=!1}},He=()=>{S.value&&clearInterval(S.value),S.value=setInterval(()=>{B.value.some(a=>a.status==="in_progress")?(q(),E()):(clearInterval(S.value),S.value=null)},5e3)},Ie=async()=>{try{await de.confirm("Czy na pewno chcesz przywrócić wybraną kopię zapasową? Ta operacja może nadpisać obecne dane.","Potwierdzenie przywracania",{confirmButtonText:"Przywróć",cancelButtonText:"Anuluj",type:"warning",confirmButtonClass:"el-button--danger"}),G.value=!0,await P.post("/api/system/backup/restore",{backup_id:$.value,restore_system_config:Q.value,verify_integrity:X.value}),f.success("Rozpoczęto proces przywracania kopii")}catch(e){e!=="cancel"&&f.error(e.response?.data?.message||"Błąd podczas przywracania kopii")}finally{G.value=!1}},Me=async e=>{try{Y.value=e;const a=await P({method:"get",url:`/api/system/backup/download/${e}`,responseType:"blob"}),p=window.URL.createObjectURL(new Blob([a.data])),w=document.createElement("a");w.href=p;const b=a.headers["content-disposition"];let V=`backup-${e}.tar.gz`;if(b){const v=b.match(/filename="?(.+)"?/);v&&v[1]&&(V=v[1])}w.setAttribute("download",V),document.body.appendChild(w),w.click(),setTimeout(()=>{window.URL.revokeObjectURL(p),w.remove()},100),f.success("Rozpoczęto pobieranie kopii")}catch(a){a.response?.status===404?f.error("Kopia nie została znaleziona"):a.response?.status===423?f.warning("Kopia nie jest jeszcze gotowa do pobrania"):f.error("Błąd podczas pobierania kopii")}finally{Y.value=null}},We=async e=>{try{await de.confirm("Czy na pewno chcesz usunąć tę kopię zapasową? Tej akcji nie można cofnąć.","Potwierdzenie usunięcia",{confirmButtonText:"Usuń",cancelButtonText:"Anuluj",type:"error",confirmButtonClass:"el-button--danger"}),ee.value=e,await P.delete(`/api/system/backup/delete/${e}`),f.success("Kopia zapasowa została usunięta"),q(),E()}catch(a){a!=="cancel"&&f.error("Błąd podczas usuwania kopii")}finally{ee.value=null}},Ne=async()=>{try{const e=await P.get("/api/system/backup/schedule");e.data.schedule&&(n.value={type:e.data.schedule.type||"disabled",dailyTime:e.data.schedule.daily_time||"02:00",weeklyDay:e.data.schedule.weekly_day||"monday",weeklyTime:e.data.schedule.weekly_time||"02:00",monthlyDay:e.data.schedule.monthly_day||1,monthlyTime:e.data.schedule.monthly_time||"02:00",retention:e.data.schedule.retention||"30d"})}catch(e){console.error("Error loading schedule:",e)}},Re=async()=>{K.value=!0;try{const e={schedule:{type:n.value.type,retention:n.value.retention}};n.value.type==="daily"?e.schedule.daily_time=n.value.dailyTime:n.value.type==="weekly"?(e.schedule.weekly_day=n.value.weeklyDay,e.schedule.weekly_time=n.value.weeklyTime):n.value.type==="monthly"&&(e.schedule.monthly_day=n.value.monthlyDay,e.schedule.monthly_time=n.value.monthlyTime),await P.post("/api/system/backup/schedule",e),f.success("Harmonogram został zapisany")}catch(e){f.error(e.response?.data?.message||"Błąd podczas zapisywania harmonogramu")}finally{K.value=!1}};return Ze(()=>{E(),q(),Ne()}),Ge(()=>{S.value&&clearInterval(S.value)}),(e,a)=>{const p=_("el-button"),w=_("el-button-group"),b=_("el-card"),V=_("el-input"),v=_("el-form-item"),D=_("el-option"),H=_("el-select"),qe=_("el-checkbox"),se=_("el-switch"),le=_("el-form"),L=_("el-icon"),O=_("el-tag"),Le=_("el-empty"),Fe=_("el-progress"),xe=_("el-pagination"),oe=_("el-time-picker"),Ee=_("el-input-number");return u(),m("div",Je,[l(b,{class:"dashboard-header",shadow:"hover"},{default:i(()=>[t("div",Qe,[t("div",Xe,[t("div",Ye,[l(d(r),{icon:"mdi:backup-restore"})]),t("div",et,[t("h1",null,o(e.$t("backup.title")),1),t("p",tt,o(e.$t("backup.subtitle")||"Zarządzanie kopiami zapasowymi systemu"),1)])]),t("div",at,[l(w,null,{default:i(()=>[l(p,{type:g.value==="create"?"primary":"default",onClick:a[0]||(a[0]=s=>g.value="create")},{default:i(()=>[l(d(r),{icon:"mdi:plus-circle"}),k(" "+o(e.$t("backup.create")),1)]),_:1},8,["type"]),l(p,{type:g.value==="restore"?"primary":"default",onClick:a[1]||(a[1]=s=>g.value="restore")},{default:i(()=>[l(d(r),{icon:"mdi:restore"}),k(" "+o(e.$t("backup.restore")),1)]),_:1},8,["type"]),l(p,{type:g.value==="history"?"primary":"default",onClick:a[2]||(a[2]=s=>g.value="history")},{default:i(()=>[l(d(r),{icon:"mdi:history"}),k(" "+o(e.$t("backup.history")),1)]),_:1},8,["type"]),l(p,{type:g.value==="schedule"?"primary":"default",onClick:a[3]||(a[3]=s=>g.value="schedule")},{default:i(()=>[l(d(r),{icon:"mdi:calendar-clock"}),k(" "+o(e.$t("backup.schedule")),1)]),_:1},8,["type"])]),_:1})])])]),_:1}),t("div",st,[g.value==="create"?(u(),C(b,{key:0,class:"tab-card",shadow:"hover"},{header:i(()=>[t("div",lt,[t("h2",null,[l(d(r),{icon:"mdi:content-save-plus"}),k(" "+o(e.$t("backup.create")),1)])])]),default:i(()=>[l(le,{model:h.value,"label-position":"top",onSubmit:ne(Pe,["prevent"]),class:"backup-form"},{default:i(()=>[t("div",ot,[t("h3",it,o(e.$t("backup.basicSettings")||"Podstawowe ustawienia"),1),l(v,{label:e.$t("backup.name"),required:""},{default:i(()=>[l(V,{modelValue:h.value.name,"onUpdate:modelValue":a[4]||(a[4]=s=>h.value.name=s),placeholder:e.$t("backup.namePlaceholder")||"Nazwa kopii zapasowej",class:"custom-input"},null,8,["modelValue","placeholder"]),t("span",nt,o(e.$t("backup.nameDescription")||"Wprowadź unikalną nazwę dla kopii zapasowej"),1)]),_:1},8,["label"]),l(v,{label:e.$t("backup.type"),required:""},{default:i(()=>[l(H,{modelValue:h.value.type,"onUpdate:modelValue":a[5]||(a[5]=s=>h.value.type=s),class:"custom-select"},{default:i(()=>[(u(),m(T,null,U(re,s=>l(D,{key:s.value,label:s.text,value:s.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),t("span",ct,o(e.$t("backup.typeDescription")||"Wybierz typ kopii zapasowej"),1)]),_:1},8,["label"])]),t("div",ut,[t("h3",dt,o(e.$t("backup.itemsss")||"Elementy do kopii"),1),l(v,{label:e.$t("backup.itemsss")},{default:i(()=>[t("div",rt,[(u(),m(T,null,U(pe,s=>l(b,{key:s.value,class:Ke(["item-card",{selected:h.value.items.includes(s.value)}]),onClick:ie=>ce(s.value),shadow:"hover"},{default:i(()=>[t("div",pt,[t("div",mt,[l(d(r),{icon:s.icon||"mdi:folder"},null,8,["icon"])]),t("div",vt,[t("h4",null,o(s.text),1),t("p",yt,o(s.size||"Rozmiar: Nieznany"),1)]),t("div",kt,[l(qe,{"model-value":h.value.items.includes(s.value),onClick:ne(ie=>ce(s.value),["stop"])},null,8,["model-value","onClick"])])])]),_:2},1032,["class","onClick"])),64))])]),_:1},8,["label"])]),t("div",ht,[t("h3",_t,o(e.$t("backup.advancedSettings")||"Zaawansowane ustawienia"),1),l(v,{label:e.$t("backup.compression")},{default:i(()=>[l(H,{modelValue:h.value.compression,"onUpdate:modelValue":a[6]||(a[6]=s=>h.value.compression=s),class:"custom-select"},{default:i(()=>[(u(),m(T,null,U(me,s=>l(D,{key:s.value,label:s.text,value:s.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),t("span",bt,o(e.$t("backup.compressionDescription")||"Wybierz poziom kompresji"),1)]),_:1},8,["label"]),l(v,null,{default:i(()=>[t("div",ft,[l(se,{modelValue:h.value.includeSystemConfig,"onUpdate:modelValue":a[7]||(a[7]=s=>h.value.includeSystemConfig=s),"inline-prompt":"","active-text":e.$t("common.enabled"),"inactive-text":e.$t("common.disabled"),class:"custom-switch"},null,8,["modelValue","active-text","inactive-text"]),t("span",gt,o(e.$t("backup.include_system_config")),1)]),t("span",wt,o(e.$t("backup.includeSystemConfigDescription")||"Uwzględnij konfigurację systemu w kopii"),1)]),_:1})]),t("div",zt,[l(p,{type:"primary","native-type":"submit",loading:Z.value,class:"create-button"},{default:i(()=>[l(d(r),{icon:"mdi:content-save"}),k(" "+o(e.$t("backup.create_button")),1)]),_:1},8,["loading"])])]),_:1},8,["model"])]),_:1})):z("",!0),g.value==="restore"?(u(),C(b,{key:1,class:"tab-card",shadow:"hover"},{header:i(()=>[t("div",$t,[t("h2",null,[l(d(r),{icon:"mdi:backup-restore"}),k(" "+o(e.$t("backup.restore")),1)])])]),default:i(()=>[A.value?(u(),m("div",Bt,[l(L,{size:48,class:"is-loading"},{default:i(()=>[l(d(r),{icon:"mdi:loading"})]),_:1}),t("p",null,o(e.$t("backup.loadingBackups")||"Ładowanie dostępnych kopii..."),1)])):(u(),C(le,{key:1,"label-position":"top",class:"restore-form"},{default:i(()=>[t("div",Dt,[t("h3",Tt,o(e.$t("backup.selectBackup")||"Wybierz kopię do przywrócenia"),1),l(v,{label:e.$t("backup.select_backup"),required:""},{default:i(()=>[l(H,{modelValue:$.value,"onUpdate:modelValue":a[8]||(a[8]=s=>$.value=s),filterable:"",placeholder:e.$t("backup.selectBackupPlaceholder")||"Wybierz kopię zapasową",class:"custom-select"},{default:i(()=>[(u(!0),m(T,null,U(J.value,s=>(u(),C(D,{key:s.id,label:s.name,value:s.id,disabled:s.status!=="completed"},{default:i(()=>[t("div",Vt,[t("div",Ct,[t("div",St,o(s.name),1),t("div",jt,[t("span",Ut,o(te(s.created_at)),1),t("span",Pt,o(F(s.size)),1)])]),t("div",Ht,[l(O,{type:ae(s.status),size:"small"},{default:i(()=>[k(o(e.$t(`backup.statuses.${s.status}`)),1)]),_:2},1032,["type"])])])]),_:2},1032,["label","value","disabled"]))),128))]),_:1},8,["modelValue","placeholder"]),t("span",It,o(e.$t("backup.selectBackupDescription")||"Wybierz kopię zapasową do przywrócenia"),1)]),_:1},8,["label"]),$.value?(u(),m("div",Mt,[l(b,{shadow:"never"},{default:i(()=>[t("div",Wt,[a[25]||(a[25]=t("h4",null,"Szczegóły wybranej kopii:",-1)),t("div",Nt,[t("div",Rt,[a[21]||(a[21]=t("span",{class:"detail-label"},"Typ:",-1)),t("span",qt,o(Ve($.value)),1)]),t("div",Lt,[a[22]||(a[22]=t("span",{class:"detail-label"},"Data utworzenia:",-1)),t("span",Ft,o(te(Ce($.value))),1)]),t("div",xt,[a[23]||(a[23]=t("span",{class:"detail-label"},"Rozmiar:",-1)),t("span",Et,o(F(Se($.value))),1)]),t("div",Ot,[a[24]||(a[24]=t("span",{class:"detail-label"},"Status:",-1)),t("span",At,[l(O,{type:ae(ue($.value)),size:"small"},{default:i(()=>[k(o(e.$t(`backup.statuses.${ue($.value)}`)),1)]),_:1},8,["type"])])])])])]),_:1})])):z("",!0)]),t("div",Zt,[t("h3",Gt,o(e.$t("backup.restoreOptions")||"Opcje przywracania"),1),l(v,null,{default:i(()=>[t("div",Kt,[l(se,{modelValue:Q.value,"onUpdate:modelValue":a[9]||(a[9]=s=>Q.value=s),"inline-prompt":"","active-text":e.$t("common.enabled"),"inactive-text":e.$t("common.disabled"),class:"custom-switch"},null,8,["modelValue","active-text","inactive-text"]),t("span",Jt,o(e.$t("backup.restore_system_config")),1)]),t("span",Qt,o(e.$t("backup.restoreSystemConfigDescription")||"Przywróć konfigurację systemu"),1)]),_:1}),l(v,null,{default:i(()=>[t("div",Xt,[l(se,{modelValue:X.value,"onUpdate:modelValue":a[10]||(a[10]=s=>X.value=s),"inline-prompt":"","active-text":e.$t("common.enabled"),"inactive-text":e.$t("common.disabled"),class:"custom-switch"},null,8,["modelValue","active-text","inactive-text"]),t("span",Yt,o(e.$t("backup.verify_integrity")),1)]),t("span",ea,o(e.$t("backup.verifyIntegrityDescription")||"Zweryfikuj integralność kopii przed przywróceniem"),1)]),_:1})]),t("div",ta,[l(p,{type:"danger",onClick:Ie,loading:G.value,disabled:!$.value,class:"restore-button"},{default:i(()=>[l(d(r),{icon:"mdi:restore-alert"}),k(" "+o(e.$t("backup.restore_button")),1)]),_:1},8,["loading","disabled"])])]),_:1}))]),_:1})):z("",!0),g.value==="history"?(u(),C(b,{key:2,class:"tab-card",shadow:"hover"},{header:i(()=>[t("div",aa,[t("h2",null,[l(d(r),{icon:"mdi:history"}),k(" "+o(e.$t("backup.history"))+" ",1),R.value.length>0?(u(),C(O,{key:0,size:"small",type:"info"},{default:i(()=>[k(o(R.value.length)+" kopii ",1)]),_:1})):z("",!0)]),t("div",sa,[l(H,{modelValue:N.value,"onUpdate:modelValue":a[11]||(a[11]=s=>N.value=s),placeholder:e.$t("backup.filter")||"Filtruj",clearable:"",class:"filter-select"},{default:i(()=>[l(D,{label:"Wszystkie",value:""}),l(D,{label:"Zakończone",value:"completed"}),l(D,{label:"W trakcie",value:"in_progress"}),l(D,{label:"Niepowodzenie",value:"failed"})]),_:1},8,["modelValue","placeholder"]),l(p,{type:"info",plain:"",onClick:q,loading:I.value},{default:i(()=>[l(d(r),{icon:"mdi:refresh"}),k(" "+o(e.$t("common.refresh")),1)]),_:1},8,["loading"])])])]),default:i(()=>[I.value?(u(),m("div",la,[l(L,{size:48,class:"is-loading"},{default:i(()=>[l(d(r),{icon:"mdi:loading"})]),_:1}),t("p",null,o(e.$t("backup.loadingHistory")||"Ładowanie historii..."),1)])):R.value.length===0?(u(),C(Le,{key:1,description:ze.value,class:"empty-state"},{image:i(()=>[l(d(r),{icon:"mdi:database-off",width:"120",height:"120"})]),_:1},8,["description"])):(u(),m("div",oa,[(u(!0),m(T,null,U(he.value,s=>(u(),m("div",{key:s.id,class:"backup-item"},[t("div",ia,[l(L,{size:24,color:Be(s.type)},{default:i(()=>[l(d(r),{icon:$e(s.type)},null,8,["icon"])]),_:2},1032,["color"])]),t("div",na,[t("div",ca,[t("h4",null,o(s.name),1),t("div",ua,[l(O,{type:ae(s.status),size:"small",effect:"plain"},{default:i(()=>[k(o(e.$t(`backup.statuses.${s.status}`)),1)]),_:2},1032,["type"]),t("span",da,o(e.$t(`backup.types.${s.type}`)),1)])]),t("p",ra,[t("span",pa,o(te(s.created_at)),1),t("span",ma,o(F(s.size)),1)]),s.status==="in_progress"?(u(),m("div",va,[l(Fe,{percentage:s.progress||0,"stroke-width":4,"show-text":!0,"text-inside":!0},null,8,["percentage"])])):z("",!0)]),t("div",ya,[l(p,{size:"small",onClick:ie=>Me(s.id),disabled:s.status!=="completed",loading:Y.value===s.id},{default:i(()=>[l(L,null,{default:i(()=>[l(d(r),{icon:"mdi:download"})]),_:1}),k(" "+o(e.$t("common.download")),1)]),_:2},1032,["onClick","disabled","loading"]),l(p,{size:"small",type:"danger",onClick:ie=>We(s.id),loading:ee.value===s.id},{default:i(()=>[l(L,null,{default:i(()=>[l(d(r),{icon:"mdi:delete"})]),_:1}),k(" "+o(e.$t("common.delete")),1)]),_:2},1032,["onClick","loading"])])]))),128))])),!I.value&&R.value.length>0?(u(),m("div",ka,[l(xe,{"current-page":M.value,"onUpdate:currentPage":a[12]||(a[12]=s=>M.value=s),"page-size":W.value,"onUpdate:pageSize":a[13]||(a[13]=s=>W.value=s),total:R.value.length,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:De,onSizeChange:Te,disabled:I.value},null,8,["current-page","page-size","total","disabled"])])):z("",!0)]),_:1})):z("",!0),g.value==="schedule"?(u(),C(b,{key:3,class:"tab-card",shadow:"hover"},{header:i(()=>[t("div",ha,[t("h2",null,[l(d(r),{icon:"mdi:calendar-clock"}),k(" "+o(e.$t("backup.schedule")),1)])])]),default:i(()=>[l(le,{model:n.value,"label-position":"top",onSubmit:ne(Re,["prevent"]),class:"schedule-form"},{default:i(()=>[t("div",_a,[t("h3",ba,o(e.$t("backup.scheduleSettings")||"Ustawienia harmonogramu"),1),l(v,{label:e.$t("backup.schedule_type"),required:""},{default:i(()=>[l(H,{modelValue:n.value.type,"onUpdate:modelValue":a[14]||(a[14]=s=>n.value.type=s),class:"custom-select"},{default:i(()=>[(u(),m(T,null,U(ve,s=>l(D,{key:s.value,label:s.text,value:s.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),t("span",fa,o(e.$t("backup.scheduleTypeDescription")||"Wybierz typ harmonogramu"),1)]),_:1},8,["label"]),n.value.type!=="disabled"?(u(),m("div",ga,[n.value.type==="daily"?(u(),C(v,{key:0,label:e.$t("backup.daily_time"),required:""},{default:i(()=>[l(oe,{modelValue:n.value.dailyTime,"onUpdate:modelValue":a[15]||(a[15]=s=>n.value.dailyTime=s),format:"HH:mm","value-format":"HH:mm",placeholder:e.$t("backup.dailyTimePlaceholder")||"Wybierz godzinę",class:"custom-time-picker"},null,8,["modelValue","placeholder"]),t("span",wa,o(e.$t("backup.dailyTimeDescription")||"Godzina wykonania codziennej kopii"),1)]),_:1},8,["label"])):n.value.type==="weekly"?(u(),m(T,{key:1},[l(v,{label:e.$t("backup.weekly_day"),required:""},{default:i(()=>[l(H,{modelValue:n.value.weeklyDay,"onUpdate:modelValue":a[16]||(a[16]=s=>n.value.weeklyDay=s),class:"custom-select"},{default:i(()=>[(u(),m(T,null,U(ye,s=>l(D,{key:s.value,label:s.text,value:s.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),t("span",za,o(e.$t("backup.weeklyDayDescription")||"Dzień tygodnia wykonania kopii"),1)]),_:1},8,["label"]),l(v,{label:e.$t("backup.weekly_time"),required:""},{default:i(()=>[l(oe,{modelValue:n.value.weeklyTime,"onUpdate:modelValue":a[17]||(a[17]=s=>n.value.weeklyTime=s),format:"HH:mm","value-format":"HH:mm",placeholder:e.$t("backup.weeklyTimePlaceholder")||"Wybierz godzinę",class:"custom-time-picker"},null,8,["modelValue","placeholder"]),t("span",$a,o(e.$t("backup.weeklyTimeDescription")||"Godzina wykonania cotygodniowej kopii"),1)]),_:1},8,["label"])],64)):n.value.type==="monthly"?(u(),m(T,{key:2},[l(v,{label:e.$t("backup.monthly_day"),required:""},{default:i(()=>[l(Ee,{modelValue:n.value.monthlyDay,"onUpdate:modelValue":a[18]||(a[18]=s=>n.value.monthlyDay=s),min:1,max:31,"controls-position":"right",class:"custom-number-input"},null,8,["modelValue"]),t("span",Ba,o(e.$t("backup.monthlyDayDescription")||"Dzień miesiąca wykonania kopii"),1)]),_:1},8,["label"]),l(v,{label:e.$t("backup.monthly_time"),required:""},{default:i(()=>[l(oe,{modelValue:n.value.monthlyTime,"onUpdate:modelValue":a[19]||(a[19]=s=>n.value.monthlyTime=s),format:"HH:mm","value-format":"HH:mm",placeholder:e.$t("backup.monthlyTimePlaceholder")||"Wybierz godzinę",class:"custom-time-picker"},null,8,["modelValue","placeholder"]),t("span",Da,o(e.$t("backup.monthlyTimeDescription")||"Godzina wykonania comiesięcznej kopii"),1)]),_:1},8,["label"])],64)):z("",!0)])):z("",!0)]),t("div",Ta,[t("h3",Va,o(e.$t("backup.retentionPolicy")||"Polityka przechowywania"),1),l(v,{label:e.$t("backup.retention")},{default:i(()=>[l(H,{modelValue:n.value.retention,"onUpdate:modelValue":a[20]||(a[20]=s=>n.value.retention=s),class:"custom-select"},{default:i(()=>[(u(),m(T,null,U(ke,s=>l(D,{key:s.value,label:s.text,value:s.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),t("span",Ca,o(e.$t("backup.retentionDescription")||"Okres przechowywania kopii zapasowych"),1)]),_:1},8,["label"])]),n.value.type!=="disabled"?(u(),m("div",Sa,[t("h3",ja,o(e.$t("backup.nextBackup")||"Następna kopia"),1),l(b,{shadow:"never",class:"next-backup-card"},{default:i(()=>[t("div",Ua,[t("div",Pa,[l(d(r),{icon:"mdi:calendar-check"})]),t("div",Ha,[t("h4",null,o(e.$t("backup.nextScheduledBackup")||"Następna zaplanowana kopia:"),1),t("p",Ia,o(je()),1),t("p",Ma,o(Ue()),1)])])]),_:1})])):z("",!0),t("div",Wa,[l(p,{type:"primary","native-type":"submit",loading:K.value,class:"save-button"},{default:i(()=>[l(d(r),{icon:"mdi:content-save-check"}),k(" "+o(e.$t("backup.save_schedule")),1)]),_:1},8,["loading"])])]),_:1},8,["model"])]),_:1})):z("",!0)]),l(b,{class:"stats-card",shadow:"hover"},{default:i(()=>[t("div",Na,[t("div",Ra,[t("div",qa,[l(d(r),{icon:"mdi:database"})]),t("div",La,[t("h3",null,o(_e.value),1),t("p",null,o(e.$t("backup.totalBackups")||"Wszystkie kopie"),1)])]),t("div",Fa,[t("div",xa,[l(d(r),{icon:"mdi:check-circle"})]),t("div",Ea,[t("h3",null,o(be.value),1),t("p",null,o(e.$t("backup.completedBackups")||"Zakończone"),1)])]),t("div",Oa,[t("div",Aa,[l(d(r),{icon:"mdi:progress-clock"})]),t("div",Za,[t("h3",null,o(fe.value),1),t("p",null,o(e.$t("backup.inProgressBackups")||"W trakcie"),1)])]),t("div",Ga,[t("div",Ka,[l(d(r),{icon:"mdi:alert-circle"})]),t("div",Ja,[t("h3",null,o(ge.value),1),t("p",null,o(e.$t("backup.failedBackups")||"Nieudane"),1)])]),t("div",Qa,[t("div",Xa,[l(d(r),{icon:"mdi:harddisk"})]),t("div",Ya,[t("h3",null,o(F(we.value)),1),t("p",null,o(e.$t("backup.totalSize")||"Łączny rozmiar"),1)])])])]),_:1})])}}},ss=Oe(es,[["__scopeId","data-v-7dc38bcf"]]);export{ss as default};
