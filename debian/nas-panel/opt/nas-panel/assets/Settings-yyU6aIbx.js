import{_ as G,r,o as X,a as S,b as i,e,w as a,d as m,h as n,f as v,j as b,I as g,F as M,k as E,t as f,g as N,l as A,y as $,z as U,a1 as B}from"./index-BdZFAIpY.js";const Y={class:"system-settings"},K={class:"card-header"},O={key:0,class:"loading-spinner"},Z={class:"service-checkbox"},x={class:"action-buttons"},ee={__name:"Settings",setup(le){const C=r("docker"),t=r({docker:{composeDir:"/opt/docker/compose",dataRoot:"/var/lib/docker",autoStart:!0},system:{hostname:"",timezone:"Europe/Warsaw",language:"pl"},ui:{theme:"system",sidebarMode:"vertical"},services:{monitoredServices:[]},updates:{autoUpdate:!1,schedule:"0 0 * * *",updateCommand:"sudo apt-get update && sudo apt-get upgrade -y"}}),L=r([{value:"nas-web",label:"Web Server",icon:"mdi:server"},{value:"nas-webdav",label:"Dav Server",icon:"mdi:folder-network"},{value:"docker",label:"Docker",icon:"mdi:docker"},{value:"ssh",label:"SSH",icon:"mdi:lock"},{value:"cron",label:"Cron",icon:"mdi:clock"},{value:"smbd",label:"Samba",icon:"mdi:folder-network"},{value:"nginx",label:"NGINX",icon:"mdi:nginx"},{value:"mysql",label:"MySQL",icon:"mdi:database"},{value:"postgresql",label:"PostgreSQL",icon:"mdi:database"}]),h=r(!0),w=r(!1),R=r(["Europe/Warsaw","Europe/London","America/New_York","Asia/Tokyo"]),D=async()=>{try{h.value=!0;const l=await $.get("/system/settings");l.data.services?.monitoredServices&&(l.data.services.monitoredServices=Array.isArray(l.data.services.monitoredServices)?l.data.services.monitoredServices:[]),t.value=l.data}catch(l){U.error("Failed to load settings"),console.error(l)}finally{h.value=!1}},I=async()=>{try{w.value=!0,await $.post("/system/settings",t.value),U.success("Ustawienia zapisane"),B.global.locale.value!==t.value.system.language&&window.location.reload()}catch(l){U.error("Błąd zapisywania ustawień"),console.error(l)}finally{w.value=!1}},j=async()=>{try{const s=(await $.get("/system/cron-jobs")).data.find(y=>y.id==="system-auto-updates");s&&(t.value.updates={autoUpdate:!0,schedule:s.schedule,updateCommand:s.command})}catch(l){console.error("Error checking system cron jobs:",l)}},P=()=>{D()},T=l=>{B.global.locale.value=l},z=l=>{console.log("Browsing directory for field:",l)};return X(()=>{D(),j()}),(l,s)=>{const y=n("el-icon"),k=n("el-button"),_=n("el-input"),d=n("el-form-item"),F=n("el-switch"),c=n("el-form"),V=n("el-tab-pane"),u=n("el-option"),p=n("el-select"),W=n("el-divider"),q=n("el-checkbox"),H=n("el-checkbox-group"),J=n("el-tabs"),Q=n("el-card");return i(),S("div",Y,[e(Q,{shadow:"hover",class:"settings-card"},{header:a(()=>[m("div",K,[e(y,{size:"24"},{default:a(()=>[e(b(g),{icon:"mdi:cog"})]),_:1}),m("span",null,f(l.$t("settings.systemSettings")),1)])]),default:a(()=>[e(J,{modelValue:C.value,"onUpdate:modelValue":s[14]||(s[14]=o=>C.value=o),type:"card"},{default:a(()=>[e(V,{label:"Docker",name:"docker"},{default:a(()=>[h.value?(i(),S("div",O,[e(y,{size:32,class:"is-loading"},{default:a(()=>[e(b(g),{icon:"mdi:loading"})]),_:1})])):(i(),v(c,{key:1,ref:"dockerForm",model:t.value.docker,"label-position":"top"},{default:a(()=>[e(d,{label:l.$t("settings.dockerComposeDir")},{default:a(()=>[e(_,{modelValue:t.value.docker.composeDir,"onUpdate:modelValue":s[1]||(s[1]=o=>t.value.docker.composeDir=o),placeholder:l.$t("settings.dockerComposeDirPlaceholder")},{append:a(()=>[e(k,{onClick:s[0]||(s[0]=o=>z("docker.composeDir"))},{default:a(()=>[e(b(g),{icon:"mdi:folder-search"})]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(d,{label:l.$t("settings.dockerDataRoot")},{default:a(()=>[e(_,{modelValue:t.value.docker.dataRoot,"onUpdate:modelValue":s[3]||(s[3]=o=>t.value.docker.dataRoot=o),placeholder:l.$t("settings.dockerDataRootPlaceholder")},{append:a(()=>[e(k,{onClick:s[2]||(s[2]=o=>z("docker.dataRoot"))},{default:a(()=>[e(b(g),{icon:"mdi:folder-search"})]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(d,{label:l.$t("settings.dockerAutoStart")},{default:a(()=>[e(F,{modelValue:t.value.docker.autoStart,"onUpdate:modelValue":s[4]||(s[4]=o=>t.value.docker.autoStart=o)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"]))]),_:1}),e(V,{label:"System",name:"system"},{default:a(()=>[e(c,{ref:"systemForm",model:t.value.system,"label-position":"top"},{default:a(()=>[e(d,{label:l.$t("settings.hostname")},{default:a(()=>[e(_,{modelValue:t.value.system.hostname,"onUpdate:modelValue":s[5]||(s[5]=o=>t.value.system.hostname=o)},null,8,["modelValue"])]),_:1},8,["label"]),e(d,{label:l.$t("settings.timezone")},{default:a(()=>[e(p,{modelValue:t.value.system.timezone,"onUpdate:modelValue":s[6]||(s[6]=o=>t.value.system.timezone=o),filterable:""},{default:a(()=>[(i(!0),S(M,null,E(R.value,o=>(i(),v(u,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(d,{label:l.$t("settings.language")},{default:a(()=>[e(p,{modelValue:t.value.system.language,"onUpdate:modelValue":s[7]||(s[7]=o=>t.value.system.language=o),onChange:T},{default:a(()=>[e(u,{label:"Polski",value:"pl"}),e(u,{label:"English",value:"en"})]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"]),e(W),m("h3",null,f(l.$t("settings.autoUpdatesTitle")),1),e(c,{model:t.value.updates,"label-position":"top"},{default:a(()=>[e(d,{label:l.$t("settings.enableAutoUpdates")},{default:a(()=>[e(F,{modelValue:t.value.updates.autoUpdate,"onUpdate:modelValue":s[8]||(s[8]=o=>t.value.updates.autoUpdate=o)},null,8,["modelValue"])]),_:1},8,["label"]),t.value.updates.autoUpdate?(i(),v(d,{key:0,label:l.$t("settings.updateSchedule")},{default:a(()=>[e(p,{modelValue:t.value.updates.schedule,"onUpdate:modelValue":s[9]||(s[9]=o=>t.value.updates.schedule=o)},{default:a(()=>[e(u,{value:"0 0 * * *",label:l.$t("settings.dailyMidnight")},null,8,["label"]),e(u,{value:"0 0 * * 0",label:l.$t("settings.weeklySunday")},null,8,["label"]),e(u,{value:"0 0 1 * *",label:l.$t("settings.monthlyFirstDay")},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"])):N("",!0),t.value.updates.autoUpdate?(i(),v(d,{key:1,label:l.$t("settings.updateCommand")},{default:a(()=>[e(_,{modelValue:t.value.updates.updateCommand,"onUpdate:modelValue":s[10]||(s[10]=o=>t.value.updates.updateCommand=o)},null,8,["modelValue"])]),_:1},8,["label"])):N("",!0)]),_:1},8,["model"])]),_:1}),e(V,{label:"Interfejs",name:"ui"},{default:a(()=>[e(c,{ref:"uiForm",model:t.value.ui,"label-position":"top"},{default:a(()=>[e(d,{label:l.$t("settings.theme")},{default:a(()=>[e(p,{modelValue:t.value.ui.theme,"onUpdate:modelValue":s[11]||(s[11]=o=>t.value.ui.theme=o)},{default:a(()=>[e(u,{label:"Light",value:"light"}),e(u,{label:"Dark",value:"dark"}),e(u,{label:"System",value:"system"})]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(d,{label:l.$t("settings.sidebarMode")},{default:a(()=>[e(p,{modelValue:t.value.ui.sidebarMode,"onUpdate:modelValue":s[12]||(s[12]=o=>t.value.ui.sidebarMode=o)},{default:a(()=>[e(u,{label:l.$t("settings.sidebarVertical"),value:"vertical"},null,8,["label"]),e(u,{label:l.$t("settings.sidebarHorizontal"),value:"horizontal"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),e(V,{label:"Usługi",name:"services"},{default:a(()=>[e(c,{ref:"servicesForm",model:t.value.services,"label-position":"top"},{default:a(()=>[e(H,{modelValue:t.value.services.monitoredServices,"onUpdate:modelValue":s[13]||(s[13]=o=>t.value.services.monitoredServices=o)},{default:a(()=>[(i(!0),S(M,null,E(L.value,o=>(i(),v(q,{key:o.value,value:o.value},{default:a(()=>[m("div",Z,[e(b(g),{icon:o.icon,width:"18"},null,8,["icon"]),m("span",null,f(o.label),1)])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"]),m("div",x,[e(k,{type:"primary",onClick:I,loading:w.value},{default:a(()=>[A(f(l.$t("settings.save")),1)]),_:1},8,["loading"]),e(k,{onClick:P},{default:a(()=>[A(f(l.$t("settings.reset")),1)]),_:1})])]),_:1})])}}},oe=G(ee,[["__scopeId","data-v-34442a2c"]]);export{oe as default};
